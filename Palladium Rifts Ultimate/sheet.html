<input type="hidden" name="attr_version" value="" />
<input type="hidden" class="tabstoggle" name="attr_sheetTab" value="basic" />
<input type="hidden" class="equiptoggle" name="attr_sheetEquipTab" value="weapons" />
<input type="hidden" class="combattoggle" name="attr_sheetCombatTab" value="hth" />
<input type="hidden" class="rctoggle" name="attr_sheetRobotCombatTab" value="robot_basic" />
<input type="hidden" class="pstype" name="attr_ps_type" value="normal" />
<input type="hidden" class="dctype" name="attr_charactertype_select" value="S.D.C." />
<input type="hidden" class="hth-autododge" name="attr_autododge_acquired" value="0" />
<input type="hidden" class="basic-collapse" name="attr_basic_collapse" value="0" />
<input type="hidden" class="skills-collapse" name="attr_skills_collapse" value="0" />
<input type="hidden" class="hth-collapse" name="attr_hth_collapse" value="0" />
<input type="hidden" class="robot-collapse" name="attr_robot_collapse" value="0" />
<input type="hidden" class="wpancient-collapse" name="attr_wp_ancient_collapse" value="0" />
<input type="hidden" class="wpmodern-collapse" name="attr_wp_modern_collapse" value="0" />
<input type="hidden" class="saves-collapse" name="attr_saves_collapse" value="0" />
<input type="hidden" class="magic-collapse" name="attr_magic_collapse" value="0" />
<input type="hidden" class="weapons-collapse" name="attr_weapons_collapse" value="0" />
<input type="hidden" class="armor-collapse" name="attr_armor_collapse" value="0" />
<input type="hidden" class="rpa-collapse" name="attr_rpa_collapse" value="0" />

<div class="grid">
    <div class="grid grid-header">
        <img class="icon" name="attr_character_token" />

        <div class="grid">
            <h1>Palladium MegaverseÂ© Character Sheet</h1>
            <div class="tabs">
                <button type="action" name="act_basic" >Stats</button>
                <button type="action" name="act_skills" >Skills</button>
                <button type="action" name="act_combat" >Combat</button>
                <button type="action" name="act_magic" >Abilities</button>
                <button type="action" name="act_equipment" >Equipment</button>
                <button type="action" name="act_minions" >Minions</button>
            </div>
        </div>
    </div>

    <div class="grid basic">
        <h2 class="grid grid2">
            <span>Character Statistics</span>
            <label class="lockbox">
                <input type="checkbox" value="1" name="attr_basic_collapse" />
                <span class="lock"></span>
            </label>
        </h2>
        <div class="grid grid-basic">
            <div class="grid grid2 rowspan2">
                <label>Character Name</label>
                <input class="unlocked" type="text" value="" name="attr_character_name"/>
                <span class="locked" name="attr_character_name"></span>

                <label>True Name</label>
                <input class="unlocked" type="text" value="" name="attr_truename_name"/>
                <span class="locked" name="attr_truename_name"></span>

                <label>Race</label>
                <input class="unlocked" type="text" value="" name="attr_character_race"/>
                <span class="locked" name="attr_character_race"></span>

                <label>O.C.C.</label>
                <input class="unlocked" type="text" value="" name="attr_occ"/>
                <span class="locked" name="attr_occ"></span>

                <label>Level</label>
                <input class="unlocked" type="number" value="1" name="attr_level"/>
                <span class="locked" name="attr_level"></span>

                <label>Experience</label>
                <div class="grid grid2">
                    <input type="number" value="0" name="attr_experience"/>
                    <input class="unlocked" type="number" value="0" name="attr_experience_max"/>
                    <span class="locked" name="attr_experience_max"></span>
                </div>

                <label>Alignment</label>
                <select class="unlocked" name="attr_alignment_select">
                    <option value=""></option>
                    <option value="Principled">Principled</option>
                    <option value="Scrupulous">Scrupulous</option>
                    <option value="Unprincipled">Unprincipled</option>
                    <option value="Anarchist">Anarchist</option>
                    <option value="Taoist">Taoist</option>
                    <option value="Miscreant">Miscreant</option>
                    <option value="Abberant">Abberant</option>
                    <option value="Diabolic">Diabolic</option>
                </select>
                <span class="locked" name="attr_alignment_select"></span>

                <label>Age</label>
                <input class="unlocked" type="text" value="" name="attr_character_age"/>
                <span class="locked" name="attr_character_age"></span>

                <label>Gender</label>
                <input class="unlocked" type="text" value="" name="attr_character_gender"/>
                <span class="locked" name="attr_character_gender"></span>

                <label>Height</label>
                <input class="unlocked" type="text" value="" name="attr_character_height"/>
                <span class="locked" name="attr_character_height"></span>

                <label>Weight</label>
                <input class="unlocked" type="text" value="" name="attr_character_weight"/>
                <span class="locked" name="attr_character_weight"></span>

                <label>Family Origin</label>
                <input class="unlocked" type="text" value="" name="attr_character_familyorigin"/>
                <span class="locked" name="attr_character_familyorigin"></span>

                <label>Environment</label>
                <input class="unlocked" type="text" value="" name="attr_character_enviorment"/>
                <span class="locked" name="attr_character_enviorment"></span>

                <label>Native Language</label>
                <input class="unlocked" type="text" value="" name="attr_character_languages"/>
                <span class="locked" name="attr_character_languages"></span>

                <label>Insanity (if any)</label>
                <input class="unlocked" type="text" value="" name="attr_character_insanity"/>
                <span class="locked" name="attr_character_insanity"></span>

                <label>Disposition</label>
                <input class="unlocked" type="text" value="" name="attr_character_disposition"/>
                <span class="locked" name="attr_character_disposition"></span>
            </div>

            <div class="grid">
                <input type="hidden" value="0" name="attr_iq_skill_bonus" />
                <input type="hidden" value="0" name="attr_iq_illusion_bonus" />
                <input type="hidden" value="0" name="attr_iq_perception_bonus" />
                <input type="hidden" value="0" name="attr_me_psionic_bonus" />
                <input type="hidden" value="0" name="attr_me_insanity_bonus" />
                <input type="hidden" value="0" name="attr_me_possession_bonus" />
                <input type="hidden" value="0" name="attr_ma_trust" />
                <input type="hidden" value="0" name="attr_ma_skill_bonus" />
                <input type="hidden" value="0" name="attr_ps_hth_damage" />
                <input type="hidden" value="1d4" name="attr_ps_hth_punch" />
                <input type="hidden" value="S.D.C." name="attr_ps_hth_punch_type" />
                <input type="hidden" value="1d8" name="attr_ps_hth_kick" />
                <input type="hidden" value="S.D.C." name="attr_ps_hth_kick_type" />
                <input type="hidden" value="2d4" name="attr_ps_hth_power_punch" />
                <input type="hidden" value="S.D.C." name="attr_ps_hth_power_punch_type" />
                <input type="hidden" value="2d8" name="attr_ps_hth_power_kick" />
                <input type="hidden" value="S.D.C." name="attr_ps_hth_power_kick_type" />
                <input type="hidden" value="3d8" name="attr_ps_hth_leap_kick" />
                <input type="hidden" value="S.D.C." name="attr_ps_hth_leap_kick_type" />
                <input type="hidden" value="" name="attr_ps_hth_restrained_punch" />
                <input type="hidden" value="none" name="attr_ps_hth_restrained_punch_type" />
                <input type="hidden" value="0" name="attr_pp_dodge_bonus" />
                <input type="hidden" value="0" name="attr_pp_strike_bonus" />
                <input type="hidden" value="0" name="attr_pe_recovery_bonus" />
                <input type="hidden" value="0" name="attr_pe_magic_bonus" />
                <input type="hidden" value="0" name="attr_pb_charm" />
                <input type="hidden" value="0" name="attr_pb_skill_bonus" />

                <div class="grid grid-stats">
                    <label>I.Q.</label>
                    <input class="unlocked" type="number" value="" name="attr_iq" />
                    <span class="locked" name="attr_iq"></span>
                    <p class="slot4">
                        +<span name="attr_iq_skill_bonus"></span>% skill bonus /
                        +<span name="attr_iq_perception_bonus"></span> perception
                    </p>

                    <label>M.E.</label>
                    <input class="unlocked" type="number" value="" name="attr_me" />
                    <span class="locked" name="attr_me"></span>
                    <p class="slot4">
                        +<span name="attr_me_psionic_bonus"></span> psionic saves /
                        +<span name="attr_me_insanity_bonus"></span> insanity saves
                    </p>

                    <label>M.A.</label>
                    <input class="unlocked" type="number" value="" name="attr_ma" />
                    <span class="locked" name="attr_ma"></span>
                    <button class="d100" type="roll" name="roll_ma_trust" value="&{template:d100} @{roll_template_token} {{reroll=[Reroll](~ma_trust)}} {{name=@{character_name}}} {{rollname=Trust / Intimidate}} {{target=@{ma_trust}}} {{realtarget=[[{@{ma_trust}, 98}KL1]]}} {{roll=[[1d100]]}}" />
                    <p>
                        <span name="attr_ma_trust"></span>% trust/intimidate
                    </p>

                    <label>P.S.</label>
                    <input class="unlocked" type="number" value="" name="attr_ps" />
                    <span class="locked" name="attr_ps"></span>
                    <p class="slot4">
                        +<span name="attr_ps_hth_damage"></span> hand to hand damage
                    </p>

                    <label>P.P.</label>
                    <input class="unlocked" type="number" value="" name="attr_pp" />
                    <span class="locked" name="attr_pp"></span>
                    <p class="slot4">
                        +<span name="attr_pp_dodge_bonus"></span> parry & dodge /
                        +<span name="attr_pp_strike_bonus"></span> strike
                    </p>

                    <label>P.E.</label>
                    <input class="unlocked" type="number" value="" name="attr_pe" />
                    <span class="locked" name="attr_pe"></span>
                    <p class="slot4">
                        +<span name="attr_pe_recovery_bonus"></span>% coma/death /
                        +<span name="attr_pe_magic_bonus"></span> magic & poison
                    </p>

                    <label>P.B.</label>
                    <input class="unlocked" type="number" value="" name="attr_pb" />
                    <span class="locked" name="attr_pb"></span>
                    <button class="d100" type="roll" name="roll_pb_charm" value="&{template:d100} @{roll_template_token} {{reroll=[Reroll](~pb_charm)}} {{name=@{character_name}}} {{rollname=Charm / Impress}} {{target=@{pb_charm}}} {{realtarget=[[{@{pb_charm}, 98}KL1]]}} {{roll=[[1d100]]}}" />
                    <p>
                        <span name="attr_pb_charm"></span>% charm/impress
                    </p>

                    <label>Spd</label>
                    <input class="unlocked" type="number" value="" name="attr_spd" />
                    <span class="locked" name="attr_spd"></span>
                </div>
            </div>

            <div class="grid grid2">
                <label class="sdc">Hit Points</label>
                <div class="grid grid2 sdc">
                    <input type="number" value="" name="attr_character_hp" />
                    <input class="unlocked" type="number" value="" name="attr_character_hp_max" />
                    <span class="locked" name="attr_character_hp_max"></span>
                </div>

                <select class="unlocked lbl" name="attr_charactertype_select">
                    <option value="S.D.C.">S.D.C.</option>
                    <option value="M.D.C.">M.D.C.</option>
                </select>
                <label class="locked"><span name="attr_charactertype_select"></span></label>
                <div class="grid grid2">
                    <input type="number" value="" name="attr_character_dc" />
                    <input class="unlocked" type="number" value="" name="attr_character_dc_max" />
                    <span class="locked" name="attr_character_dc_max"></span>
                </div>

                <label>P.P.E.</label>
                <div class="grid grid2">
                    <input type="number" value="" name="attr_character_ppe" />
                    <input class="unlocked" type="number" value="" name="attr_character_ppe_max" />
                    <span class="locked" name="attr_character_ppe_max"></span>
                </div>

                <label>I.S.P.</label>
                <div class="grid grid2">
                    <input type="number" value="" name="attr_character_isp" />
                    <input class="unlocked" type="number" value="" name="attr_character_isp_max" />
                    <span class="locked" name="attr_character_isp_max"></span>
                </div>

                <label>A.R.</label>
                <input class="unlocked" type="number" value="" name="attr_character_ar" />
                <span class="locked" name="attr_character_ar"></span>

                <label>H.F.</label>
                <input class="unlocked" type="number" value="" name="attr_character_hf" />
                <span class="locked" name="attr_character_hf"></span>

                <label>Initiative</label>
                <div class="grid grid2">
                    <span>+<span name="attr_initiative"></span></span>
                    <button type="roll" name="roll_initiative" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~initiative)}} {{name=@{character_name}}} {{rollname=Initiative}} {{bonus=@{initiative}}} {{roll=[[[[1d20]]+@{initiative} &{tracker}]]}} {{raw=$[[0]]}}" />
                </div>

                <label>Perception</label>
                <div class="grid grid2">
                    <input class="unlocked" type="number" value"0" name="attr_perception" />
                    <span class="locked">+<span name="attr_perception"></span></span>
                    <button type="roll" name="roll_perception" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~perception)}} {{name=@{character_name}}} {{rollname=Perception}} {{perception=true}} {{bonus=@{perception}+@{iq_perception_bonus}}} {{roll=[[[[1d20]]+@{perception}+@{iq_perception_bonus}]]}} {{raw=$[[0]]}}" />
                </div>
            </div>

            <div class="grid grid2 span2">
                <input type="hidden" name="attr_lift" />
                <input type="hidden" name="attr_carry" />
                <input type="hidden" name="attr_throw_weight" />
                <input type="hidden" name="attr_throw_distance" />
                <input type="hidden" name="attr_hold_max" />
                <h3 class="span2">
                    <select class="unlocked lbl" name="attr_ps_type">
                        <option value="Normal">Normal</option>
                        <option value="Augmented">Augmented</option>
                        <option value="Robot">Robot</option>
                        <option value="Supernatural">Supernatural</option>
                    </select>
                    <span class="locked" name="attr_ps_type"></span>
                    <span>Strength</span>
                </h3>

                <div class="grid grid2">
                    <label>Lift</label>
                    <div>
                        <span name="attr_lift"></span> lbs.
                    </div>

                    <label>Carry</label>
                    <div>
                        <span name="attr_carry"></span> lbs.
                    </div>

                    <label>Throw</label>
                    <div>
                        <span name="attr_throw_weight"></span> lbs. <span name="attr_throw_distance"></span> ft.
                    </div>
                </div>
                <div class="grid grid2">
                    <label>Hold Max</label>
                    <div class="normal augmented robot">
                        <span name="attr_hold_max"></span> seconds
                    </div>
                    <div class="supernatural">
                        <span name="attr_pe"></span> minutes
                    </div>

                    <label>Leap Across</label>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="" name="attr_leapout" />
                        <span class="locked" name="attr_leapout"></span>
                        <span>ft.</span>
                    </div>

                    <label>Leap High</label>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="" name="attr_leapup" />
                        <span class="locked" name="attr_leapup"></span>
                        <span>ft.</span>
                    </div>
                </div>
            </div>
        </div>

        <h3>Movement</h3>

        <input type="hidden" name="attr_run_mph" />
        <input type="hidden" name="attr_run_yd_minute" />
        <input type="hidden" name="attr_run_yd_melee" />
        <input type="hidden" name="attr_run_ft_attack" />
        <input type="hidden" name="attr_run_cruising" />
        <input type="hidden" name="attr_run_at_max" />

        <div class="grid scroller">
            <div class="grid grid-movement">
                <label class="slot2">Speed</label>
                <label>MPH</label>
                <label>Yd/Minute</label>
                <label>Yd/Melee</label>
                <label>Ft/Attack</label>
                <label>Half Pace</label>
                <label>Max Speed</label>
            </div>

            <div class="grid grid-movement">
                <h4>Run</h4>
                <span name="attr_spd"></span>
                <span name="attr_run_mph"></span>
                <span name="attr_run_yd_minute"></span>
                <span name="attr_run_yd_melee"></span>
                <span name="attr_run_ft_attack"></span>
                <span>
                    <span name="attr_run_cruising"></span> miles
                </span>
                <span>
                    <span name="attr_run_at_max"></span> miles
                </span>
            </div>

            <fieldset class="repeating_movement">
                <input type="hidden" name="attr_movement_yd_minute" />
                <input type="hidden" name="attr_movement_yd_melee" />
                <input type="hidden" name="attr_movement_ft_attack" />
                <div class="grid grid-movement">
                    <input class="unlocked" type="text" value="" name="attr_movement_name" placeholder="Additional Movement Type" />
                    <h4 class="locked"><span name="attr_movement_name"></span></h4>
                    <input class="unlocked" type="number" value="" name="attr_movement_speed" />
                    <span class="locked" name="attr_movement_speed"></span>
                    <input class="unlocked" type="number" value="" name="attr_movement_mph" />
                    <span class="locked" name="attr_movement_mph"></span>
                    <span name="attr_movement_yd_minute"></span>
                    <span name="attr_movement_yd_melee"></span>
                    <span name="attr_movement_ft_attack"></span>
                    <span class="grid grid2">
                        <input class="unlocked" type="number" value="" name="attr_movement_cruising" />
                        <span class="locked" name="attr_movement_cruising"></span>
                        <span>miles</span>
                    </span>
                    <span class="grid grid2">
                        <input class="unlocked" type="number" value="" name="attr_movement_at_max" />
                        <span class="locked" name="attr_movement_at_max"></span>
                        <span>miles</span>
                    </span>
                </div>
            </fieldset>
        </div>
    </div>

    <div class="grid skills">
        <h2 class="grid grid2">
            <span>Skills</span>
            <label class="lockbox">
                <input type="checkbox" value="1" name="attr_skills_collapse" />
                <span class="lock"></span>
            </label>
        </h2>

        <div class="grid grid3">
            <div class="grid grid2">
                <label>IQ Bonus</label>
                <span>+<span name="attr_iq_skill_bonus"></span>%</span>
            </div>
            <div class="grid grid2">
                <label>Universal Skill Roll</label>
                <button class="d100" type="roll" name="roll_skill_global" value="&{template:d100} @{roll_template_token} {{reroll=[Reroll](~skill_global)}} {{name=@{character_name}}} {{rollname=?{Skill name}}} {{target=?{skill rating}}} {{realtarget=[[{?{skill rating}, 98}KL1]]}} {{roll=[[1d100]]}}" />
            </div>
        </div>

        <div class="grid scroller">
            <div class="grid grid-skills">
                <label>Name</label>
                <label>Type</label>
                <label>Base</label>
                <label>Per Level</label>
                <label>Bonus</label>
                <label>Acquired</label>
                <label>+Level</label>
                <label>Total</label>
            </div>

            <fieldset class="repeating_skills">
                <input type="hidden" name="attr_skill_level" />
                <input type="hidden" value="0" name="attr_skill_total" />
                <div class="grid grid-skills">
                    <input class="unlocked" type="text" value="" name="attr_skill_name" placeholder="Skill name" />
                    <h4 class="locked"><span name="attr_skill_name"></span></h4>
                    <select class="unlocked" name="attr_skill_type">
                        <option value=""></option>
                        <option value="OCC">OCC</option>
                        <option value="OCC Related">OCC Related</option>
                        <option value="Secondary">Secondary</option>
                        <option value="RCC">RCC</option>
                    </select>
                    <span class="locked" name="attr_skill_type"></span>
                    <input class="unlocked" type="number" value="" name="attr_skill_base" />
                    <span class="locked" name="attr_skill_base"></span>
                    <input class="unlocked" type="number" value="" name="attr_skill_per" />
                    <span class="locked" name="attr_skill_per"></span>
                    <input class="unlocked" type="number" value="" name="attr_skill_bonus" />
                    <span class="locked" name="attr_skill_bonus"></span>
                    <input class="unlocked" type="number" value="1" name="attr_skill_acquired" />
                    <span class="locked" name="attr_skill_acquired"></span>
                    <span name="attr_skill_level"></span>
                    <strong><span name="attr_skill_total"></span>%</strong>
                    <button class="d100" type="roll" name="roll_skill_total" value="&{template:d100} @{roll_template_token} {{reroll=[Reroll](~repeating_skills_skill_total)}} {{name=@{character_name}}} {{rollname=@{skill_name}}} {{target=@{skill_total}}} {{realtarget=[[{@{skill_total}, 98}KL1]]}} {{roll=[[1d100]]}}" />
                </div>
            </fieldset>
        </div>
    </div>

    <div class="grid combat">
        <h2>Combat</h2>

        <div class="tabs">
            <button type="action" name="act_hth" >Hand to Hand</button>
            <button type="action" name="act_robot" >Robot</button>
            <button type="action" name="act_wp" >Weapon Proficiencies</button>
            <button type="action" name="act_saves" >Saves</button>
        </div>

        <div class="grid hth">
            <h3 class="grid grid2">
                <span>
                    <span>Hand to Hand:</span>
                    <select class="unlocked lbl" name="attr_combatskill">
                        <option value=""></option>
                        <option value="Non-Combatant">Non-Combatant</option>
                        <option value="Basic">Basic</option>
                        <option value="Expert">Expert</option>
                        <option value="Martial Arts">Martial Arts</option>
                        <option value="Assassin">Assassin</option>
                        <option value="Commando">Commando</option>
                        <option value="Dragon">Dragon</option>
                    </select>
                    <span class="locked" name="attr_combatskill"></span>
                </span>
                <label class="lockbox">
                    <input type="checkbox" value="1" name="attr_hth_collapse" />
                    <span class="lock"></span>
                </label>
            </h3>

            <input type="hidden" value="0" name="attr_hth_strike_total" />
            <input type="hidden" value="0" name="attr_hth_damage_total" />
            <input type="hidden" value="0" name="attr_hth_dodge_total" />
            <input type="hidden" value="0" name="attr_hth_gunfire_dodge_total" />
            <input type="hidden" value="0" name="attr_hth_autododge_total" />
            <input type="hidden" value="0" name="attr_hth_parry_total" />

            <div class="grid grid-hthstyle">
                <div class="grid grid2">
                    <label>Attacks / Actions</label>
                    <input class="unlocked" type="number" value="1" name="attr_hth_numberattacks" />
                    <span class="locked" name="attr_hth_numberattacks"></span>

                    <label>Non-Combat Actions</label>
                    <input class="unlocked" type="number" value="0" name="attr_hth_noncombatactions" />
                    <span class="locked" name="attr_hth_noncombatactions"></span>

                    <label>Initiative</label>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_initiative" />
                        <span class="locked">+<span name="attr_initiative"></span></span>
                        <button type="roll" name="roll_initiative" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~initiative)}} {{name=@{character_name}}} {{rollname=Initiative}} {{bonus=@{initiative}}} {{roll=[[[[1d20]]+@{initiative} &{tracker}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label>Damage</label>
                    <div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_hth_damage" />
                        <span>+<span name="attr_hth_damage_total"></span></span>
                        <button type="roll" name="roll_hth_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_damage)}} {{name=@{character_name}}} {{damagename=Damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{hth_damage_total}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{hth_damage_total}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div>

                    <label>Strike</label>
                    <div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_hth_strike" />
                        <span>+<span name="attr_hth_strike_total"></span></span>
                        <button type="roll" name="roll_hth_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_strike)}} {{name=@{character_name}}} {{rollname=Strike}} {{bonus=@{hth_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{hth_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div>

                    <label>Parry</label>
                    <div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_hth_parry" />
                        <span>+<span name="attr_hth_parry_total"></span></span>
                        <button type="roll" name="roll_hth_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_parry)}} {{name=@{character_name}}} {{rollname=Parry}} {{bonus=@{hth_parry_total}}} {{roll=[[[[1d20]]+@{hth_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label>Dodge</label>
                    <div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_hth_dodge" />
                        <span>+<span name="attr_hth_dodge_total"></span></span>
                        <button type="roll" name="roll_hth_dodge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_dodge)}} {{name=@{character_name}}} {{rollname=Dodge}} {{bonus=@{hth_dodge_total}}} {{roll=[[[[1d20]]+@{hth_dodge_total}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label>Gunfire Dodge</label>
                    <div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_hth_gunfire_dodge" />
                        <span>+<span name="attr_hth_gunfire_dodge_total"></span></span>
                        <button type="roll" name="roll_hth_gunfire_dodge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_gunfire_dodge)}} {{name=@{character_name}}} {{rollname=Gunfire Dodge}} {{bonus=@{hth_gunfire_dodge_total}}} {{roll=[[[[1d20]]+@{hth_gunfire_dodge_total}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <div class="grid grid2 toggle">
                        <label class="switch unlocked">
                            <input type="checkbox" value="1" name="attr_autododge_acquired" />
                            <span class="slider"></span>
                        </label>
                        <label>Auto Dodge</label>
                    </div>
                    <div class="grid grid3">
                        <input class="unlocked autododge" type="number" value="0" name="attr_hth_autododge" />
                        <span class="autododge">+<span name="attr_hth_autododge_total"></span></span>
                        <button class="autododge" type="roll" name="roll_hth_autododge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_autododge)}} {{name=@{character_name}}} {{rollname=Autododge}} {{bonus=@{hth_autododge_total}}} {{roll=[[[[1d20]]+@{hth_autododge_total}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label>Roll w/ Impact</label>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_hth_roll" />
                        <span class="locked">+<span name="attr_hth_roll"></span></span>
                        <button type="roll" name="roll_hth_roll" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_roll)}} {{name=@{character_name}}} {{rollname=Roll w/ Impact}} {{bonus=@{hth_roll}}} {{roll=[[[[1d20]]+@{hth_roll}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label>Pull Punch</label>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_hth_pullpunch" />
                        <span class="locked">+<span name="attr_hth_pullpunch"></span></span>
                        <button type="roll" name="roll_hth_pullpunch" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_pullpunch)}} {{name=@{character_name}}} {{rollname=Pull Punch}} {{bonus=@{hth_pullpunch}}} {{roll=[[[[1d20]]+@{hth_pullpunch}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label>Disarm</label>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_hth_disarm" />
                        <span class="locked">+<span name="attr_hth_disarm"></span></span>
                        <button type="roll" name="roll_hth_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_disarm)}} {{name=@{character_name}}} {{rollname=Disarm}} {{bonus=@{hth_disarm}}} {{roll=[[[[1d20]]+@{hth_disarm}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label>Entangle</label>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_hth_entangle" />
                        <span class="locked">+<span name="attr_hth_entangle"></span></span>
                        <button type="roll" name="roll_hth_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~hth_entangle)}} {{name=@{character_name}}} {{rollname=Entangle}} {{bonus=@{hth_entangle}}} {{roll=[[[[1d20]]+@{hth_entangle}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label>Knockout/Stun</label>
                    <input class="unlocked" type="number" value="" name="attr_hth_knockout" />
                    <span class="locked" name="attr_hth_knockout"></span>

                    <label>Critical Strike</label>
                    <input class="unlocked" type="number" value="20" name="attr_hth_critical" />
                    <span class="locked" name="attr_hth_critical"></span>

                    <label>Death Blow</label>
                    <input class="unlocked" type="number" value="" name="attr_hth_death" />
                    <span class="locked" name="attr_hth_death"></span>
                </div>

                <div class="grid">
                    <h4>Basic Strikes</h4>

                    <input class="ps-restrained" type="hidden" name="attr_ps_hth_restrained_punch_type" value="none" />

                    <div class="grid grid2">
                        <div class="grid grid2 toggle restrained">
                            <label class="switch unlocked">
                                <input type="checkbox" disabled checked value="1" />
                                <span class="slider"></span>
                            </label>
                            <label>Restrained Punch</label>
                        </div>
                        <div class="grid grid2 restrained">
                            <input class="hth-dc" type="hidden" name="attr_ps_hth_restrained_punch_type" value="none" />
                            <span><span name="attr_ps_hth_restrained_punch"></span> <span name="attr_ps_hth_restrained_punch_type"></span></span>
                            <button class="dc-sdc" type="roll" name="roll_hth_restrained_punch_sdc" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_restrained_punch_sdc)}} {{name=@{character_name}}} {{damagename=Restrained Punch}} {{damagetype=@{ps_hth_restrained_punch_type}}} {{damageroll=@{ps_hth_restrained_punch}+@{hth_damage_total}}} {{critdamage=[[[[@{ps_hth_restrained_punch}+@{hth_damage_total}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                            <button class="dc-md" type="roll" name="roll_hth_restrained_punch_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_restrained_punch_md)}} {{name=@{character_name}}} {{damagename=Restrained Punch}} {{damagetype=@{ps_hth_restrained_punch_type}}} {{damageroll=@{ps_hth_restrained_punch}}} {{critdamage=[[[[@{ps_hth_restrained_punch}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                        </div>

                        <div class="grid grid2 toggle">
                            <label class="switch unlocked">
                                <input type="checkbox" disabled checked value="1" />
                                <span class="slider"></span>
                            </label>
                            <label><span class="restrained">Full Strength </span>Punch</label>
                        </div>
                        <div class="grid grid2">
                            <input class="hth-dc" type="hidden" name="attr_ps_hth_punch_type" value="S.D.C." />
                            <span><span name="attr_ps_hth_punch"></span> <span name="attr_ps_hth_punch_type"></span></span>
                            <button class="dc-sdc" type="roll" name="roll_hth_punch_sdc" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_punch_sdc)}} {{name=@{character_name}}} {{damagename=Punch}} {{damagetype=@{ps_hth_punch_type}}} {{damageroll=@{ps_hth_punch}+@{hth_damage_total}}} {{critdamage=[[[[@{ps_hth_punch}+@{hth_damage_total}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                            <button class="dc-md" type="roll" name="roll_hth_punch_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_punch_md)}} {{name=@{character_name}}} {{damagename=Punch}} {{damagetype=@{ps_hth_punch_type}}} {{damageroll=@{ps_hth_punch}}} {{critdamage=[[[[@{ps_hth_punch}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                        </div>

                        <input class="strike-acquired" type="hidden" name="attr_power_punch_acquired" value="0" />
                        <div class="grid grid2 toggle">
                            <label class="switch unlocked">
                                <input type="checkbox" value="1" name="attr_power_punch_acquired" />
                                <span class="slider"></span>
                            </label>
                            <label>Power Punch</label>
                        </div>
                        <div class="grid grid2">
                            <input class="hth-dc" type="hidden" name="attr_ps_hth_power_punch_type" value="S.D.C." />
                            <span><span name="attr_ps_hth_power_punch"></span> <span name="attr_ps_hth_power_punch_type"></span></span>
                            <button class="dc-sdc" type="roll" name="roll_hth_power_punch_sdc" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_power_punch_sdc)}} {{name=@{character_name}}} {{damagename=Power Punch}} {{damagetype=@{ps_hth_power_punch_type}}} {{damageroll=@{ps_hth_power_punch}+@{hth_damage_total}}} {{critdamage=[[[[@{ps_hth_power_punch}+@{hth_damage_total}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                            <button class="dc-md" type="roll" name="roll_hth_power_punch_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_power_punch_md)}} {{name=@{character_name}}} {{damagename=Power Punch}} {{damagetype=@{ps_hth_power_punch_type}}} {{damageroll=@{ps_hth_power_punch}}} {{critdamage=[[[[@{ps_hth_power_punch}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                        </div>

                        <input class="strike-acquired" type="hidden" name="attr_kick_acquired" value="0" />
                        <div class="grid grid2 toggle">
                            <label class="switch unlocked">
                                <input type="checkbox" value="1" name="attr_kick_acquired" />
                                <span class="slider"></span>
                            </label>
                            <label>Kick</label>
                        </div>
                        <div class="grid grid2">
                            <input class="hth-dc" type="hidden" name="attr_ps_hth_kick_type" value="S.D.C." />
                            <span><span name="attr_ps_hth_kick"></span> <span name="attr_ps_hth_kick_type"></span></span>
                            <button class="dc-sdc" type="roll" name="roll_hth_kick_sdc" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_kick_sdc)}} {{name=@{character_name}}} {{damagename=Kick}} {{damagetype=@{ps_hth_kick_type}}} {{damageroll=@{ps_hth_kick}+@{hth_damage_total}}} {{critdamage=[[[[@{ps_hth_kick}+@{hth_damage_total}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                            <button class="dc-md" type="roll" name="roll_hth_kick_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_kick_md)}} {{name=@{character_name}}} {{damagename=Kick}} {{damagetype=@{ps_hth_kick_type}}} {{damageroll=@{ps_hth_kick}}} {{critdamage=[[[[@{ps_hth_kick}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                        </div>

                        <input class="strike-acquired" type="hidden" name="attr_power_kick_acquired" value="0" />
                        <div class="grid grid2 toggle">
                            <label class="switch unlocked">
                                <input type="checkbox" value="1" name="attr_power_kick_acquired" />
                                <span class="slider"></span>
                            </label>
                            <label>Power Kick</label>
                        </div>
                        <div class="grid grid2">
                            <input class="hth-dc" type="hidden" name="attr_ps_hth_power_kick_type" value="S.D.C." />
                            <span><span name="attr_ps_hth_power_kick"></span> <span name="attr_ps_hth_power_kick_type"></span></span>
                            <button class="dc-sdc" type="roll" name="roll_hth_power_kick_sdc" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_power_kick_sdc)}} {{name=@{character_name}}} {{damagename=Power Kick}} {{damagetype=@{ps_hth_power_kick_type}}} {{damageroll=@{ps_hth_power_kick}+@{hth_damage_total}}} {{critdamage=[[[[@{ps_hth_power_kick}+@{hth_damage_total}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                            <button class="dc-md" type="roll" name="roll_hth_power_kick_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_power_kick_md)}} {{name=@{character_name}}} {{damagename=Power Kick}} {{damagetype=@{ps_hth_power_kick_type}}} {{damageroll=@{ps_hth_power_kick}}} {{critdamage=[[[[@{ps_hth_power_kick}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                        </div>

                        <input class="strike-acquired" type="hidden" name="attr_leap_kick_acquired" value="0" />
                        <div class="grid grid2 toggle">
                            <label class="switch unlocked">
                                <input type="checkbox" value="1" name="attr_leap_kick_acquired" />
                                <span class="slider"></span>
                            </label>
                            <label>Leap Kick</label>
                        </div>
                        <div class="grid grid2">
                            <input class="hth-dc" type="hidden" name="attr_ps_hth_leap_kick_type" value="S.D.C." />
                            <span><span name="attr_ps_hth_leap_kick"></span> <span name="attr_ps_hth_leap_kick_type"></span></span>
                            <button class="dc-sdc" type="roll" name="roll_hth_leap_kick_sdc" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_leap_kick_sdc)}} {{name=@{character_name}}} {{damagename=Leap Kick}} {{damagetype=@{ps_hth_leap_kick_type}}} {{damageroll=@{ps_hth_leap_kick}+@{hth_damage_total}}} {{critdamage=[[[[@{ps_hth_leap_kick}+@{hth_damage_total}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                            <button class="dc-md" type="roll" name="roll_hth_leap_kick_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~hth_leap_kick_md)}} {{name=@{character_name}}} {{damagename=Leap Kick}} {{damagetype=@{ps_hth_leap_kick_type}}} {{damageroll=@{ps_hth_leap_kick}}} {{critdamage=[[[[@{ps_hth_leap_kick}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                        </div>
                    </div>

                    <h4>Strikes</h4>

                    <fieldset class="repeating_maneuvers">
                        <div class="grid grid2">
                            <input class="unlocked" type="text" value="" name="attr_maneuver_name" />
                            <label class="locked"><span name="attr_maneuver_name"></span></label>
                            <div class="grid grid3">
                                <input class="hth-dc" type="hidden" name="attr_maneuver_damage_type" value="S.D.C." />
                                <input class="unlocked" type="text" value="" name="attr_maneuver_damage" />
                                <span class="locked" name="attr_maneuver_damage"></span>
                                <select class="unlocked" name="attr_maneuver_damage_type">
                                    <option value="S.D.C.">S.D.C.</option>
                                    <option value="M.D.">M.D.</option>
                                </select>
                                <span class="locked" name="attr_maneuver_damage_type"></span>
                                <button class="dc-sdc" type="roll" name="roll_maneuver_sdc" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_maneuvers_maneuver_sdc)}} {{name=@{character_name}}} {{damagename=@{maneuver_name}}} {{damagetype=@{maneuver_damage_type}}} {{damageroll=@{maneuver_damage}+@{hth_damage_total}}} {{critdamage=[[[[@{maneuver_damage}+@{hth_damage_total}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                <button class="dc-md" type="roll" name="roll_maneuver_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_maneuvers_maneuver_md)}} {{name=@{character_name}}} {{damagename=@{maneuver_name}}} {{damagetype=@{maneuver_damage_type}}} {{damageroll=@{maneuver_damage}}} {{critdamage=[[[[@{maneuver_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                            </div>
                        </div>
                    </fieldset>
                </div>

                <textarea class="unlocked span2" wrap="soft" name="attr_hth_style_details" placeholder="Additional Bonuses" ></textarea>
                <span class="locked span2" name="attr_hth_style_details"></span>
            </div>
        </div>

        <div class="grid robot">
            <h3 class="grid grid2">
                <span>
                    <span>Robot Combat:</span>
                    <div class="tabs">
                        <button type="action" name="act_robot_basic" >Basic</button>
                        <button type="action" name="act_robot_elite1" >Elite</button>
                    </div>
                </span>
                <label class="lockbox">
                    <input type="checkbox" value="1" name="attr_robot_collapse" />
                    <span class="lock"></span>
                </label>
            </h3>

            <div class="grid robot-basic">
                <input type="hidden" value="0" name="attr_robot_basic_numberattacks_total" />
                <input type="hidden" value="0" name="attr_robot_basic_initiative_total" />
                <input type="hidden" value="0" name="attr_robot_basic_strike_total" />
                <input type="hidden" value="0" name="attr_robot_basic_dodge_total" />
                <input type="hidden" value="0" name="attr_robot_basic_gunfire_dodge_total" />
                <input type="hidden" value="0" name="attr_robot_basic_autododge_total" />
                <input type="hidden" class="robot-autododge" value="0" name="attr_robot_basic_autododge_acquired" />
                <input type="hidden" value="0" name="attr_robot_basic_parry_total" />
                <input type="hidden" value="0" name="attr_robot_basic_roll_total" />
                <input type="hidden" value="0" name="attr_robot_basic_pullpunch_total" />
                <input type="hidden" value="0" name="attr_robot_basic_disarm_total" />
                <input type="hidden" value="0" name="attr_robot_basic_entangle_total" />


                <div class="grid grid-robotstyle">
                    <div class="grid grid2">
                        <div class="span2 robotskill-name">
                            <h4>Basic</h4>
                        </div>

                        <label>Attacks / Actions</label>
                        <div class="grid grid2 unlocked">
                            <input type="number" value="0" name="attr_robot_basic_numberattacks" />
                            <span name="attr_robot_basic_numberattacks_total"></span>
                        </div>
                        <span class="locked" name="attr_robot_basic_numberattacks_total"></span>

                        <label>Non-Combat Actions</label>
                        <span name="attr_hth_noncombatactions"></span>

                        <label>Initiative</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_initiative" />
                            <span>+<span name="attr_robot_basic_initiative_total"></span></span>
                            <button type="roll" name="roll_robot_basic_initiative" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_initiative)}} {{name=@{character_name}}} {{rollname=Robot Basic Initiative}} {{bonus=@{robot_basic_initiative_total}}} {{roll=[[[[1d20]]+@{robot_basic_initiative_total} &{tracker}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Strike</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_strike" />
                            <span>+<span name="attr_robot_basic_strike_total"></span></span>
                            <button type="roll" name="roll_robot_basic_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_strike)}} {{name=@{character_name}}} {{rollname=Robot Basic Strike}} {{bonus=@{robot_basic_strike_total}}} {{critical=[[@{robot_basic_critical}]]}} {{roll=[[[[1d20]]+@{robot_basic_strike_total}]]}} {{raw=$[[1]]}}" />
                        </div>

                        <label>Parry</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_parry" />
                            <span>+<span name="attr_robot_basic_parry_total"></span></span>
                            <button type="roll" name="roll_robot_basic_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_parry)}} {{name=@{character_name}}} {{rollname=Robot Basic Parry}} {{bonus=@{robot_basic_parry_total}}} {{roll=[[[[1d20]]+@{robot_basic_parry_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Dodge</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_dodge" />
                            <span>+<span name="attr_robot_basic_dodge_total"></span></span>
                            <button type="roll" name="roll_robot_basic_dodge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_dodge)}} {{name=@{character_name}}} {{rollname=Robot Basic Dodge}} {{bonus=@{robot_basic_dodge_total}}} {{roll=[[[[1d20]]+@{robot_basic_dodge_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Gunfire Dodge</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_gunfire_dodge" />
                            <span>+<span name="attr_robot_basic_gunfire_dodge_total"></span></span>
                            <button type="roll" name="roll_robot_basic_gunfire_dodge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_gunfire_dodge)}} {{name=@{character_name}}} {{rollname=Robot Basic Gunfire Dodge}} {{bonus=@{robot_basic_gunfire_dodge_total}}} {{roll=[[[[1d20]]+@{robot_basic_gunfire_dodge_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <div class="grid grid2 toggle">
                            <label class="switch unlocked">
                                <input type="checkbox" value="1" name="attr_robot_basic_autododge_acquired" />
                                <span class="slider"></span>
                            </label>
                            <label>Auto Dodge</label>
                        </div>
                        <div class="grid grid3">
                            <input class="unlocked autododge" type="number" value="0" name="attr_robot_basic_autododge" />
                            <span class="autododge">+<span name="attr_robot_basic_autododge_total"></span></span>
                            <button class="autododge" type="roll" name="roll_robot_basic_autododge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_autododge)}} {{name=@{character_name}}} {{rollname=Robot Basic Autododge}} {{bonus=@{robot_basic_autododge_total}}} {{roll=[[[[1d20]]+@{robot_basic_autododge_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Roll w/ Impact</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_roll" />
                            <span>+<span name="attr_robot_basic_roll_total"></span></span>
                            <button type="roll" name="roll_robot_basic_roll" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_roll)}} {{name=@{character_name}}} {{rollname=Robot Basic Roll w/ Impact}} {{bonus=@{robot_basic_roll_total}}} {{roll=[[[[1d20]]+@{robot_basic_roll_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Pull Punch</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_pullpunch" />
                            <span>+<span name="attr_robot_basic_pullpunch_total"></span></span>
                            <button type="roll" name="roll_robot_basic_pullpunch" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_pullpunch)}} {{name=@{character_name}}} {{rollname=Robot Basic Pull Punch}} {{bonus=@{robot_basic_pullpunch_total}}} {{roll=[[[[1d20]]+@{robot_basic_pullpunch_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Disarm</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_disarm" />
                            <span>+<span name="attr_robot_basic_disarm_total"></span></span>
                            <button type="roll" name="roll_robot_basic_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_disarm)}} {{name=@{character_name}}} {{rollname=Robot Basic Disarm}} {{bonus=@{robot_basic_disarm_total}}} {{roll=[[[[1d20]]+@{robot_basic_disarm_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Entangle</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_basic_entangle" />
                            <span>+<span name="attr_robot_basic_entangle_total"></span></span>
                            <button type="roll" name="roll_robot_basic_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_basic_entangle)}} {{name=@{character_name}}} {{rollname=Robot Basic Entangle}} {{bonus=@{robot_basic_entangle_total}}} {{roll=[[[[1d20]]+@{robot_basic_entangle_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Knockout/Stun</label>
                        <input class="unlocked" type="number" value="" name="attr_robot_basic_knockout" />
                        <span class="locked" name="attr_robot_basic_knockout"></span>

                        <label>Critical Strike</label>
                        <input class="unlocked" type="number" value="20" name="attr_robot_basic_critical" />
                        <span class="locked" name="attr_robot_basic_critical"></span>

                        <label>Death Blow</label>
                        <input class="unlocked" type="number" value="" name="attr_robot_basic_death" />
                        <span class="locked" name="attr_robot_basic_death"></span>
                    </div>

                    <div class="grid">

                        <h4>Strikes</h4>

                        <fieldset class="repeating_robotbasic">
                            <div class="grid grid2">
                                <input class="unlocked" type="text" value="" name="attr_robot_basic_maneuver_name" />
                                <label class="locked"><span name="attr_robot_basic_maneuver_name"></span></label>
                                <div class="grid grid3">
                                    <input class="unlocked" type="text" value="" name="attr_robot_basic_maneuver_damage" />
                                    <span class="locked" name="attr_robot_basic_maneuver_damage"></span>
                                    <span>M.D.</span>
                                    <button type="roll" name="roll_robot_basic_maneuver_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_robotmaneuvers_robot_maneuver_md)}} {{name=@{character_name}}} {{damagename=@{robot_basic_maneuver_name}}} {{damagetype=M.D.}} {{damageroll=@{robot_basic_maneuver_damage}}} {{critdamage=[[[[@{robot_basic_maneuver_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                </div>
                            </div>
                        </fieldset>
                    </div>

                    <textarea class="unlocked span2" wrap="soft" name="attr_robot_basic_style_details" placeholder="Additional Bonuses" ></textarea>
                    <span class="locked span2" name="attr_robot_basic_style_details"></span>
                </div>
            </div>

            <div class="grid robot-elite1">
                <input type="hidden" value="0" name="attr_robot_elite1_numberattacks_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_initiative_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_strike_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_dodge_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_gunfire_dodge_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_autododge_total" />
                <input type="hidden" class="robot-autododge" value="0" name="attr_robot_elite1_autododge_acquired" />
                <input type="hidden" value="0" name="attr_robot_elite1_parry_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_roll_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_pullpunch_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_disarm_total" />
                <input type="hidden" value="0" name="attr_robot_elite1_entangle_total" />

                <div class="grid grid-robotstyle">
                    <div class="grid grid2">
                        <div class="span2 robotskill-name">
                            <input class="unlocked" type="text" value="" name="attr_robot_elite1skill_name" placeholder="Specific Robot Combat Skill" />
                            <h4 class="locked"><span name="attr_robot_elite1skill_name"></span></h4>
                        </div>

                        <label>Attacks / Actions</label>
                        <div class="grid grid2 unlocked">
                            <input type="number" value="0" name="attr_robot_elite1_numberattacks" />
                            <span name="attr_robot_elite1_numberattacks_total"></span>
                        </div>
                        <span class="locked" name="attr_robot_elite1_numberattacks_total"></span>

                        <label>Non-Combat Actions</label>
                        <span name="attr_hth_noncombatactions"></span>

                        <label>Initiative</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_initiative" />
                            <span>+<span name="attr_robot_elite1_initiative_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_initiative" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_initiative)}} {{name=@{character_name}}} {{rollname=Robot Basic Initiative}} {{bonus=@{robot_elite1_initiative_total}}} {{roll=[[[[1d20]]+@{robot_elite1_initiative_total} &{tracker}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Strike</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_strike" />
                            <span>+<span name="attr_robot_elite1_strike_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_strike)}} {{name=@{character_name}}} {{rollname=Robot Basic Strike}} {{bonus=@{robot_elite1_strike_total}}} {{critical=[[@{robot_elite1_critical}]]}} {{roll=[[[[1d20]]+@{robot_elite1_strike_total}]]}} {{raw=$[[1]]}}" />
                        </div>

                        <label>Parry</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_parry" />
                            <span>+<span name="attr_robot_elite1_parry_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_parry)}} {{name=@{character_name}}} {{rollname=Robot Basic Parry}} {{bonus=@{robot_elite1_parry_total}}} {{roll=[[[[1d20]]+@{robot_elite1_parry_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Dodge</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_dodge" />
                            <span>+<span name="attr_robot_elite1_dodge_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_dodge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_dodge)}} {{name=@{character_name}}} {{rollname=Robot Basic Dodge}} {{bonus=@{robot_elite1_dodge_total}}} {{roll=[[[[1d20]]+@{robot_elite1_dodge_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Gunfire Dodge</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_gunfire_dodge" />
                            <span>+<span name="attr_robot_elite1_gunfire_dodge_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_gunfire_dodge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_gunfire_dodge)}} {{name=@{character_name}}} {{rollname=Robot Basic Gunfire Dodge}} {{bonus=@{robot_elite1_gunfire_dodge_total}}} {{roll=[[[[1d20]]+@{robot_elite1_gunfire_dodge_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <div class="grid grid2 toggle">
                            <label class="switch unlocked">
                                <input type="checkbox" value="1" name="attr_robot_elite1_autododge_acquired" />
                                <span class="slider"></span>
                            </label>
                            <label>Auto Dodge</label>
                        </div>
                        <div class="grid grid3">
                            <input class="unlocked autododge" type="number" value="0" name="attr_robot_elite1_autododge" />
                            <span class="autododge">+<span name="attr_robot_elite1_autododge_total"></span></span>
                            <button class="autododge" type="roll" name="roll_robot_elite1_autododge" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_autododge)}} {{name=@{character_name}}} {{rollname=Robot Basic Autododge}} {{bonus=@{robot_elite1_autododge_total}}} {{roll=[[[[1d20]]+@{robot_elite1_autododge_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Roll w/ Impact</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_roll" />
                            <span>+<span name="attr_robot_elite1_roll_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_roll" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_roll)}} {{name=@{character_name}}} {{rollname=Robot Basic Roll w/ Impact}} {{bonus=@{robot_elite1_roll_total}}} {{roll=[[[[1d20]]+@{robot_elite1_roll_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Pull Punch</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_pullpunch" />
                            <span>+<span name="attr_robot_elite1_pullpunch_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_pullpunch" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_pullpunch)}} {{name=@{character_name}}} {{rollname=Robot Basic Pull Punch}} {{bonus=@{robot_elite1_pullpunch_total}}} {{roll=[[[[1d20]]+@{robot_elite1_pullpunch_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Disarm</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_disarm" />
                            <span>+<span name="attr_robot_elite1_disarm_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_disarm)}} {{name=@{character_name}}} {{rollname=Robot Basic Disarm}} {{bonus=@{robot_elite1_disarm_total}}} {{roll=[[[[1d20]]+@{robot_elite1_disarm_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Entangle</label>
                        <div class="grid grid3">
                            <input class="unlocked" type="number" value="0" name="attr_robot_elite1_entangle" />
                            <span>+<span name="attr_robot_elite1_entangle_total"></span></span>
                            <button type="roll" name="roll_robot_elite1_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~robot_elite1_entangle)}} {{name=@{character_name}}} {{rollname=Robot Basic Entangle}} {{bonus=@{robot_elite1_entangle_total}}} {{roll=[[[[1d20]]+@{robot_elite1_entangle_total}]]}} {{raw=$[[0]]}}" />
                        </div>

                        <label>Knockout/Stun</label>
                        <input class="unlocked" type="number" value="" name="attr_robot_elite1_knockout" />
                        <span class="locked" name="attr_robot_elite1_knockout"></span>

                        <label>Critical Strike</label>
                        <input class="unlocked" type="number" value="20" name="attr_robot_elite1_critical" />
                        <span class="locked" name="attr_robot_elite1_critical"></span>

                        <label>Death Blow</label>
                        <input class="unlocked" type="number" value="" name="attr_robot_elite1_death" />
                        <span class="locked" name="attr_robot_elite1_death"></span>
                    </div>

                    <div class="grid">

                        <h4>Strikes</h4>

                        <fieldset class="repeating_robotelite1">
                            <div class="grid grid2">
                                <input class="unlocked" type="text" value="" name="attr_robot_elite1_maneuver_name" />
                                <label class="locked"><span name="attr_robot_elite1_maneuver_name"></span></label>
                                <div class="grid grid3">
                                    <input class="unlocked" type="text" value="" name="attr_robot_elite1_maneuver_damage" />
                                    <span class="locked" name="attr_robot_elite1_maneuver_damage"></span>
                                    <span>M.D.</span>
                                    <button type="roll" name="roll_robot_elite1_maneuver_md" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_robotmaneuvers_robot_maneuver_md)}} {{name=@{character_name}}} {{damagename=@{robot_elite1_maneuver_name}}} {{damagetype=M.D.}} {{damageroll=@{robot_elite1_maneuver_damage}}} {{critdamage=[[[[@{robot_elite1_maneuver_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                </div>
                            </div>
                        </fieldset>
                    </div>

                    <textarea class="unlocked span2" wrap="soft" name="attr_robot_elite1_style_details" placeholder="Additional Bonuses" ></textarea>
                    <span class="locked span2" name="attr_robot_elite1_style_details"></span>
                </div>
            </div>
        </div>

        <div class="grid wp">
            <h3 class="grid grid2">
                <span>Ancient Weapon Proficiencies</span>
                <label class="lockbox">
                    <input type="checkbox" value="1" name="attr_wp_ancient_collapse" />
                    <span class="lock"></span>
                </label>
            </h3>

            <div class="grid scroller">
                <div class="grid grid-wp">
                    <label class="slot2">Strike</label>
                    <label>Thrown</label>
                    <label>Parry</label>
                    <label>Disarm</label>
                    <label>Entangle</label>
                    <label>Damage</label>
                    <label>RoF</label>
                    <label>Acquired</label>
                    <label>Level</label>
                </div>

                <div class="grid grid-wp">
                    <input type="hidden" value="0" name="attr_archery_strike_total" /><input type="hidden" value="0" name="attr_archery_parry_total" /><input type="hidden" value="0" name="attr_archery_disarm_total" /><input type="hidden" value="0" name="attr_archery_damage_total" /><input type="hidden" value="0" name="attr_archery_level" />
                    <input type="hidden" class="active" value="0" name="attr_archery_acquired" />
                    <h4>W.P. Archery</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_archery_strike" />
                        <span class="slot2" name="attr_archery_strike_total"></span>
                        <button type="roll" name="roll_archery_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~archery_strike)}} {{name=@{character_name}}} {{rollname=Archery strike}} {{bonus=@{archery_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{archery_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid disabled">-</div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_archery_parry" />
                        <span class="slot2" name="attr_archery_parry_total"></span>
                        <button type="roll" name="roll_archery_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~archery_parry)}} {{name=@{character_name}}} {{rollname=Archery parry}} {{bonus=@{archery_parry_total}}} {{roll=[[[[1d20]]+@{archery_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_archery_disarm" />
                        <span class="slot2" name="attr_archery_disarm_total"></span>
                        <button type="roll" name="roll_archery_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~archery_disarm)}} {{name=@{character_name}}} {{rollname=Archery disarm}} {{bonus=@{archery_disarm_total}}} {{roll=[[[[1d20]]+@{archery_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid disabled">-</div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_archery_damage" />
                        <span class="locked" name="attr_archery_damage"></span>
                        <button type="roll" name="roll_archery_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~archery_damage)}} {{name=@{character_name}}} {{damagename=Archery damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{archery_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{archery_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span><input class="unlocked" type="number" value="0" name="attr_archery_rof" /><span class="locked" name="attr_archery_rof"></span></span><span><input class="unlocked" type="number" value="0" name="attr_archery_acquired" /><span class="locked" name="attr_archery_acquired"></span></span>
                    <span name="attr_archery_level"></span>

                    <input type="hidden" value="0" name="attr_axe_strike_total" /><input type="hidden" value="0" name="attr_axe_thrown_total" /><input type="hidden" value="0" name="attr_axe_parry_total" /><input type="hidden" value="0" name="attr_axe_disarm_total" /><input type="hidden" value="0" name="attr_axe_entangle_total" /><input type="hidden" value="0" name="attr_axe_damage_total" /><input type="hidden" value="0" name="attr_axe_level" />
                    <input type="hidden" class="active" value="0" name="attr_axe_acquired" />
                    <h4>W.P. Axe</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_axe_strike" />
                        <span class="slot2" name="attr_axe_strike_total"></span>
                        <button type="roll" name="roll_axe_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~axe_strike)}} {{name=@{character_name}}} {{rollname=Axe strike}} {{bonus=@{axe_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{axe_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_axe_thrown" />
                        <span class="slot2" name="attr_axe_thrown_total"></span>
                        <button type="roll" name="roll_axe_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~axe_thrown)}} {{name=@{character_name}}} {{rollname=Axe thrown}} {{bonus=@{axe_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{axe_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_axe_parry" />
                        <span class="slot2" name="attr_axe_parry_total"></span>
                        <button type="roll" name="roll_axe_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~axe_parry)}} {{name=@{character_name}}} {{rollname=Axe parry}} {{bonus=@{axe_parry_total}}} {{roll=[[[[1d20]]+@{axe_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_axe_disarm" />
                        <span class="slot2" name="attr_axe_disarm_total"></span>
                        <button type="roll" name="roll_axe_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~axe_disarm)}} {{name=@{character_name}}} {{rollname=Axe disarm}} {{bonus=@{axe_disarm_total}}} {{roll=[[[[1d20]]+@{axe_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_axe_entangle" />
                        <span class="slot2" name="attr_axe_entangle_total"></span>
                        <button type="roll" name="roll_axe_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~axe_entangle)}} {{name=@{character_name}}} {{rollname=Axe entangle}} {{bonus=@{axe_entangle_total}}} {{roll=[[[[1d20]]+@{axe_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_axe_damage" />
                        <span class="locked" name="attr_axe_damage"></span>
                        <button type="roll" name="roll_axe_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~axe_damage)}} {{name=@{character_name}}} {{damagename=Axe damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{axe_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{axe_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_axe_acquired" /><span class="locked" name="attr_axe_acquired"></span></span>
                    <span name="attr_axe_level"></span>

                    <input type="hidden" value="0" name="attr_blunt_strike_total" /><input type="hidden" value="0" name="attr_blunt_thrown_total" /><input type="hidden" value="0" name="attr_blunt_parry_total" /><input type="hidden" value="0" name="attr_blunt_disarm_total" /><input type="hidden" value="0" name="attr_blunt_entangle_total" /><input type="hidden" value="0" name="attr_blunt_damage_total" /><input type="hidden" value="0" name="attr_blunt_level" />
                    <input type="hidden" class="active" value="0" name="attr_blunt_acquired" />
                    <h4>W.P. Blunt</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_blunt_strike" />
                        <span class="slot2" name="attr_blunt_strike_total"></span>
                        <button type="roll" name="roll_blunt_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~blunt_strike)}} {{name=@{character_name}}} {{rollname=Blunt strike}} {{bonus=@{blunt_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{blunt_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_blunt_thrown" />
                        <span class="slot2" name="attr_blunt_thrown_total"></span>
                        <button type="roll" name="roll_blunt_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~blunt_thrown)}} {{name=@{character_name}}} {{rollname=Blunt thrown}} {{bonus=@{blunt_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{blunt_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_blunt_parry" />
                        <span class="slot2" name="attr_blunt_parry_total"></span>
                        <button type="roll" name="roll_blunt_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~blunt_parry)}} {{name=@{character_name}}} {{rollname=Blunt parry}} {{bonus=@{blunt_parry_total}}} {{roll=[[[[1d20]]+@{blunt_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_blunt_disarm" />
                        <span class="slot2" name="attr_blunt_disarm_total"></span>
                        <button type="roll" name="roll_blunt_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~blunt_disarm)}} {{name=@{character_name}}} {{rollname=Blunt disarm}} {{bonus=@{blunt_disarm_total}}} {{roll=[[[[1d20]]+@{blunt_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_blunt_entangle" />
                        <span class="slot2" name="attr_blunt_entangle_total"></span>
                        <button type="roll" name="roll_blunt_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~blunt_entangle)}} {{name=@{character_name}}} {{rollname=Blunt entangle}} {{bonus=@{blunt_entangle_total}}} {{roll=[[[[1d20]]+@{blunt_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_blunt_damage" />
                        <span class="locked" name="attr_blunt_damage"></span>
                        <button type="roll" name="roll_blunt_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~blunt_damage)}} {{name=@{character_name}}} {{damagename=Blunt damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{blunt_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{blunt_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_blunt_acquired" /><span class="locked" name="attr_blunt_acquired"></span></span>
                    <span name="attr_blunt_level"></span>

                    <input type="hidden" value="0" name="attr_chain_strike_total" /><input type="hidden" value="0" name="attr_chain_thrown_total" /><input type="hidden" value="0" name="attr_chain_parry_total" /><input type="hidden" value="0" name="attr_chain_disarm_total" /><input type="hidden" value="0" name="attr_chain_damage_total" /><input type="hidden" value="0" name="attr_chain_level" />
                    <input type="hidden" class="active" value="0" name="attr_chain_acquired" />
                    <h4>W.P. Chain</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_chain_strike" />
                        <span class="slot2" name="attr_chain_strike_total"></span>
                        <button type="roll" name="roll_chain_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~chain_strike)}} {{name=@{character_name}}} {{rollname=Chain strike}} {{bonus=@{chain_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{chain_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_chain_thrown" />
                        <span class="slot2" name="attr_chain_thrown_total"></span>
                        <button type="roll" name="roll_chain_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~chain_thrown)}} {{name=@{character_name}}} {{rollname=Chain thrown}} {{bonus=@{chain_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{chain_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_chain_parry" />
                        <span class="slot2" name="attr_chain_parry_total"></span>
                        <button type="roll" name="roll_chain_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~chain_parry)}} {{name=@{character_name}}} {{rollname=Chain parry}} {{bonus=@{chain_parry_total}}} {{roll=[[[[1d20]]+@{chain_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_chain_disarm" />
                        <span class="slot2" name="attr_chain_disarm_total"></span>
                        <button type="roll" name="roll_chain_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~chain_disarm)}} {{name=@{character_name}}} {{rollname=Chain disarm}} {{bonus=@{chain_disarm_total}}} {{roll=[[[[1d20]]+@{chain_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid disabled">-</div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_chain_damage" />
                        <span class="locked" name="attr_chain_damage"></span>
                        <button type="roll" name="roll_chain_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~chain_damage)}} {{name=@{character_name}}} {{damagename=Chain damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{chain_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{chain_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_chain_acquired" /><span class="locked" name="attr_chain_acquired"></span></span>
                    <span name="attr_chain_level"></span>

                    <input type="hidden" value="0" name="attr_forked_strike_total" /><input type="hidden" value="0" name="attr_forked_thrown_total" /><input type="hidden" value="0" name="attr_forked_parry_total" /><input type="hidden" value="0" name="attr_forked_disarm_total" /><input type="hidden" value="0" name="attr_forked_entangle_total" /><input type="hidden" value="0" name="attr_forked_damage_total" /><input type="hidden" value="0" name="attr_forked_level" />
                    <input type="hidden" class="active" value="0" name="attr_forked_acquired" />
                    <h4>W.P. Forked</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_forked_strike" />
                        <span class="slot2" name="attr_forked_strike_total"></span>
                        <button type="roll" name="roll_forked_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~forked_strike)}} {{name=@{character_name}}} {{rollname=Forked strike}} {{bonus=@{forked_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{forked_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_forked_thrown" />
                        <span class="slot2" name="attr_forked_thrown_total"></span>
                        <button type="roll" name="roll_forked_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~forked_thrown)}} {{name=@{character_name}}} {{rollname=Forked thrown}} {{bonus=@{forked_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{forked_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_forked_parry" />
                        <span class="slot2" name="attr_forked_parry_total"></span>
                        <button type="roll" name="roll_forked_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~forked_parry)}} {{name=@{character_name}}} {{rollname=Forked parry}} {{bonus=@{forked_parry_total}}} {{roll=[[[[1d20]]+@{forked_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_forked_disarm" />
                        <span class="slot2" name="attr_forked_disarm_total"></span>
                        <button type="roll" name="roll_forked_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~forked_disarm)}} {{name=@{character_name}}} {{rollname=Forked disarm}} {{bonus=@{forked_disarm_total}}} {{roll=[[[[1d20]]+@{forked_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_forked_entangle" />
                        <span class="slot2" name="attr_forked_entangle_total"></span>
                        <button type="roll" name="roll_forked_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~forked_entangle)}} {{name=@{character_name}}} {{rollname=Forked entangle}} {{bonus=@{forked_entangle_total}}} {{roll=[[[[1d20]]+@{forked_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_forked_damage" />
                        <span class="locked" name="attr_forked_damage"></span>
                        <button type="roll" name="roll_forked_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~forked_damage)}} {{name=@{character_name}}} {{damagename=Forked damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{forked_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{forked_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_forked_acquired" /><span class="locked" name="attr_forked_acquired"></span></span>
                    <span name="attr_forked_level"></span>

                    <input type="hidden" value="0" name="attr_grappling_hook_strike_total" /><input type="hidden" value="0" name="attr_grappling_hook_thrown_total" /><input type="hidden" value="0" name="attr_grappling_hook_disarm_total" /><input type="hidden" value="0" name="attr_grappling_hook_entangle_total" /><input type="hidden" value="0" name="attr_grappling_hook_damage_total" /><input type="hidden" value="0" name="attr_grappling_hook_level" />
                    <input type="hidden" class="active" value="0" name="attr_grappling_hook_acquired" />
                    <h4>W.P. Grappling Hook</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_grappling_hook_strike" />
                        <span class="slot2" name="attr_grappling_hook_strike_total"></span>
                        <button type="roll" name="roll_grappling_hook_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~grappling_hook_strike)}} {{name=@{character_name}}} {{rollname=Grappling Hook strike}} {{bonus=@{grappling_hook_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{grappling_hook_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_grappling_hook_thrown" />
                        <span class="slot2" name="attr_grappling_hook_thrown_total"></span>
                        <button type="roll" name="roll_grappling_hook_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~grappling_hook_thrown)}} {{name=@{character_name}}} {{rollname=Grappling Hook thrown}} {{bonus=@{grappling_hook_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{grappling_hook_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid disabled">-</div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_grappling_hook_disarm" />
                        <span class="slot2" name="attr_grappling_hook_disarm_total"></span>
                        <button type="roll" name="roll_grappling_hook_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~grappling_hook_disarm)}} {{name=@{character_name}}} {{rollname=Grappling Hook disarm}} {{bonus=@{grappling_hook_disarm_total}}} {{roll=[[[[1d20]]+@{grappling_hook_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_grappling_hook_entangle" />
                        <span class="slot2" name="attr_grappling_hook_entangle_total"></span>
                        <button type="roll" name="roll_grappling_hook_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~grappling_hook_entangle)}} {{name=@{character_name}}} {{rollname=Grappling Hook entangle}} {{bonus=@{grappling_hook_entangle_total}}} {{roll=[[[[1d20]]+@{grappling_hook_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_grappling_hook_damage" />
                        <span class="locked" name="attr_grappling_hook_damage"></span>
                        <button type="roll" name="roll_grappling_hook_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~grappling_hook_damage)}} {{name=@{character_name}}} {{damagename=Grappling Hook damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{grappling_hook_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{grappling_hook_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_grappling_hook_acquired" /><span class="locked" name="attr_grappling_hook_acquired"></span></span>
                    <span name="attr_grappling_hook_level"></span>

                    <input type="hidden" value="0" name="attr_knife_strike_total" /><input type="hidden" value="0" name="attr_knife_thrown_total" /><input type="hidden" value="0" name="attr_knife_parry_total" /><input type="hidden" value="0" name="attr_knife_disarm_total" /><input type="hidden" value="0" name="attr_knife_entangle_total" /><input type="hidden" value="0" name="attr_knife_damage_total" /><input type="hidden" value="0" name="attr_knife_level" />
                    <input type="hidden" class="active" value="0" name="attr_knife_acquired" />
                    <h4>W.P. Knife</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_knife_strike" />
                        <span class="slot2" name="attr_knife_strike_total"></span>
                        <button type="roll" name="roll_knife_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~knife_strike)}} {{name=@{character_name}}} {{rollname=Knife strike}} {{bonus=@{knife_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{knife_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_knife_thrown" />
                        <span class="slot2" name="attr_knife_thrown_total"></span>
                        <button type="roll" name="roll_knife_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~knife_thrown)}} {{name=@{character_name}}} {{rollname=Knife thrown}} {{bonus=@{knife_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{knife_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_knife_parry" />
                        <span class="slot2" name="attr_knife_parry_total"></span>
                        <button type="roll" name="roll_knife_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~knife_parry)}} {{name=@{character_name}}} {{rollname=Knife parry}} {{bonus=@{knife_parry_total}}} {{roll=[[[[1d20]]+@{knife_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_knife_disarm" />
                        <span class="slot2" name="attr_knife_disarm_total"></span>
                        <button type="roll" name="roll_knife_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~knife_disarm)}} {{name=@{character_name}}} {{rollname=Knife disarm}} {{bonus=@{knife_disarm_total}}} {{roll=[[[[1d20]]+@{knife_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_knife_entangle" />
                        <span class="slot2" name="attr_knife_entangle_total"></span>
                        <button type="roll" name="roll_knife_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~knife_entangle)}} {{name=@{character_name}}} {{rollname=Knife entangle}} {{bonus=@{knife_entangle_total}}} {{roll=[[[[1d20]]+@{knife_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_knife_damage" />
                        <span class="locked" name="attr_knife_damage"></span>
                        <button type="roll" name="roll_knife_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~knife_damage)}} {{name=@{character_name}}} {{damagename=Knife damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{knife_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{knife_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span><input class="unlocked" type="number" value="0" name="attr_knife_rof" /><span class="locked" name="attr_knife_rof"></span></span><span><input class="unlocked" type="number" value="0" name="attr_knife_acquired" /><span class="locked" name="attr_knife_acquired"></span></span>
                    <span name="attr_knife_level"></span>

                    <input type="hidden" value="0" name="attr_paired_weapons_level" />
                    <input type="hidden" class="active" value="0" name="attr_paired_weapons_acquired" />
                    <h4>W.P. Paired Weapons</h4><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_paired_weapons_acquired" /><span class="locked" name="attr_paired_weapons_acquired"></span></span>
                    <span name="attr_paired_weapons_level"></span>

                    <input type="hidden" value="0" name="attr_pole_arm_strike_total" /><input type="hidden" value="0" name="attr_pole_arm_thrown_total" /><input type="hidden" value="0" name="attr_pole_arm_parry_total" /><input type="hidden" value="0" name="attr_pole_arm_disarm_total" /><input type="hidden" value="0" name="attr_pole_arm_entangle_total" /><input type="hidden" value="0" name="attr_pole_arm_damage_total" /><input type="hidden" value="0" name="attr_pole_arm_level" />
                    <input type="hidden" class="active" value="0" name="attr_pole_arm_acquired" />
                    <h4>W.P. Pole Arm</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_pole_arm_strike" />
                        <span class="slot2" name="attr_pole_arm_strike_total"></span>
                        <button type="roll" name="roll_pole_arm_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~pole_arm_strike)}} {{name=@{character_name}}} {{rollname=Pole Arm strike}} {{bonus=@{pole_arm_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{pole_arm_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_pole_arm_thrown" />
                        <span class="slot2" name="attr_pole_arm_thrown_total"></span>
                        <button type="roll" name="roll_pole_arm_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~pole_arm_thrown)}} {{name=@{character_name}}} {{rollname=Pole Arm thrown}} {{bonus=@{pole_arm_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{pole_arm_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_pole_arm_parry" />
                        <span class="slot2" name="attr_pole_arm_parry_total"></span>
                        <button type="roll" name="roll_pole_arm_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~pole_arm_parry)}} {{name=@{character_name}}} {{rollname=Pole Arm parry}} {{bonus=@{pole_arm_parry_total}}} {{roll=[[[[1d20]]+@{pole_arm_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_pole_arm_disarm" />
                        <span class="slot2" name="attr_pole_arm_disarm_total"></span>
                        <button type="roll" name="roll_pole_arm_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~pole_arm_disarm)}} {{name=@{character_name}}} {{rollname=Pole Arm disarm}} {{bonus=@{pole_arm_disarm_total}}} {{roll=[[[[1d20]]+@{pole_arm_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_pole_arm_entangle" />
                        <span class="slot2" name="attr_pole_arm_entangle_total"></span>
                        <button type="roll" name="roll_pole_arm_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~pole_arm_entangle)}} {{name=@{character_name}}} {{rollname=Pole Arm entangle}} {{bonus=@{pole_arm_entangle_total}}} {{roll=[[[[1d20]]+@{pole_arm_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_pole_arm_damage" />
                        <span class="locked" name="attr_pole_arm_damage"></span>
                        <button type="roll" name="roll_pole_arm_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~pole_arm_damage)}} {{name=@{character_name}}} {{damagename=Pole Arm damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{pole_arm_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{pole_arm_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_pole_arm_acquired" /><span class="locked" name="attr_pole_arm_acquired"></span></span>
                    <span name="attr_pole_arm_level"></span>

                    <input type="hidden" value="0" name="attr_quick_draw_level" />
                    <input type="hidden" class="active" value="0" name="attr_quick_draw_acquired" />
                    <h4>W.P. Quick Draw</h4><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_quick_draw_acquired" /><span class="locked" name="attr_quick_draw_acquired"></span></span>
                    <span name="attr_quick_draw_level"></span>

                    <input type="hidden" value="0" name="attr_rope_strike_total" /><input type="hidden" value="0" name="attr_rope_thrown_total" /><input type="hidden" value="0" name="attr_rope_disarm_total" /><input type="hidden" value="0" name="attr_rope_entangle_total" /><input type="hidden" value="0" name="attr_rope_damage_total" /><input type="hidden" value="0" name="attr_rope_level" />
                    <input type="hidden" class="active" value="0" name="attr_rope_acquired" />
                    <h4>W.P. Rope</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_rope_strike" />
                        <span class="slot2" name="attr_rope_strike_total"></span>
                        <button type="roll" name="roll_rope_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~rope_strike)}} {{name=@{character_name}}} {{rollname=Rope strike}} {{bonus=@{rope_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rope_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_rope_thrown" />
                        <span class="slot2" name="attr_rope_thrown_total"></span>
                        <button type="roll" name="roll_rope_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~rope_thrown)}} {{name=@{character_name}}} {{rollname=Rope thrown}} {{bonus=@{rope_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{rope_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid disabled">-</div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_rope_disarm" />
                        <span class="slot2" name="attr_rope_disarm_total"></span>
                        <button type="roll" name="roll_rope_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~rope_disarm)}} {{name=@{character_name}}} {{rollname=Rope disarm}} {{bonus=@{rope_disarm_total}}} {{roll=[[[[1d20]]+@{rope_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_rope_entangle" />
                        <span class="slot2" name="attr_rope_entangle_total"></span>
                        <button type="roll" name="roll_rope_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~rope_entangle)}} {{name=@{character_name}}} {{rollname=Rope entangle}} {{bonus=@{rope_entangle_total}}} {{roll=[[[[1d20]]+@{rope_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_rope_damage" />
                        <span class="locked" name="attr_rope_damage"></span>
                        <button type="roll" name="roll_rope_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~rope_damage)}} {{name=@{character_name}}} {{damagename=Rope damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{rope_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{rope_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_rope_acquired" /><span class="locked" name="attr_rope_acquired"></span></span>
                    <span name="attr_rope_level"></span>

                    <input type="hidden" value="0" name="attr_shield_strike_total" /><input type="hidden" value="0" name="attr_shield_thrown_total" /><input type="hidden" value="0" name="attr_shield_parry_total" /><input type="hidden" value="0" name="attr_shield_disarm_total" /><input type="hidden" value="0" name="attr_shield_entangle_total" /><input type="hidden" value="0" name="attr_shield_damage_total" /><input type="hidden" value="0" name="attr_shield_level" />
                    <input type="hidden" class="active" value="0" name="attr_shield_acquired" />
                    <h4>W.P. Shield</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_shield_strike" />
                        <span class="slot2" name="attr_shield_strike_total"></span>
                        <button type="roll" name="roll_shield_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~shield_strike)}} {{name=@{character_name}}} {{rollname=Shield strike}} {{bonus=@{shield_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{shield_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_shield_thrown" />
                        <span class="slot2" name="attr_shield_thrown_total"></span>
                        <button type="roll" name="roll_shield_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~shield_thrown)}} {{name=@{character_name}}} {{rollname=Shield thrown}} {{bonus=@{shield_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{shield_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_shield_parry" />
                        <span class="slot2" name="attr_shield_parry_total"></span>
                        <button type="roll" name="roll_shield_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~shield_parry)}} {{name=@{character_name}}} {{rollname=Shield parry}} {{bonus=@{shield_parry_total}}} {{roll=[[[[1d20]]+@{shield_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_shield_disarm" />
                        <span class="slot2" name="attr_shield_disarm_total"></span>
                        <button type="roll" name="roll_shield_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~shield_disarm)}} {{name=@{character_name}}} {{rollname=Shield disarm}} {{bonus=@{shield_disarm_total}}} {{roll=[[[[1d20]]+@{shield_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_shield_entangle" />
                        <span class="slot2" name="attr_shield_entangle_total"></span>
                        <button type="roll" name="roll_shield_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~shield_entangle)}} {{name=@{character_name}}} {{rollname=Shield entangle}} {{bonus=@{shield_entangle_total}}} {{roll=[[[[1d20]]+@{shield_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_shield_damage" />
                        <span class="locked" name="attr_shield_damage"></span>
                        <button type="roll" name="roll_shield_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~shield_damage)}} {{name=@{character_name}}} {{damagename=Shield damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{shield_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{shield_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_shield_acquired" /><span class="locked" name="attr_shield_acquired"></span></span>
                    <span name="attr_shield_level"></span>

                    <input type="hidden" value="0" name="attr_spear_strike_total" /><input type="hidden" value="0" name="attr_spear_thrown_total" /><input type="hidden" value="0" name="attr_spear_parry_total" /><input type="hidden" value="0" name="attr_spear_disarm_total" /><input type="hidden" value="0" name="attr_spear_entangle_total" /><input type="hidden" value="0" name="attr_spear_damage_total" /><input type="hidden" value="0" name="attr_spear_level" />
                    <input type="hidden" class="active" value="0" name="attr_spear_acquired" />
                    <h4>W.P. Spear</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_spear_strike" />
                        <span class="slot2" name="attr_spear_strike_total"></span>
                        <button type="roll" name="roll_spear_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~spear_strike)}} {{name=@{character_name}}} {{rollname=Spear strike}} {{bonus=@{spear_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{spear_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_spear_thrown" />
                        <span class="slot2" name="attr_spear_thrown_total"></span>
                        <button type="roll" name="roll_spear_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~spear_thrown)}} {{name=@{character_name}}} {{rollname=Spear thrown}} {{bonus=@{spear_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{spear_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_spear_parry" />
                        <span class="slot2" name="attr_spear_parry_total"></span>
                        <button type="roll" name="roll_spear_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~spear_parry)}} {{name=@{character_name}}} {{rollname=Spear parry}} {{bonus=@{spear_parry_total}}} {{roll=[[[[1d20]]+@{spear_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_spear_disarm" />
                        <span class="slot2" name="attr_spear_disarm_total"></span>
                        <button type="roll" name="roll_spear_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~spear_disarm)}} {{name=@{character_name}}} {{rollname=Spear disarm}} {{bonus=@{spear_disarm_total}}} {{roll=[[[[1d20]]+@{spear_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_spear_entangle" />
                        <span class="slot2" name="attr_spear_entangle_total"></span>
                        <button type="roll" name="roll_spear_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~spear_entangle)}} {{name=@{character_name}}} {{rollname=Spear entangle}} {{bonus=@{spear_entangle_total}}} {{roll=[[[[1d20]]+@{spear_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_spear_damage" />
                        <span class="locked" name="attr_spear_damage"></span>
                        <button type="roll" name="roll_spear_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~spear_damage)}} {{name=@{character_name}}} {{damagename=Spear damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{spear_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{spear_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_spear_acquired" /><span class="locked" name="attr_spear_acquired"></span></span>
                    <span name="attr_spear_level"></span>

                    <input type="hidden" value="0" name="attr_staff_strike_total" /><input type="hidden" value="0" name="attr_staff_thrown_total" /><input type="hidden" value="0" name="attr_staff_parry_total" /><input type="hidden" value="0" name="attr_staff_disarm_total" /><input type="hidden" value="0" name="attr_staff_entangle_total" /><input type="hidden" value="0" name="attr_staff_damage_total" /><input type="hidden" value="0" name="attr_staff_level" />
                    <input type="hidden" class="active" value="0" name="attr_staff_acquired" />
                    <h4>W.P. Staff</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_staff_strike" />
                        <span class="slot2" name="attr_staff_strike_total"></span>
                        <button type="roll" name="roll_staff_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~staff_strike)}} {{name=@{character_name}}} {{rollname=Staff strike}} {{bonus=@{staff_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{staff_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_staff_thrown" />
                        <span class="slot2" name="attr_staff_thrown_total"></span>
                        <button type="roll" name="roll_staff_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~staff_thrown)}} {{name=@{character_name}}} {{rollname=Staff thrown}} {{bonus=@{staff_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{staff_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_staff_parry" />
                        <span class="slot2" name="attr_staff_parry_total"></span>
                        <button type="roll" name="roll_staff_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~staff_parry)}} {{name=@{character_name}}} {{rollname=Staff parry}} {{bonus=@{staff_parry_total}}} {{roll=[[[[1d20]]+@{staff_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_staff_disarm" />
                        <span class="slot2" name="attr_staff_disarm_total"></span>
                        <button type="roll" name="roll_staff_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~staff_disarm)}} {{name=@{character_name}}} {{rollname=Staff disarm}} {{bonus=@{staff_disarm_total}}} {{roll=[[[[1d20]]+@{staff_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_staff_entangle" />
                        <span class="slot2" name="attr_staff_entangle_total"></span>
                        <button type="roll" name="roll_staff_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~staff_entangle)}} {{name=@{character_name}}} {{rollname=Staff entangle}} {{bonus=@{staff_entangle_total}}} {{roll=[[[[1d20]]+@{staff_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_staff_damage" />
                        <span class="locked" name="attr_staff_damage"></span>
                        <button type="roll" name="roll_staff_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~staff_damage)}} {{name=@{character_name}}} {{damagename=Staff damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{staff_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{staff_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_staff_acquired" /><span class="locked" name="attr_staff_acquired"></span></span>
                    <span name="attr_staff_level"></span>

                    <input type="hidden" value="0" name="attr_sword_strike_total" /><input type="hidden" value="0" name="attr_sword_thrown_total" /><input type="hidden" value="0" name="attr_sword_parry_total" /><input type="hidden" value="0" name="attr_sword_disarm_total" /><input type="hidden" value="0" name="attr_sword_entangle_total" /><input type="hidden" value="0" name="attr_sword_damage_total" /><input type="hidden" value="0" name="attr_sword_level" />
                    <input type="hidden" class="active" value="0" name="attr_sword_acquired" />
                    <h4>W.P. Sword</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_sword_strike" />
                        <span class="slot2" name="attr_sword_strike_total"></span>
                        <button type="roll" name="roll_sword_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~sword_strike)}} {{name=@{character_name}}} {{rollname=Sword strike}} {{bonus=@{sword_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{sword_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_sword_thrown" />
                        <span class="slot2" name="attr_sword_thrown_total"></span>
                        <button type="roll" name="roll_sword_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~sword_thrown)}} {{name=@{character_name}}} {{rollname=Sword thrown}} {{bonus=@{sword_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{sword_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_sword_parry" />
                        <span class="slot2" name="attr_sword_parry_total"></span>
                        <button type="roll" name="roll_sword_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~sword_parry)}} {{name=@{character_name}}} {{rollname=Sword parry}} {{bonus=@{sword_parry_total}}} {{roll=[[[[1d20]]+@{sword_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_sword_disarm" />
                        <span class="slot2" name="attr_sword_disarm_total"></span>
                        <button type="roll" name="roll_sword_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~sword_disarm)}} {{name=@{character_name}}} {{rollname=Sword disarm}} {{bonus=@{sword_disarm_total}}} {{roll=[[[[1d20]]+@{sword_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_sword_entangle" />
                        <span class="slot2" name="attr_sword_entangle_total"></span>
                        <button type="roll" name="roll_sword_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~sword_entangle)}} {{name=@{character_name}}} {{rollname=Sword entangle}} {{bonus=@{sword_entangle_total}}} {{roll=[[[[1d20]]+@{sword_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_sword_damage" />
                        <span class="locked" name="attr_sword_damage"></span>
                        <button type="roll" name="roll_sword_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~sword_damage)}} {{name=@{character_name}}} {{damagename=Sword damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{sword_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{sword_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_sword_acquired" /><span class="locked" name="attr_sword_acquired"></span></span>
                    <span name="attr_sword_level"></span>

                    <input type="hidden" value="0" name="attr_targeting_thrown_total" /><input type="hidden" value="0" name="attr_targeting_damage_total" /><input type="hidden" value="0" name="attr_targeting_level" />
                    <input type="hidden" class="active" value="0" name="attr_targeting_acquired" />
                    <h4>W.P. Targeting</h4><div class="grid disabled">-</div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_targeting_thrown" />
                        <span class="slot2" name="attr_targeting_thrown_total"></span>
                        <button type="roll" name="roll_targeting_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~targeting_thrown)}} {{name=@{character_name}}} {{rollname=Targeting thrown}} {{bonus=@{targeting_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{targeting_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_targeting_damage" />
                        <span class="locked" name="attr_targeting_damage"></span>
                        <button type="roll" name="roll_targeting_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~targeting_damage)}} {{name=@{character_name}}} {{damagename=Targeting damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{targeting_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{targeting_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span><input class="unlocked" type="number" value="0" name="attr_targeting_rof" /><span class="locked" name="attr_targeting_rof"></span></span><span><input class="unlocked" type="number" value="0" name="attr_targeting_acquired" /><span class="locked" name="attr_targeting_acquired"></span></span>
                    <span name="attr_targeting_level"></span>

                    <input type="hidden" value="0" name="attr_whip_strike_total" /><input type="hidden" value="0" name="attr_whip_disarm_total" /><input type="hidden" value="0" name="attr_whip_entangle_total" /><input type="hidden" value="0" name="attr_whip_damage_total" /><input type="hidden" value="0" name="attr_whip_level" />
                    <input type="hidden" class="active" value="0" name="attr_whip_acquired" />
                    <h4>W.P. Whip</h4><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_whip_strike" />
                        <span class="slot2" name="attr_whip_strike_total"></span>
                        <button type="roll" name="roll_whip_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~whip_strike)}} {{name=@{character_name}}} {{rollname=Whip strike}} {{bonus=@{whip_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{whip_strike_total}]]}} {{raw=$[[1]]}}" />
                    </div><div class="grid disabled">-</div><div class="grid disabled">-</div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_whip_disarm" />
                        <span class="slot2" name="attr_whip_disarm_total"></span>
                        <button type="roll" name="roll_whip_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~whip_disarm)}} {{name=@{character_name}}} {{rollname=Whip disarm}} {{bonus=@{whip_disarm_total}}} {{roll=[[[[1d20]]+@{whip_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_whip_entangle" />
                        <span class="slot2" name="attr_whip_entangle_total"></span>
                        <button type="roll" name="roll_whip_entangle" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~whip_entangle)}} {{name=@{character_name}}} {{rollname=Whip entangle}} {{bonus=@{whip_entangle_total}}} {{roll=[[[[1d20]]+@{whip_entangle_total}]]}} {{raw=$[[0]]}}" />
                    </div><div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_whip_damage" />
                        <span class="locked" name="attr_whip_damage"></span>
                        <button type="roll" name="roll_whip_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~whip_damage)}} {{name=@{character_name}}} {{damagename=Whip damage}} {{damageroll=?{Number of Dice|1}d?{Number of Sides|6}+@{whip_damage}}} {{critdamage=[[[[?{Number of Dice|1}d?{Number of Sides|6}+@{whip_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div><span class="disabled">-</span><span><input class="unlocked" type="number" value="0" name="attr_whip_acquired" /><span class="locked" name="attr_whip_acquired"></span></span>
                    <span name="attr_whip_level"></span>
                </div>
            </div>

            <h3 class="grid grid2">
                <span>Modern Weapon Proficiencies</span>
                <label class="lockbox">
                    <input type="checkbox" value="1" name="attr_wp_modern_collapse" />
                    <span class="lock"></span>
                </label>
            </h3>

            <div class="grid scroller">
                <div class="grid grid-wpm">
                    <label class="slot2">Strike</label>
                    <label>Aim</label>
                    <label>Burst</label>
                    <label>Acquired</label>
                    <label>Level</label>
                </div>

                <div class="grid grid-wpm">
                    <input type="hidden" value="0" name="attr_handguns_level" />
                    <input type="hidden" class="active" value="0" name="attr_handguns_acquired" />
                    <h4>W.P. Handguns</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_handguns_strike" />
                        <span class="locked" name="attr_handguns_strike"></span>
                        <button type="roll" name="roll_handguns_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~handguns_strike)}} {{name=@{character_name}}} {{rollname=Handguns strike}} {{bonus=@{handguns_strike}}} {{roll=[[[[1d20]]+@{handguns_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_handguns_aim" />
                        <span class="locked" name="attr_handguns_aim"></span>
                        <button type="roll" name="roll_handguns_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~handguns_aim)}} {{name=@{character_name}}} {{rollname=Handguns aim}} {{bonus=@{handguns_aim}}} {{roll=[[[[1d20]]+@{handguns_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_handguns_burst" />
                        <span class="locked" name="attr_handguns_burst"></span>
                        <button type="roll" name="roll_handguns_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~handguns_burst)}} {{name=@{character_name}}} {{rollname=Handguns burst}} {{bonus=@{handguns_burst}}} {{roll=[[[[1d20]]+@{handguns_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_handguns_acquired" />
                        <span class="locked" name="attr_handguns_acquired"></span>
                    </span>
                    <span name="attr_handguns_level"></span>

                    <input type="hidden" value="0" name="attr_rifles_level" />
                    <input type="hidden" class="active" value="0" name="attr_rifles_acquired" />
                    <h4>W.P. Rifles</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_rifles_strike" />
                        <span class="locked" name="attr_rifles_strike"></span>
                        <button type="roll" name="roll_rifles_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~rifles_strike)}} {{name=@{character_name}}} {{rollname=Rifles strike}} {{bonus=@{rifles_strike}}} {{roll=[[[[1d20]]+@{rifles_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_rifles_aim" />
                        <span class="locked" name="attr_rifles_aim"></span>
                        <button type="roll" name="roll_rifles_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~rifles_aim)}} {{name=@{character_name}}} {{rollname=Rifles aim}} {{bonus=@{rifles_aim}}} {{roll=[[[[1d20]]+@{rifles_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_rifles_burst" />
                        <span class="locked" name="attr_rifles_burst"></span>
                        <button type="roll" name="roll_rifles_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~rifles_burst)}} {{name=@{character_name}}} {{rollname=Rifles burst}} {{bonus=@{rifles_burst}}} {{roll=[[[[1d20]]+@{rifles_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_rifles_acquired" />
                        <span class="locked" name="attr_rifles_acquired"></span>
                    </span>
                    <span name="attr_rifles_level"></span>

                    <input type="hidden" value="0" name="attr_shotgun_level" />
                    <input type="hidden" class="active" value="0" name="attr_shotgun_acquired" />
                    <h4>W.P. Shotgun</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_shotgun_strike" />
                        <span class="locked" name="attr_shotgun_strike"></span>
                        <button type="roll" name="roll_shotgun_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~shotgun_strike)}} {{name=@{character_name}}} {{rollname=Shotgun strike}} {{bonus=@{shotgun_strike}}} {{roll=[[[[1d20]]+@{shotgun_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_shotgun_aim" />
                        <span class="locked" name="attr_shotgun_aim"></span>
                        <button type="roll" name="roll_shotgun_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~shotgun_aim)}} {{name=@{character_name}}} {{rollname=Shotgun aim}} {{bonus=@{shotgun_aim}}} {{roll=[[[[1d20]]+@{shotgun_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_shotgun_burst" />
                        <span class="locked" name="attr_shotgun_burst"></span>
                        <button type="roll" name="roll_shotgun_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~shotgun_burst)}} {{name=@{character_name}}} {{rollname=Shotgun burst}} {{bonus=@{shotgun_burst}}} {{roll=[[[[1d20]]+@{shotgun_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_shotgun_acquired" />
                        <span class="locked" name="attr_shotgun_acquired"></span>
                    </span>
                    <span name="attr_shotgun_level"></span>

                    <input type="hidden" value="0" name="attr_submachine_gun_level" />
                    <input type="hidden" class="active" value="0" name="attr_submachine_gun_acquired" />
                    <h4>W.P. Submachine-Gun</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_submachine_gun_strike" />
                        <span class="locked" name="attr_submachine_gun_strike"></span>
                        <button type="roll" name="roll_submachine_gun_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~submachine_gun_strike)}} {{name=@{character_name}}} {{rollname=Submachine-Gun strike}} {{bonus=@{submachine_gun_strike}}} {{roll=[[[[1d20]]+@{submachine_gun_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_submachine_gun_aim" />
                        <span class="locked" name="attr_submachine_gun_aim"></span>
                        <button type="roll" name="roll_submachine_gun_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~submachine_gun_aim)}} {{name=@{character_name}}} {{rollname=Submachine-Gun aim}} {{bonus=@{submachine_gun_aim}}} {{roll=[[[[1d20]]+@{submachine_gun_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_submachine_gun_burst" />
                        <span class="locked" name="attr_submachine_gun_burst"></span>
                        <button type="roll" name="roll_submachine_gun_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~submachine_gun_burst)}} {{name=@{character_name}}} {{rollname=Submachine-Gun burst}} {{bonus=@{submachine_gun_burst}}} {{roll=[[[[1d20]]+@{submachine_gun_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_submachine_gun_acquired" />
                        <span class="locked" name="attr_submachine_gun_acquired"></span>
                    </span>
                    <span name="attr_submachine_gun_level"></span>

                    <input type="hidden" value="0" name="attr_heavy_military_weapons_level" />
                    <input type="hidden" class="active" value="0" name="attr_heavy_military_weapons_acquired" />
                    <h4>W.P. Heavy Military Weapons</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_heavy_military_weapons_strike" />
                        <span class="locked" name="attr_heavy_military_weapons_strike"></span>
                        <button type="roll" name="roll_heavy_military_weapons_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~heavy_military_weapons_strike)}} {{name=@{character_name}}} {{rollname=Heavy Military Weapons strike}} {{bonus=@{heavy_military_weapons_strike}}} {{roll=[[[[1d20]]+@{heavy_military_weapons_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_heavy_military_weapons_aim" />
                        <span class="locked" name="attr_heavy_military_weapons_aim"></span>
                        <button type="roll" name="roll_heavy_military_weapons_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~heavy_military_weapons_aim)}} {{name=@{character_name}}} {{rollname=Heavy Military Weapons aim}} {{bonus=@{heavy_military_weapons_aim}}} {{roll=[[[[1d20]]+@{heavy_military_weapons_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_heavy_military_weapons_burst" />
                        <span class="locked" name="attr_heavy_military_weapons_burst"></span>
                        <button type="roll" name="roll_heavy_military_weapons_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~heavy_military_weapons_burst)}} {{name=@{character_name}}} {{rollname=Heavy Military Weapons burst}} {{bonus=@{heavy_military_weapons_burst}}} {{roll=[[[[1d20]]+@{heavy_military_weapons_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_heavy_military_weapons_acquired" />
                        <span class="locked" name="attr_heavy_military_weapons_acquired"></span>
                    </span>
                    <span name="attr_heavy_military_weapons_level"></span>

                    <input type="hidden" value="0" name="attr_military_flamethrowers_level" />
                    <input type="hidden" class="active" value="0" name="attr_military_flamethrowers_acquired" />
                    <h4>W.P. Military Flamethrowers</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_military_flamethrowers_strike" />
                        <span class="locked" name="attr_military_flamethrowers_strike"></span>
                        <button type="roll" name="roll_military_flamethrowers_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~military_flamethrowers_strike)}} {{name=@{character_name}}} {{rollname=Military Flamethrowers strike}} {{bonus=@{military_flamethrowers_strike}}} {{roll=[[[[1d20]]+@{military_flamethrowers_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_military_flamethrowers_aim" />
                        <span class="locked" name="attr_military_flamethrowers_aim"></span>
                        <button type="roll" name="roll_military_flamethrowers_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~military_flamethrowers_aim)}} {{name=@{character_name}}} {{rollname=Military Flamethrowers aim}} {{bonus=@{military_flamethrowers_aim}}} {{roll=[[[[1d20]]+@{military_flamethrowers_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_military_flamethrowers_burst" />
                        <span class="locked" name="attr_military_flamethrowers_burst"></span>
                        <button type="roll" name="roll_military_flamethrowers_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~military_flamethrowers_burst)}} {{name=@{character_name}}} {{rollname=Military Flamethrowers burst}} {{bonus=@{military_flamethrowers_burst}}} {{roll=[[[[1d20]]+@{military_flamethrowers_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_military_flamethrowers_acquired" />
                        <span class="locked" name="attr_military_flamethrowers_acquired"></span>
                    </span>
                    <span name="attr_military_flamethrowers_level"></span>

                    <input type="hidden" value="0" name="attr_harpoon_&_spear_gun_level" />
                    <input type="hidden" class="active" value="0" name="attr_harpoon_&_spear_gun_acquired" />
                    <h4>W.P. Harpoon & Spear Gun</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_harpoon_&_spear_gun_strike" />
                        <span class="locked" name="attr_harpoon_&_spear_gun_strike"></span>
                        <button type="roll" name="roll_harpoon_&_spear_gun_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~harpoon_&_spear_gun_strike)}} {{name=@{character_name}}} {{rollname=Harpoon & Spear Gun strike}} {{bonus=@{harpoon_&_spear_gun_strike}}} {{roll=[[[[1d20]]+@{harpoon_&_spear_gun_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_harpoon_&_spear_gun_aim" />
                        <span class="locked" name="attr_harpoon_&_spear_gun_aim"></span>
                        <button type="roll" name="roll_harpoon_&_spear_gun_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~harpoon_&_spear_gun_aim)}} {{name=@{character_name}}} {{rollname=Harpoon & Spear Gun aim}} {{bonus=@{harpoon_&_spear_gun_aim}}} {{roll=[[[[1d20]]+@{harpoon_&_spear_gun_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_harpoon_&_spear_gun_burst" />
                        <span class="locked" name="attr_harpoon_&_spear_gun_burst"></span>
                        <button type="roll" name="roll_harpoon_&_spear_gun_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~harpoon_&_spear_gun_burst)}} {{name=@{character_name}}} {{rollname=Harpoon & Spear Gun burst}} {{bonus=@{harpoon_&_spear_gun_burst}}} {{roll=[[[[1d20]]+@{harpoon_&_spear_gun_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_harpoon_&_spear_gun_acquired" />
                        <span class="locked" name="attr_harpoon_&_spear_gun_acquired"></span>
                    </span>
                    <span name="attr_harpoon_&_spear_gun_level"></span>

                    <input type="hidden" value="0" name="attr_energy_pistol_level" />
                    <input type="hidden" class="active" value="0" name="attr_energy_pistol_acquired" />
                    <h4>W.P. Energy Pistol</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_energy_pistol_strike" />
                        <span class="locked" name="attr_energy_pistol_strike"></span>
                        <button type="roll" name="roll_energy_pistol_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~energy_pistol_strike)}} {{name=@{character_name}}} {{rollname=Energy Pistol strike}} {{bonus=@{energy_pistol_strike}}} {{roll=[[[[1d20]]+@{energy_pistol_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_energy_pistol_aim" />
                        <span class="locked" name="attr_energy_pistol_aim"></span>
                        <button type="roll" name="roll_energy_pistol_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~energy_pistol_aim)}} {{name=@{character_name}}} {{rollname=Energy Pistol aim}} {{bonus=@{energy_pistol_aim}}} {{roll=[[[[1d20]]+@{energy_pistol_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_energy_pistol_burst" />
                        <span class="locked" name="attr_energy_pistol_burst"></span>
                        <button type="roll" name="roll_energy_pistol_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~energy_pistol_burst)}} {{name=@{character_name}}} {{rollname=Energy Pistol burst}} {{bonus=@{energy_pistol_burst}}} {{roll=[[[[1d20]]+@{energy_pistol_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_energy_pistol_acquired" />
                        <span class="locked" name="attr_energy_pistol_acquired"></span>
                    </span>
                    <span name="attr_energy_pistol_level"></span>

                    <input type="hidden" value="0" name="attr_energy_rifle_level" />
                    <input type="hidden" class="active" value="0" name="attr_energy_rifle_acquired" />
                    <h4>W.P. Energy Rifle</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_energy_rifle_strike" />
                        <span class="locked" name="attr_energy_rifle_strike"></span>
                        <button type="roll" name="roll_energy_rifle_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~energy_rifle_strike)}} {{name=@{character_name}}} {{rollname=Energy Rifle strike}} {{bonus=@{energy_rifle_strike}}} {{roll=[[[[1d20]]+@{energy_rifle_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_energy_rifle_aim" />
                        <span class="locked" name="attr_energy_rifle_aim"></span>
                        <button type="roll" name="roll_energy_rifle_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~energy_rifle_aim)}} {{name=@{character_name}}} {{rollname=Energy Rifle aim}} {{bonus=@{energy_rifle_aim}}} {{roll=[[[[1d20]]+@{energy_rifle_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_energy_rifle_burst" />
                        <span class="locked" name="attr_energy_rifle_burst"></span>
                        <button type="roll" name="roll_energy_rifle_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~energy_rifle_burst)}} {{name=@{character_name}}} {{rollname=Energy Rifle burst}} {{bonus=@{energy_rifle_burst}}} {{roll=[[[[1d20]]+@{energy_rifle_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_energy_rifle_acquired" />
                        <span class="locked" name="attr_energy_rifle_acquired"></span>
                    </span>
                    <span name="attr_energy_rifle_level"></span>

                    <input type="hidden" value="0" name="attr_heavy_mega_damage_weapons_level" />
                    <input type="hidden" class="active" value="0" name="attr_heavy_mega_damage_weapons_acquired" />
                    <h4>W.P. Heavy Mega-Damage Weapons</h4>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_heavy_mega_damage_weapons_strike" />
                        <span class="locked" name="attr_heavy_mega_damage_weapons_strike"></span>
                        <button type="roll" name="roll_heavy_mega_damage_weapons_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~heavy_mega_damage_weapons_strike)}} {{name=@{character_name}}} {{rollname=Heavy Mega-Damage Weapons strike}} {{bonus=@{heavy_mega_damage_weapons_strike}}} {{roll=[[[[1d20]]+@{heavy_mega_damage_weapons_strike}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_heavy_mega_damage_weapons_aim" />
                        <span class="locked" name="attr_heavy_mega_damage_weapons_aim"></span>
                        <button type="roll" name="roll_heavy_mega_damage_weapons_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~heavy_mega_damage_weapons_aim)}} {{name=@{character_name}}} {{rollname=Heavy Mega-Damage Weapons aim}} {{bonus=@{heavy_mega_damage_weapons_aim}}} {{roll=[[[[1d20]]+@{heavy_mega_damage_weapons_aim}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid2">
                        <input class="unlocked" type="number" value="0" name="attr_heavy_mega_damage_weapons_burst" />
                        <span class="locked" name="attr_heavy_mega_damage_weapons_burst"></span>
                        <button type="roll" name="roll_heavy_mega_damage_weapons_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~heavy_mega_damage_weapons_burst)}} {{name=@{character_name}}} {{rollname=Heavy Mega-Damage Weapons burst}} {{bonus=@{heavy_mega_damage_weapons_burst}}} {{roll=[[[[1d20]]+@{heavy_mega_damage_weapons_burst}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <span>
                        <input class="unlocked" type="number" value="0" name="attr_heavy_mega_damage_weapons_acquired" />
                        <span class="locked" name="attr_heavy_mega_damage_weapons_acquired"></span>
                    </span>
                    <span name="attr_heavy_mega_damage_weapons_level"></span>
                </div>
            </div>
        </div>

        <div class="grid saves">

            <h3 class="grid grid2">
                <span>Saving Throws and Other Bonuses</span>
                <label class="lockbox">
                    <input type="checkbox" value="1" name="attr_saves_collapse" />
                    <span class="lock"></span>
                </label>
            </h3>

            <input type="hidden" value="0" name="attr_save_comadeath_total" />
            <input type="hidden" value="0" name="attr_save_insane_total" />
            <input type="hidden" value="0" name="attr_save_magic_total" />
            <input type="hidden" value="0" name="attr_save_ritual_total" />
            <input type="hidden" value="0" name="attr_save_toxin_lethal_total" />
            <input type="hidden" value="0" name="attr_save_toxin_nonlethal_total" />
            <input type="hidden" value="0" name="attr_save_psi_total" />

            <div class="grid grid2">
                <div class="grid grid-saves">
                    <label class="slot2">Bonus</label>
                    <label>Total</label>

                    <h4 class="slot1">Coma/Death</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_comadeath" />
                    <span class="locked" name="attr_save_comadeath"></span>
                    <span><span name="attr_save_comadeath_total"></span>%</span>
                    <button class="d100" type="roll" name="roll_save_comadeath" value="&{template:d100} @{roll_template_token} {{reroll=[Reroll](~save_comadeath)}} {{name=@{character_name}}} {{rollname=Save vs. Coma / Death}} {{bonus=@{save_comadeath_total}}} {{savecoma=true}} {{roll=[[1d100-@{save_comadeath_total}]]}}" />

                    <h4>Curses (vs 15)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_curses" />
                    <span class="locked" name="attr_save_curses"></span>
                    <span>+<span name="attr_save_curses"></span></span>
                    <button type="roll" name="roll_save_curses" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_curses)}} {{name=@{character_name}}} {{rollname=Save vs. Curses}} {{bonus=@{save_curses}}} {{roll=[[[[1d20]]+@{save_curses}]]}} {{raw=$[[0]]}}" />

                    <h4>Disease (vs 14)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_disease" />
                    <span class="locked" name="attr_save_disease"></span>
                    <span>+<span name="attr_save_disease_total"></span></span>
                    <button type="roll" name="roll_save_disease" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_disease)}} {{name=@{character_name}}} {{rollname=Save vs. Disease}} {{bonus=@{save_disease_total}}} {{roll=[[[[1d20]]+@{save_disease_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Electrocution (vs 18)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_electrocution" />
                    <span class="locked" name="attr_save_electrocution"></span>
                    <span>+<span name="attr_save_electrocution_total"></span></span>
                    <button type="roll" name="roll_save_electrocution" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_electrocution)}} {{name=@{character_name}}} {{rollname=Save vs. Electrocution}} {{bonus=@{save_electrocution_total}}} {{roll=[[[[1d20]]+@{save_electrocution_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Extreme Heat (vs 14)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_heat" />
                    <span class="locked" name="attr_save_heat"></span>
                    <span>+<span name="attr_save_heat_total"></span></span>
                    <button type="roll" name="roll_save_heat" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_heat)}} {{name=@{character_name}}} {{rollname=Save vs. Heat}} {{bonus=@{save_heat_total}}} {{roll=[[[[1d20]]+@{save_heat_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Extreme Cold (vs 14)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_cold" />
                    <span class="locked" name="attr_save_cold"></span>
                    <span>+<span name="attr_save_cold_total"></span></span>
                    <button type="roll" name="roll_save_cold" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_cold)}} {{name=@{character_name}}} {{rollname=Save vs. Cold}} {{bonus=@{save_cold_total}}} {{roll=[[[[1d20]]+@{save_cold_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Harmful Drugs (vs 15)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_drugs" />
                    <span class="locked" name="attr_save_drugs"></span>
                    <span>+<span name="attr_save_drugs_total"></span></span>
                    <button type="roll" name="roll_save_drugs" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_drugs)}} {{name=@{character_name}}} {{rollname=Save vs. Harmful Drugs}} {{bonus=@{save_drugs_total}}} {{roll=[[[[1d20]]+@{save_drugs_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Horror Factor (vs 12+)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_horror" />
                    <span class="locked" name="attr_save_horror"></span>
                    <span>+<span name="attr_save_horror"></span></span>
                    <button type="roll" name="roll_save_horror" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_horror)}} {{name=@{character_name}}} {{rollname=Save vs. Horror Factor}} {{bonus=@{save_horror}}} {{roll=[[[[1d20]]+@{save_horror}]]}} {{raw=$[[0]]}}" />
                </div>
                <div class="grid grid-saves">
                    <label class="slot2">Bonus</label>
                    <label>Total</label>

                    <h4 class="slot1">Insanity (vs 12)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_insane" />
                    <span class="locked" name="attr_save_insane"></span>
                    <span>+<span name="attr_save_insane_total"></span></span>
                    <button type="roll" name="roll_save_insane" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_insane)}} {{name=@{character_name}}} {{rollname=Save vs. Insanity}} {{bonus=@{save_insane_total}}} {{roll=[[[[1d20]]+@{save_insane_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Magic (vs 12+)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_magic" />
                    <span class="locked" name="attr_save_magic"></span>
                    <span>+<span name="attr_save_magic_total"></span></span>
                    <button type="roll" name="roll_save_magic" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_magic)}} {{name=@{character_name}}} {{rollname=Save vs. Magic}} {{bonus=@{save_magic_total}}} {{roll=[[[[1d20]]+@{save_magic_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Magic: Ritual (vs 16+)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_ritual" />
                    <span class="locked" name="attr_save_ritual"></span>
                    <span>+<span name="attr_save_ritual_total"></span></span>
                    <button type="roll" name="roll_save_ritual" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_ritual)}} {{name=@{character_name}}} {{rollname=Save vs. Magic (Ritual)}} {{bonus=@{save_ritual_total}}} {{roll=[[[[1d20]]+@{save_ritual_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Pain (vs 16)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_pain" />
                    <span class="locked" name="attr_save_pain"></span>
                    <span>+<span name="attr_save_pain_total"></span></span>
                    <button type="roll" name="roll_save_pain" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_pain)}} {{name=@{character_name}}} {{rollname=Save vs. Pain}} {{bonus=@{save_pain_total}}} {{roll=[[[[1d20]]+@{save_pain_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Poison: Lethal (vs 14)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_toxin_lethal" />
                    <span class="locked" name="attr_save_toxin_lethal"></span>
                    <span>+<span name="attr_save_toxin_lethal_total"></span></span>
                    <button type="roll" name="roll_save_toxin_lethal" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_toxin_lethal)}} {{name=@{character_name}}} {{rollname=Save vs. Poison: Lethal}} {{bonus=@{save_toxin_lethal_total}}} {{roll=[[[[1d20]]+@{save_toxin_lethal_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Poison: Non-Lethal (vs 16)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_toxin_nonlethal" />
                    <span class="locked" name="attr_save_toxin_nonlethal"></span>
                    <span>+<span name="attr_save_toxin_nonlethal_total"></span></span>
                    <button type="roll" name="roll_save_toxin_nonlethal" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_toxin_nonlethal)}} {{name=@{character_name}}} {{rollname=Save vs. Poison: Non-Lethal}} {{bonus=@{save_toxin_nonlethal_total}}} {{roll=[[[[1d20]]+@{save_toxin_nonlethal_total}]]}} {{raw=$[[0]]}}" />

                    <h4>Psionics (vs <input class="unlocked inner" type="number" value="15" name="attr_save_psi_target" /><span class="locked" name="attr_save_psi_target"></span>)</h4>
                    <input class="unlocked" type="number" value="0" name="attr_save_psi" />
                    <span class="locked" name="attr_save_psi"></span>
                    <span>+<span name="attr_save_psi_total"></span></span>
                    <button type="roll" name="roll_save_psi" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~save_psi)}} {{name=@{character_name}}} {{rollname=Save vs. Psionics}} {{bonus=@{save_psi_total}}} {{roll=[[[[1d20]]+@{save_psi_total}]]}} {{raw=$[[0]]}}" />
                </div>
            </div>

            <textarea class="unlocked" wrap="soft" name="attr_saves_other" placeholder="Despair, Fatigue, Illusions, Maintain Balance, Mind Control, Pain, Possession, Telepathic Probes, etc." ></textarea>
            <span class="locked" name="attr_saves_other"></span>
        </div>
    </div>

    <div class="grid magic">
        <h2 class="grid grid2">
            <span>Abilities</span>
            <label class="lockbox">
                <input type="checkbox" value="1" name="attr_magic_collapse" />
                <span class="lock"></span>
            </label>
        </h2>

        <div class="grid grid-magicstats">
            <label>Psionic</label>
            <select class="unlocked" name="attr_psionic_strength">
                <option value=""></option>
                <option value="Not Psychic">Not Psychic</option>
                <option value="Minor Psychic">Minor Psychic</option>
                <option value="Major Psychic">Major Psychic</option>
                <option value="Master Psychic">Master Psychic</option>
            </select>
            <span class="locked" name="attr_psionic_strength"></span>
            <label>Spell Strength</label>
            <input class="unlocked" type="number" value="0" name="attr_spell_strength" />
            <span class="locked" name="attr_spell_strength"></span>
            <label>P.P.E.</label>
            <div class="grid grid2">
                <input type="number" value="" name="attr_character_ppe" />
                <input class="unlocked" type="number" value="" name="attr_character_ppe_max" />
                <span class="locked">/<span name="attr_character_ppe_max"></span></span>
            </div>
            <label>I.S.P.</label>
            <div class="grid grid2">
                <input type="number" value="" name="attr_character_isp" />
                <input class="unlocked" type="number" value="" name="attr_character_isp_max" />
                <span class="locked">/<span name="attr_character_isp_max"></span></span>
            </div>
        </div>

        <div class="grid scroller">
            <div class="grid grid-magic">
                <!-- button type="action" name="act_ability_name">Name</button -->
                <!-- button type="action" name="act_ability_level">Level</button -->
                <label>Name</label>
                <label>Level</label>
                <label>Skill <span class="unlocked">(base/per)</span></label>
                <label>Strike</label>
                <label>Damage / Heal / Etc.</label>
                <label class="span2">Cost</label>
            </div>

            <fieldset class="repeating_ability">
                <input class="ability-skill" type="hidden" name="attr_ability_skill_total" value=""/>
                <input class="ability-strike" type="hidden" name="attr_ability_strike" value=""/>
                <input class="ability-damage" type="hidden" name="attr_ability_damage" value="" />
                <div class="grid grid-magic">
                    <input class="unlocked" type="text" value="" name="attr_ability_name" placeholder="Ability Name"/>
                    <h4 class="locked"><span name="attr_ability_name"></span></h4>

                    <select class="unlocked" name="attr_ability_level">
                        <option value=""></option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="L">Legend</option>
                    </select>
                    <span class="locked" name="attr_ability_level"></span>

                    <div class="grid grid4 skill">
                        <input class="unlocked" type="number" value="" name="attr_ability_skill_base" />
                        <input class="unlocked" type="number" value="" name="attr_ability_skill_per" />
                        <span><span name="attr_ability_skill_total"></span>%</span>
                        <button class="d100" type="roll" name="roll_ability_skill_total" value="&{template:d100} @{roll_template_token} {{reroll=[Reroll](~repeating_ability_ability_skill_total)}} {{name=@{character_name}}} {{rollname=@{ability_name}}} {{target=@{ability_skill_total}}} {{realtarget=[[{@{ability_skill_total}, 98}KL1]]}} {{roll=[[1d100]]}}" />
                    </div>

                    <div class="grid grid2 strike">
                        <input class="unlocked" type="number" value="" name="attr_ability_strike" />
                        <span class="locked">+<span name="attr_ability_strike"></span></span>

                        <button type="roll" name="roll_ability_strike" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_ability_ability_strike)}} {{name=@{character_name}}} {{rollname=@{ability_name}}} {{bonus=@{ability_strike}}} {{roll=[[[[1d20]]+@{ability_strike}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <div class="grid grid3 damage">
                        <input class="unlocked" type="text" value="" name="attr_ability_damage" />
                        <span class="locked span2">
                            <span name="attr_ability_damage"></span>
                            <span name="attr_ability_damage_type"></span>
                        </span>

                        <select class="unlocked" name="attr_ability_damage_type">
                            <option value=""></option>
                            <option value="S.D.C.">S.D.C.</option>
                            <option value="M.D.C.">M.D.C.</option>
                            <option value="M.D.">M.D.</option>
                        </select>

                        <button type="roll" name="roll_ability_damage" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_ability_ability_damage)}} {{name=@{character_name}}} {{damagename=@{ability_name}}} {{damagetype=@{ability_damage_type}}} {{damageroll=@{ability_damage}}} {{critdamage=[[[[@{ability_damage}]]*[[2]]]]}} {{damage=$[[0]]}} {{rolltype=Ability}}" />
                    </div>

                    <input class="unlocked" type="number" value="" name="attr_ability_cost" />
                    <span class="locked" name="attr_ability_cost"></span>

                    <select class="unlocked" name="attr_ability_source">
                        <option value=""></option>
                        <option value="P.P.E.">P.P.E.</option>
                        <option value="I.S.P.">I.S.P.</option>
                        <option value="Chi">Chi</option>
                        <option value="BIO-E">BIO-E</option>
                    </select>
                    <span class="locked" name="attr_ability_source"></span>
                </div>
                <details>
                    <summary></summary>
                    <div class="grid">
                        <div class="grid grid3">
                            <label>Range</label>
                            <label>Duration</label>
                            <label>Save</label>

                            <input class="unlocked" type="text" value="" name="attr_ability_range" />
                            <span class="locked" name="attr_ability_range"></span>

                            <input class="unlocked" type="text" value="" name="attr_ability_duration" />
                            <span class="locked" name="attr_ability_duration"></span>

                            <input class="unlocked" type="text" value="" name="attr_ability_save" />
                            <span class="locked" name="attr_ability_save"></span>
                        </div>

                        <label>Notes</label>

                        <textarea class="unlocked" name="attr_ability_text"></textarea>
                        <span class="locked" name="attr_ability_text"></span>
                    </div>
                </details>
            </fieldset>
        </div>
    </div>

    <div class="grid equipment">
        <h2>Equipment</h2>

        <div class="tabs">
            <button type="action" name="act_weapons" >Weapons</button>
            <button type="action" name="act_armor" >Armor</button>
            <button type="action" name="act_rpa" >Robots</button>
            <button type="action" name="act_gear" >Gear</button>
            <button type="action" name="act_consumables" >Consumables</button>
            <button type="action" name="act_wealth" >Wealth</button>
        </div>

        <div class="grid weapons">
            <h4 class="grid grid2">
                <span>Weapons</span>
                <label class="lockbox">
                    <input type="checkbox" value="1" name="attr_weapons_collapse" />
                    <span class="lock"></span>
                </label>
            </h4>

            <fieldset class="repeating_weapon">
                <input class="weapon-template" type="hidden" value="ancient" name="attr_weapon_template" />
                <input type="hidden" value="0" name="attr_weapon_strike_total" />
                <input type="hidden" value="0" name="attr_weapon_strike_total" />
                <input type="hidden" value="0" name="attr_weapon_thrown_total" />
                <input type="hidden" value="0" name="attr_weapon_aim_total" />
                <input type="hidden" value="0" name="attr_weapon_burst_total" />
                <input type="hidden" value="0" name="attr_weapon_parry_total" />
                <input type="hidden" value="0" name="attr_weapon_disarm_total" />
                <input class="weapon-ps-bonus" type="hidden" value="0" name="attr_weapon_ps_bonus" />

                <div class="grid grid-weapon">
                    <label>Name</label>
                    <label>Proficiency</label>
                    <label>Strike</label>
                    <label class="ancient">Thrown</label>
                    <label class="modern">Aim</label>
                    <label class="modern">Burst</label>
                    <label class="ancient">Parry</label>

                    <input class="unlocked" type="text" value="" name="attr_weapon_name" placeholder="Weapon Name" />
                    <h5 class="locked"><span name="attr_weapon_name"></span></h5>
                    <select class="unlocked" name="attr_weapon_proficiency">
                        <option value=""></option>
                        <option value="Hand to Hand">Hand to Hand</option>
                        <option value="Generic Melee">Generic Melee</option>
                        <option value="Generic Ranged">Generic Ranged</option>

                        <option disabled>Ancient Weapons</option>
                        <option value="W.P. Archery">W.P. Archery</option>
                        <option value="W.P. Axe">W.P. Axe</option>
                        <option value="W.P. Blunt">W.P. Blunt</option>
                        <option value="W.P. Chain">W.P. Chain</option>
                        <option value="W.P. Forked">W.P. Forked</option>
                        <option value="W.P. Grappling Hook">W.P. Grappling Hook</option>
                        <option value="W.P. Knife">W.P. Knife</option>
                        <option value="W.P. Paired Weapons">W.P. Paired Weapons</option>
                        <option value="W.P. Pole Arm">W.P. Pole Arm</option>
                        <option value="W.P. Quick Draw">W.P. Quick Draw</option>
                        <option value="W.P. Rope">W.P. Rope</option>
                        <option value="W.P. Shield">W.P. Shield</option>
                        <option value="W.P. Spear">W.P. Spear</option>
                        <option value="W.P. Staff">W.P. Staff</option>
                        <option value="W.P. Sword">W.P. Sword</option>
                        <option value="W.P. Targeting">W.P. Targeting</option>
                        <option value="W.P. Whip">W.P. Whip</option>

                        <option disabled>Modern Weapons</option>
                        <option value="W.P. Handguns">W.P. Handguns</option>
                        <option value="W.P. Rifles">W.P. Rifles</option>
                        <option value="W.P. Shotgun">W.P. Shotgun</option>
                        <option value="W.P. Submachine-Gun">W.P. Submachine-Gun</option>
                        <option value="W.P. Heavy Military Weapons">W.P. Heavy Military Weapons</option>
                        <option value="W.P. Military Flamethrowers">W.P. Military Flamethrowers</option>
                        <option value="W.P. Harpoon & Spear Gun">W.P. Harpoon & Spear Gun</option>
                        <option value="W.P. Energy Pistol">W.P. Energy Pistol</option>
                        <option value="W.P. Energy Rifle">W.P. Energy Rifle</option>
                        <option value="W.P. Heavy Mega-Damage Weapons">W.P. Heavy Mega-Damage Weapons</option>
                    </select>
                    <span class="locked" name="attr_weapon_proficiency"></span>
                    <div class="grid grid3">
                        <input class="unlocked" type="number" value="0" name="attr_weapon_strike" />
                        <span>+<span name="attr_weapon_strike_total"></span></span>
                        <button class="ancient wops" type="roll" name="roll_weapon_strike_a_wops" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_strike_a_wops)}} {{dmgroll=[Damage](~repeating_weapon_weapon_damage_wops)}} {{name=@{character_name}}} {{rollname=@{weapon_name} strike}} {{bonus=@{weapon_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{weapon_strike_total}]]}} {{raw=$[[1]]}}" />
                        <button class="ancient wps" type="roll" name="roll_weapon_strike_a_wps" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_strike_a_wps)}} {{dmgroll=[Damage](~repeating_weapon_weapon_damage_wps)}} {{name=@{character_name}}} {{rollname=@{weapon_name} strike}} {{bonus=@{weapon_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{weapon_strike_total}]]}} {{raw=$[[1]]}}" />
                        <button class="modern" type="roll" name="roll_weapon_strike_m" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_strike_m)}} {{dmgroll=[Damage](~repeating_weapon_weapon_damage_wops)}} {{name=@{character_name}}} {{rollname=@{weapon_name} strike}} {{bonus=@{weapon_strike_total}}} {{roll=[[[[1d20]]+@{weapon_strike_total}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid3 ancient">
                        <input class="unlocked" type="number" value="0" name="attr_weapon_thrown" />
                        <span>+<span name="attr_weapon_thrown_total"></span></span>
                        <button type="roll" name="roll_weapon_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_thrown)}} {{dmgroll=[Damage](~repeating_weapon_weapon_damage_wops)}} {{name=@{character_name}}} {{rollname=@{weapon_name} thrown}} {{bonus=@{weapon_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{weapon_thrown_total}]]}} {{raw=$[[1]]}}" />
                    </div>
                    <div class="grid grid3 modern">
                        <input class="unlocked" type="number" value="0" name="attr_weapon_aim" />
                        <span>+<span name="attr_weapon_aim_total"></span></span>
                        <button type="roll" name="roll_weapon_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_aim)}} {{name=@{character_name}}} {{rollname=@{weapon_name} aim}} {{bonus=@{weapon_aim_total}}} {{roll=[[[[1d20]]+@{weapon_aim_total}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid3 modern">
                        <input class="unlocked" type="number" value="0" name="attr_weapon_burst" />
                        <span>+<span name="attr_weapon_burst_total"></span></span>
                        <button type="roll" name="roll_weapon_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_burst)}} {{name=@{character_name}}} {{rollname=@{weapon_name} burst}} {{bonus=@{weapon_burst_total}}} {{roll=[[[[1d20]]+@{weapon_burst_total}]]}} {{raw=$[[0]]}}" />
                    </div>
                    <div class="grid grid3 ancient">
                        <input class="unlocked" type="number" value="0" name="attr_weapon_parry" />
                        <span>+<span name="attr_weapon_parry_total"></span></span>
                        <button type="roll" name="roll_weapon_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_parry)}} {{name=@{character_name}}} {{rollname=@{weapon_name} parry}} {{bonus=@{weapon_parry_total}}} {{roll=[[[[1d20]]+@{weapon_parry_total}]]}} {{raw=$[[0]]}}" />
                    </div>

                    <label class="notes">Notes</label>
                    <label class="damage">Damage</label>

                    <textarea class="unlocked notes" wrap="soft" name="attr_weapon_details" placeholder="Weapon Details" ></textarea>
                    <span class="locked notes" name="attr_weapon_details"></span>

                    <div class="grid grid4 damage">
                        <input class="weapon-damage" type="hidden" name="attr_weapon_damage" value="" />
                        <input class="unlocked" type="text" value="" name="attr_weapon_damage_name" placeholder="Single Shot, Burst, etc." />
                        <h5 class="locked"><span name="attr_weapon_damage_name"></span></h5>
                        <input class="unlocked" type="text" value="" name="attr_weapon_damage" placeholder="xdy+z" />
                        <span class="locked" name="attr_weapon_damage"></span>
                        <select class="unlocked" name="attr_weapon_damage_type">
                            <option value=""></option>
                            <option value="S.D.C.">S.D.C.</option>
                            <option value="M.D.">M.D.</option>
                        </select>
                        <span class="locked" name="attr_weapon_damage_type"></span>
                        <button class="wops dmg" type="roll" name="roll_weapon_damage_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_damage_wops)}} {{name=@{character_name}}} {{damagename=@{weapon_name} @{weapon_damage_name}}} {{damagetype=@{weapon_damage_type}}} {{damageroll=@{weapon_damage}}} {{critdamage=[[[[@{weapon_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                        <button class="wps dmg" type="roll" name="roll_weapon_damage_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_damage_wps)}} {{name=@{character_name}}} {{damagename=@{weapon_name} @{weapon_damage_name}}} {{damagetype=@{weapon_damage_type}}} {{damageroll=@{weapon_damage}+@{ps_hth_damage}}} {{critdamage=[[[[@{weapon_damage}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />

                        <input class="weapon-damage" type="hidden" name="attr_weapon_damage2" value="" />
                        <input class="unlocked" type="text" value="" name="attr_weapon_damage2_name" placeholder="Single Shot, Burst, etc." />
                        <h5 class="locked"><span name="attr_weapon_damage2_name"></span></h5>
                        <input class="unlocked" type="text" value="" name="attr_weapon_damage2" placeholder="xdy+z" />
                        <span class="locked" name="attr_weapon_damage2"></span>
                        <select class="unlocked" name="attr_weapon_damage2_type">
                            <option value=""></option>
                            <option value="S.D.C.">S.D.C.</option>
                            <option value="M.D.">M.D.</option>
                        </select>
                        <span class="locked" name="attr_weapon_damage2_type"></span>
                        <button class="wops dmg" type="roll" name="roll_weapon_damage2_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_damage2_wops)}} {{name=@{character_name}}} {{damagename=@{weapon_name} @{weapon_damage2_name}}} {{damagetype=@{weapon_damage2_type}}} {{damageroll=@{weapon_damage2}}} {{critdamage=[[[[@{weapon_damage2}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                        <button class="wps dmg" type="roll" name="roll_weapon_damage2_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_damage2_wps)}} {{name=@{character_name}}} {{damagename=@{weapon_name} @{weapon_damage2_name}}} {{damagetype=@{weapon_damage2_type}}} {{damageroll=@{weapon_damage2}+@{ps_hth_damage}}} {{critdamage=[[[[@{weapon_damage2}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                    </div>

                    <label>Range</label>
                    <label class="ancient">PS Bonus</label>
                    <label class="modern">Payload</label>
                    <label class="modern">Rate</label>
                    <label class="ancient">Disarm</label>

                    <input class="unlocked" type="text" value="" name="attr_weapon_range" />
                    <span class="locked" name="attr_weapon_range"></span>
                    <label class="unlocked ancient switch">
                        <input type="checkbox" value="1" name="attr_weapon_ps_bonus" />
                        <span class="slider"></span>
                    </label>
                    <span class="locked ancient" name="attr_weapon_ps_bonus"></span>
                    <input class="unlocked modern" type="text" value="0" name="attr_weapon_payload" />
                    <span class="locked modern" name="attr_weapon_payload"></span>
                    <input class="unlocked modern" type="text" value="0" name="attr_weapon_rate" />
                    <span class="locked modern" name="attr_weapon_rate"></span>
                    <div class="grid grid3 ancient">
                        <input class="unlocked" type="number" value="0" name="attr_weapon_disarm" />
                        <span>+<span name="attr_weapon_disarm_total"></span></span>
                        <button type="roll" name="roll_weapon_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_weapon_weapon_disarm)}} {{name=@{character_name}}} {{rollname=@{weapon_name} disarm}} {{bonus=@{weapon_disarm_total}}} {{roll=[[[[1d20]]+@{weapon_disarm_total}]]}} {{raw=$[[0]]}}" />
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="grid armor">
            <h4 class="grid grid2">
                <span>Armor</span>
                <label class="lockbox">
                    <input type="checkbox" value="1" name="attr_armor_collapse" />
                    <span class="lock"></span>
                </label>
            </h4>

            <fieldset class="repeating_armor">
                <div class="grid grid-armor">
                    <label>Name</label>
                    <label>Protection</label>
                    <label>A.R.</label>
                    <label>Weight</label>
                    <label>Mobility</label>
                    <label>Active</label>

                    <input class="unlocked" type="text" value="" name="attr_armor_name" placeholder="Armor Name" />
                    <h5 class="locked"><span name="attr_armor_name"></span></h5>
                    <select class="unlocked" name="attr_armortype_select">
                        <option value=""></option>
                        <option value="S.D.C.">S.D.C.</option>
                        <option value="M.D.C.">M.D.C.</option>
                    </select>
                    <span class="locked" name="attr_armortype_select"></span>
                    <input class="unlocked" type="number" value="" name="attr_armor_ar" />
                    <span class="locked" name="attr_armor_ar"></span>
                    <input class="unlocked" type="text" value="" name="attr_armor_weight" />
                    <span class="locked" name="attr_armor_weight"></span>
                    <input class="unlocked" type="text" value="" name="attr_armor_mobility" />
                    <span class="locked" name="attr_armor_mobility"></span>
                    <label class="switch">
                        <input type="checkbox" value="1" name="attr_armor_active" />
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="grid grid-armor">
                    <label>Main Body</label>
                    <label>Head</label>
                    <label>Left Arm</label>
                    <label>Right Arm</label>
                    <label>Left Leg</label>
                    <label>Right Leg</label>

                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_mainbody" />
                        <input class="unlocked" type="number" value="" name="attr_armor_mainbody_max" />
                        <span class="locked">/<span name="attr_armor_mainbody_max"></span></span>
                    </div>
                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_head" />
                        <input class="unlocked" type="number" value="" name="attr_armor_head_max" />
                        <span class="locked">/<span name="attr_armor_head_max"></span></span>
                    </div>
                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_larm" />
                        <input class="unlocked" type="number" value="" name="attr_armor_larm_max" />
                        <span class="locked">/<span name="attr_armor_larm_max"></span></span>
                    </div>
                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_rarm" />
                        <input class="unlocked" type="number" value="" name="attr_armor_rarm_max" />
                        <span class="locked">/<span name="attr_armor_rarm_max"></span></span>
                    </div>
                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_lleg" />
                        <input class="unlocked" type="number" value="" name="attr_armor_lleg_max" />
                        <span class="locked">/<span name="attr_armor_lleg_max"></span></span>
                    </div>
                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_rleg" />
                        <input class="unlocked" type="number" value="" name="attr_armor_rleg_max" />
                        <span class="locked">/<span name="attr_armor_rleg_max"></span></span>
                    </div>

                    <textarea class="unlocked" wrap="soft" name="attr_armor_details" placeholder="Armor Details" ></textarea>
                    <span class="locked" name="attr_armor_details"></span>

                    <input class="unlocked lbl" type="text" value="" name="attr_armor_other1_name" placeholder="Other" />
                    <label class="locked"><span name="attr_armor_other1_name"></span></label>
                    <input class="unlocked lbl" type="text" value="" name="attr_armor_other2_name" placeholder="Other" />
                    <label class="locked"><span name="attr_armor_other2_name"></span></label>
                    <input class="unlocked lbl" type="text" value="" name="attr_armor_other3_name" placeholder="Other" />
                    <label class="locked"><span name="attr_armor_other3_name"></span></label>
                    <input class="unlocked lbl" type="text" value="" name="attr_armor_other4_name" placeholder="Other" />
                    <label class="locked"><span name="attr_armor_other4_name"></span></label>

                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_other1" />
                        <input class="unlocked" type="number" value="" name="attr_armor_other1_max" />
                        <span class="locked">/<span name="attr_armor_other1_max"></span></span>
                    </div>
                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_other2" />
                        <input class="unlocked" type="number" value="" name="attr_armor_other2_max" />
                        <span class="locked">/<span name="attr_armor_other2_max"></span></span>
                    </div>
                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_other3" />
                        <input class="unlocked" type="number" value="" name="attr_armor_other3_max" />
                        <span class="locked">/<span name="attr_armor_other3_max"></span></span>
                    </div>
                    <div class="grid grid2">
                        <input type="number" value="" name="attr_armor_other4" />
                        <input class="unlocked" type="number" value="" name="attr_armor_other4_max" />
                        <span class="locked">/<span name="attr_armor_other4_max"></span></span>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="grid rpa">
            <h4 class="grid grid2">
                <span>Robots and Power Armor</span>
                <label class="lockbox">
                    <input type="checkbox" value="1" name="attr_rpa_collapse" />
                    <span class="lock"></span>
                </label>
            </h4>

            <fieldset class="repeating_rpa">
                <div class="grid">
                    <div class="grid grid-rpa">
                        <label>Name</label>
                        <label>Model</label>
                        <label>Class</label>
                        <label>Crew</label>
                        <label>Active</label>

                        <input class="unlocked" type="text" value="" name="attr_rpa_name" placeholder="Robot Name" />
                        <h5 class="locked"><span name="attr_rpa_name" ></span></h5>
                        <input class="unlocked" type="text" value="" name="attr_rpa_model" />
                        <span class="locked" name="attr_rpa_model" ></span>
                        <input class="unlocked" type="text" value="" name="attr_rpa_class" />
                        <span class="locked" name="attr_rpa_class" ></span>
                        <input class="unlocked" type="text" value="" name="attr_rpa_crew" />
                        <span class="locked" name="attr_rpa_crew" ></span>
                        <label class="switch">
                            <input type="checkbox" value="1" name="attr_rpa_active" />
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="grid grid2 sticker">
                        <h4>M.D.C. by Location</h4>
                        <div class="grid grid-rpa">
                            <label>Main Body</label>
                            <label>Pilot / Crew</label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other1_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other1_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other2_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other2_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other3_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other3_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other4_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other4_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other5_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other5_name" ></span></label>

                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_mainbody" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_mainbody_max" />
                                <span class="locked">/<span name="attr_rpa_mainbody_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_pilot" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_pilot_max" />
                                <span class="locked">/<span name="attr_rpa_pilot_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other1" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other1_max" />
                                <span class="locked">/<span name="attr_rpa_other1_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other2" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other2_max" />
                                <span class="locked">/<span name="attr_rpa_other2_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other3" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other3_max" />
                                <span class="locked">/<span name="attr_rpa_other3_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other4" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other4_max" />
                                <span class="locked">/<span name="attr_rpa_other4_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other5" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other5_max" />
                                <span class="locked">/<span name="attr_rpa_other5_max" ></span></span>
                            </div>

                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other6_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other6_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other7_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other7_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other8_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other8_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other9_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other9_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other10_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other10_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other11_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other11_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other12_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other12_name" ></span></label>

                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other6" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other6_max" />
                                <span class="locked">/<span name="attr_rpa_other6_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other7" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other7_max" />
                                <span class="locked">/<span name="attr_rpa_other7_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other8" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other8_max" />
                                <span class="locked">/<span name="attr_rpa_other8_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other9" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other9_max" />
                                <span class="locked">/<span name="attr_rpa_other9_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other10" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other10_max" />
                                <span class="locked">/<span name="attr_rpa_other10_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other11" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other11_max" />
                                <span class="locked">/<span name="attr_rpa_other11_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other12" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other12_max" />
                                <span class="locked">/<span name="attr_rpa_other12_max" ></span></span>
                            </div>

                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other13_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other13_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other14_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other14_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other15_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other15_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other16_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other16_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other17_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other17_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other18_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other18_name" ></span></label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_other19_name" placeholder="Other Location" />
                            <label class="locked"><span name="attr_rpa_other19_name" ></span></label>

                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other13" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other13_max" />
                                <span class="locked">/<span name="attr_rpa_other13_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other14" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other14_max" />
                                <span class="locked">/<span name="attr_rpa_other14_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other15" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other15_max" />
                                <span class="locked">/<span name="attr_rpa_other15_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other16" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other16_max" />
                                <span class="locked">/<span name="attr_rpa_other16_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other17" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other17_max" />
                                <span class="locked">/<span name="attr_rpa_other17_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other18" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other18_max" />
                                <span class="locked">/<span name="attr_rpa_other18_max" ></span></span>
                            </div>
                            <div class="grid grid2">
                                <input type="number" value="" name="attr_rpa_other19" />
                                <input class="unlocked" type="number" value="" name="attr_rpa_other19_max" />
                                <span class="locked">/<span name="attr_rpa_other19_max" ></span></span>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid2 sticker">
                        <h4>Speed</h4>
                        <div class="grid grid-rpa">
                            <label>Running</label>
                            <label>Leaping</label>
                            <label>Flying</label>
                            <input class="unlocked lbl" type="text" value="" name="attr_rpa_speed_other1_name" placeholder="Other Speed" />
                            <label class="locked"><span name="attr_rpa_speed_other1_name" ></span></label>

                            <input class="unlocked" type="text" value="" name="attr_rpa_running" />
                            <span class="locked" name="attr_rpa_running" ></span>
                            <input class="unlocked" type="text" value="" name="attr_rpa_leaping" />
                            <span class="locked" name="attr_rpa_leaping" ></span>
                            <input class="unlocked" type="text" value="" name="attr_rpa_flying" />
                            <span class="locked" name="attr_rpa_flying" ></span>
                            <input class="unlocked" type="text" value="" name="attr_rpa_speed_other1" />
                            <span class="locked" name="attr_rpa_speed_other1" ></span>
                        </div>
                    </div>
                    <div class="grid grid2 sticker">
                        <h4>Weapon Systems</h4>

                        <input class="rpa-wtoggle" type="hidden" name="attr_rpa_weapon_tab" value="rpaw1" />

                        <div class="grid pages">
                            <div class="tabs">
                                <button type="action" name="act_rpaw1">One</button>
                                <button type="action" name="act_rpaw2">Two</button>
                                <button type="action" name="act_rpaw3">Three</button>
                                <button type="action" name="act_rpaw4">Four</button>
                                <button type="action" name="act_rpaw5">Five</button>
                                <button type="action" name="act_rpaw6">Six</button>
                            </div>

                            <div class="page">
                                <input class="weapon-template" type="hidden" value="ancient" name="attr_rpa_w1_template" />
                                <input type="hidden" value="0" name="attr_rpa_w1_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w1_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w1_thrown_total" />
                                <input type="hidden" value="0" name="attr_rpa_w1_aim_total" />
                                <input type="hidden" value="0" name="attr_rpa_w1_burst_total" />
                                <input type="hidden" value="0" name="attr_rpa_w1_parry_total" />
                                <input type="hidden" value="0" name="attr_rpa_w1_disarm_total" />
                                <input class="weapon-ps-bonus" type="hidden" value="0" name="attr_rpa_w1_ps_bonus" />

                                <div class="grid grid-weapon">
                                    <label>Name</label>
                                    <label>Proficiency</label>
                                    <label>Strike</label>
                                    <label class="ancient">Thrown</label>
                                    <label class="modern">Aim</label>
                                    <label class="modern">Burst</label>
                                    <label class="ancient">Parry</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w1_name" placeholder="Weapon Name" />
                                    <h5 class="locked"><span name="attr_rpa_w1_name"></span></h5>
                                    <select class="unlocked" name="attr_rpa_w1_proficiency">
                                        <option value=""></option>
                                        <option value="Hand to Hand">Hand to Hand</option>
                                        <option value="Generic Melee">Generic Melee</option>
                                        <option value="Generic Ranged">Generic Ranged</option>

                                        <option disabled>Ancient Weapons</option>
                                        <option value="W.P. Archery">W.P. Archery</option>
                                        <option value="W.P. Axe">W.P. Axe</option>
                                        <option value="W.P. Blunt">W.P. Blunt</option>
                                        <option value="W.P. Chain">W.P. Chain</option>
                                        <option value="W.P. Forked">W.P. Forked</option>
                                        <option value="W.P. Grappling Hook">W.P. Grappling Hook</option>
                                        <option value="W.P. Knife">W.P. Knife</option>
                                        <option value="W.P. Paired Weapons">W.P. Paired Weapons</option>
                                        <option value="W.P. Pole Arm">W.P. Pole Arm</option>
                                        <option value="W.P. Quick Draw">W.P. Quick Draw</option>
                                        <option value="W.P. Rope">W.P. Rope</option>
                                        <option value="W.P. Shield">W.P. Shield</option>
                                        <option value="W.P. Spear">W.P. Spear</option>
                                        <option value="W.P. Staff">W.P. Staff</option>
                                        <option value="W.P. Sword">W.P. Sword</option>
                                        <option value="W.P. Targeting">W.P. Targeting</option>
                                        <option value="W.P. Whip">W.P. Whip</option>

                                        <option disabled>Modern Weapons</option>
                                        <option value="W.P. Handguns">W.P. Handguns</option>
                                        <option value="W.P. Rifles">W.P. Rifles</option>
                                        <option value="W.P. Shotgun">W.P. Shotgun</option>
                                        <option value="W.P. Submachine-Gun">W.P. Submachine-Gun</option>
                                        <option value="W.P. Heavy Military Weapons">W.P. Heavy Military Weapons</option>
                                        <option value="W.P. Military Flamethrowers">W.P. Military Flamethrowers</option>
                                        <option value="W.P. Harpoon & Spear Gun">W.P. Harpoon & Spear Gun</option>
                                        <option value="W.P. Energy Pistol">W.P. Energy Pistol</option>
                                        <option value="W.P. Energy Rifle">W.P. Energy Rifle</option>
                                        <option value="W.P. Heavy Mega-Damage Weapons">W.P. Heavy Mega-Damage Weapons</option>
                                    </select>
                                    <span class="locked" name="attr_rpa_w1_proficiency"></span>
                                    <div class="grid grid3">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w1_strike" />
                                        <span>+<span name="attr_rpa_w1_strike_total"></span></span>
                                        <button class="ancient wops" type="roll" name="roll_rpa_w1_strike_a_wops" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_strike_a_wops)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w1_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w1_name} strike}} {{bonus=@{rpa_w1_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w1_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="ancient wps" type="roll" name="roll_rpa_w1_strike_a_wps" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_strike_a_wps)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w1_damage_wps)}} {{name=@{character_name}}} {{rollname=@{rpa_w1_name} strike}} {{bonus=@{rpa_w1_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w1_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="modern" type="roll" name="roll_rpa_w1_strike_m" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_strike_m)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w1_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w1_name} strike}} {{bonus=@{rpa_w1_strike_total}}} {{roll=[[[[1d20]]+@{rpa_w1_strike_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w1_thrown" />
                                        <span>+<span name="attr_rpa_w1_thrown_total"></span></span>
                                        <button type="roll" name="roll_rpa_w1_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_thrown)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w1_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w1_name} thrown}} {{bonus=@{rpa_w1_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{rpa_w1_thrown_total}]]}} {{raw=$[[1]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w1_aim" />
                                        <span>+<span name="attr_rpa_w1_aim_total"></span></span>
                                        <button type="roll" name="roll_rpa_w1_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_aim)}} {{name=@{character_name}}} {{rollname=@{rpa_w1_name} aim}} {{bonus=@{rpa_w1_aim_total}}} {{roll=[[[[1d20]]+@{rpa_w1_aim_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w1_burst" />
                                        <span>+<span name="attr_rpa_w1_burst_total"></span></span>
                                        <button type="roll" name="roll_rpa_w1_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_burst)}} {{name=@{character_name}}} {{rollname=@{rpa_w1_name} burst}} {{bonus=@{rpa_w1_burst_total}}} {{roll=[[[[1d20]]+@{rpa_w1_burst_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w1_parry" />
                                        <span>+<span name="attr_rpa_w1_parry_total"></span></span>
                                        <button type="roll" name="roll_rpa_w1_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_parry)}} {{name=@{character_name}}} {{rollname=@{rpa_w1_name} parry}} {{bonus=@{rpa_w1_parry_total}}} {{roll=[[[[1d20]]+@{rpa_w1_parry_total}]]}} {{raw=$[[0]]}}" />
                                    </div>

                                    <label class="notes">Notes</label>
                                    <label class="damage">Damage</label>

                                    <textarea class="unlocked notes" wrap="soft" name="attr_rpa_w1_details" placeholder="Weapon Details" ></textarea>
                                    <span class="locked notes" name="attr_rpa_w1_details"></span>

                                    <div class="grid grid4 damage">
                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w1_damage" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w1_damage_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w1_damage_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w1_damage" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w1_damage"></span>
                                        <select class="unlocked" name="attr_rpa_w1_damage_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w1_damage_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w1_damage_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_damage_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w1_name} @{rpa_w1_damage_name}}} {{damagetype=@{rpa_w1_damage_type}}} {{damageroll=@{rpa_w1_damage}}} {{critdamage=[[[[@{rpa_w1_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w1_damage_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_damage_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w1_name} @{rpa_w1_damage_name}}} {{damagetype=@{rpa_w1_damage_type}}} {{damageroll=@{rpa_w1_damage}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w1_damage}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />

                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w1_damage2" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w1_damage2_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w1_damage2_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w1_damage2" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w1_damage2"></span>
                                        <select class="unlocked" name="attr_rpa_w1_damage2_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w1_damage2_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w1_damage2_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_damage2_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w1_name} @{rpa_w1_damage2_name}}} {{damagetype=@{rpa_w1_damage2_type}}} {{damageroll=@{rpa_w1_damage2}}} {{critdamage=[[[[@{rpa_w1_damage2}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w1_damage2_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_damage2_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w1_name} @{rpa_w1_damage2_name}}} {{damagetype=@{rpa_w1_damage2_type}}} {{damageroll=@{rpa_w1_damage2}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w1_damage2}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                    </div>

                                    <label>Range</label>
                                    <label class="ancient">PS Bonus</label>
                                    <label class="modern">Payload</label>
                                    <label class="modern">Rate</label>
                                    <label class="ancient">Disarm</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w1_range" />
                                    <span class="locked" name="attr_rpa_w1_range"></span>
                                    <label class="unlocked ancient switch">
                                        <input type="checkbox" value="1" name="attr_rpa_w1_ps_bonus" />
                                        <span class="slider"></span>
                                    </label>
                                    <span class="locked ancient" name="attr_rpa_w1_ps_bonus"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w1_payload" />
                                    <span class="locked modern" name="attr_rpa_w1_payload"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w1_rate" />
                                    <span class="locked modern" name="attr_rpa_w1_rate"></span>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w1_disarm" />
                                        <span>+<span name="attr_rpa_w1_disarm_total"></span></span>
                                        <button type="roll" name="roll_rpa_w1_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w1_disarm)}} {{name=@{character_name}}} {{rollname=@{rpa_w1_name} disarm}} {{bonus=@{rpa_w1_disarm_total}}} {{roll=[[[[1d20]]+@{rpa_w1_disarm_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                </div>
                            </div>

                            <div class="page">
                                <input class="weapon-template" type="hidden" value="ancient" name="attr_rpa_w2_template" />
                                <input type="hidden" value="0" name="attr_rpa_w2_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w2_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w2_thrown_total" />
                                <input type="hidden" value="0" name="attr_rpa_w2_aim_total" />
                                <input type="hidden" value="0" name="attr_rpa_w2_burst_total" />
                                <input type="hidden" value="0" name="attr_rpa_w2_parry_total" />
                                <input type="hidden" value="0" name="attr_rpa_w2_disarm_total" />
                                <input class="weapon-ps-bonus" type="hidden" value="0" name="attr_rpa_w2_ps_bonus" />

                                <div class="grid grid-weapon">
                                    <label>Name</label>
                                    <label>Proficiency</label>
                                    <label>Strike</label>
                                    <label class="ancient">Thrown</label>
                                    <label class="modern">Aim</label>
                                    <label class="modern">Burst</label>
                                    <label class="ancient">Parry</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w2_name" placeholder="Weapon Name" />
                                    <h5 class="locked"><span name="attr_rpa_w2_name"></span></h5>
                                    <select class="unlocked" name="attr_rpa_w2_proficiency">
                                        <option value=""></option>
                                        <option value="Hand to Hand">Hand to Hand</option>
                                        <option value="Generic Melee">Generic Melee</option>
                                        <option value="Generic Ranged">Generic Ranged</option>

                                        <option disabled>Ancient Weapons</option>
                                        <option value="W.P. Archery">W.P. Archery</option>
                                        <option value="W.P. Axe">W.P. Axe</option>
                                        <option value="W.P. Blunt">W.P. Blunt</option>
                                        <option value="W.P. Chain">W.P. Chain</option>
                                        <option value="W.P. Forked">W.P. Forked</option>
                                        <option value="W.P. Grappling Hook">W.P. Grappling Hook</option>
                                        <option value="W.P. Knife">W.P. Knife</option>
                                        <option value="W.P. Paired Weapons">W.P. Paired Weapons</option>
                                        <option value="W.P. Pole Arm">W.P. Pole Arm</option>
                                        <option value="W.P. Quick Draw">W.P. Quick Draw</option>
                                        <option value="W.P. Rope">W.P. Rope</option>
                                        <option value="W.P. Shield">W.P. Shield</option>
                                        <option value="W.P. Spear">W.P. Spear</option>
                                        <option value="W.P. Staff">W.P. Staff</option>
                                        <option value="W.P. Sword">W.P. Sword</option>
                                        <option value="W.P. Targeting">W.P. Targeting</option>
                                        <option value="W.P. Whip">W.P. Whip</option>

                                        <option disabled>Modern Weapons</option>
                                        <option value="W.P. Handguns">W.P. Handguns</option>
                                        <option value="W.P. Rifles">W.P. Rifles</option>
                                        <option value="W.P. Shotgun">W.P. Shotgun</option>
                                        <option value="W.P. Submachine-Gun">W.P. Submachine-Gun</option>
                                        <option value="W.P. Heavy Military Weapons">W.P. Heavy Military Weapons</option>
                                        <option value="W.P. Military Flamethrowers">W.P. Military Flamethrowers</option>
                                        <option value="W.P. Harpoon & Spear Gun">W.P. Harpoon & Spear Gun</option>
                                        <option value="W.P. Energy Pistol">W.P. Energy Pistol</option>
                                        <option value="W.P. Energy Rifle">W.P. Energy Rifle</option>
                                        <option value="W.P. Heavy Mega-Damage Weapons">W.P. Heavy Mega-Damage Weapons</option>
                                    </select>
                                    <span class="locked" name="attr_rpa_w2_proficiency"></span>
                                    <div class="grid grid3">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w2_strike" />
                                        <span>+<span name="attr_rpa_w2_strike_total"></span></span>
                                        <button class="ancient wops" type="roll" name="roll_rpa_w2_strike_a_wops" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_strike_a_wops)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w2_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w2_name} strike}} {{bonus=@{rpa_w2_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w2_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="ancient wps" type="roll" name="roll_rpa_w2_strike_a_wps" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_strike_a_wps)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w2_damage_wps)}} {{name=@{character_name}}} {{rollname=@{rpa_w2_name} strike}} {{bonus=@{rpa_w2_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w2_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="modern" type="roll" name="roll_rpa_w2_strike_m" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_strike_m)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w2_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w2_name} strike}} {{bonus=@{rpa_w2_strike_total}}} {{roll=[[[[1d20]]+@{rpa_w2_strike_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w2_thrown" />
                                        <span>+<span name="attr_rpa_w2_thrown_total"></span></span>
                                        <button type="roll" name="roll_rpa_w2_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_thrown)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w2_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w2_name} thrown}} {{bonus=@{rpa_w2_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{rpa_w2_thrown_total}]]}} {{raw=$[[1]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w2_aim" />
                                        <span>+<span name="attr_rpa_w2_aim_total"></span></span>
                                        <button type="roll" name="roll_rpa_w2_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_aim)}} {{name=@{character_name}}} {{rollname=@{rpa_w2_name} aim}} {{bonus=@{rpa_w2_aim_total}}} {{roll=[[[[1d20]]+@{rpa_w2_aim_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w2_burst" />
                                        <span>+<span name="attr_rpa_w2_burst_total"></span></span>
                                        <button type="roll" name="roll_rpa_w2_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_burst)}} {{name=@{character_name}}} {{rollname=@{rpa_w2_name} burst}} {{bonus=@{rpa_w2_burst_total}}} {{roll=[[[[1d20]]+@{rpa_w2_burst_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w2_parry" />
                                        <span>+<span name="attr_rpa_w2_parry_total"></span></span>
                                        <button type="roll" name="roll_rpa_w2_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_parry)}} {{name=@{character_name}}} {{rollname=@{rpa_w2_name} parry}} {{bonus=@{rpa_w2_parry_total}}} {{roll=[[[[1d20]]+@{rpa_w2_parry_total}]]}} {{raw=$[[0]]}}" />
                                    </div>

                                    <label class="notes">Notes</label>
                                    <label class="damage">Damage</label>

                                    <textarea class="unlocked notes" wrap="soft" name="attr_rpa_w2_details" placeholder="Weapon Details" ></textarea>
                                    <span class="locked notes" name="attr_rpa_w2_details"></span>

                                    <div class="grid grid4 damage">
                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w2_damage" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w2_damage_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w2_damage_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w2_damage" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w2_damage"></span>
                                        <select class="unlocked" name="attr_rpa_w2_damage_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w2_damage_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w2_damage_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_damage_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w2_name} @{rpa_w2_damage_name}}} {{damagetype=@{rpa_w2_damage_type}}} {{damageroll=@{rpa_w2_damage}}} {{critdamage=[[[[@{rpa_w2_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w2_damage_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_damage_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w2_name} @{rpa_w2_damage_name}}} {{damagetype=@{rpa_w2_damage_type}}} {{damageroll=@{rpa_w2_damage}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w2_damage}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />

                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w2_damage2" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w2_damage2_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w2_damage2_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w2_damage2" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w2_damage2"></span>
                                        <select class="unlocked" name="attr_rpa_w2_damage2_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w2_damage2_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w2_damage2_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_damage2_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w2_name} @{rpa_w2_damage2_name}}} {{damagetype=@{rpa_w2_damage2_type}}} {{damageroll=@{rpa_w2_damage2}}} {{critdamage=[[[[@{rpa_w2_damage2}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w2_damage2_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_damage2_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w2_name} @{rpa_w2_damage2_name}}} {{damagetype=@{rpa_w2_damage2_type}}} {{damageroll=@{rpa_w2_damage2}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w2_damage2}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                    </div>

                                    <label>Range</label>
                                    <label class="ancient">PS Bonus</label>
                                    <label class="modern">Payload</label>
                                    <label class="modern">Rate</label>
                                    <label class="ancient">Disarm</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w2_range" />
                                    <span class="locked" name="attr_rpa_w2_range"></span>
                                    <label class="unlocked ancient switch">
                                        <input type="checkbox" value="1" name="attr_rpa_w2_ps_bonus" />
                                        <span class="slider"></span>
                                    </label>
                                    <span class="locked ancient" name="attr_rpa_w2_ps_bonus"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w2_payload" />
                                    <span class="locked modern" name="attr_rpa_w2_payload"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w2_rate" />
                                    <span class="locked modern" name="attr_rpa_w2_rate"></span>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w2_disarm" />
                                        <span>+<span name="attr_rpa_w2_disarm_total"></span></span>
                                        <button type="roll" name="roll_rpa_w2_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w2_disarm)}} {{name=@{character_name}}} {{rollname=@{rpa_w2_name} disarm}} {{bonus=@{rpa_w2_disarm_total}}} {{roll=[[[[1d20]]+@{rpa_w2_disarm_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                </div>
                            </div>

                            <div class="page">
                                <input class="weapon-template" type="hidden" value="ancient" name="attr_rpa_w3_template" />
                                <input type="hidden" value="0" name="attr_rpa_w3_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w3_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w3_thrown_total" />
                                <input type="hidden" value="0" name="attr_rpa_w3_aim_total" />
                                <input type="hidden" value="0" name="attr_rpa_w3_burst_total" />
                                <input type="hidden" value="0" name="attr_rpa_w3_parry_total" />
                                <input type="hidden" value="0" name="attr_rpa_w3_disarm_total" />
                                <input class="weapon-ps-bonus" type="hidden" value="0" name="attr_rpa_w3_ps_bonus" />

                                <div class="grid grid-weapon">
                                    <label>Name</label>
                                    <label>Proficiency</label>
                                    <label>Strike</label>
                                    <label class="ancient">Thrown</label>
                                    <label class="modern">Aim</label>
                                    <label class="modern">Burst</label>
                                    <label class="ancient">Parry</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w3_name" placeholder="Weapon Name" />
                                    <h5 class="locked"><span name="attr_rpa_w3_name"></span></h5>
                                    <select class="unlocked" name="attr_rpa_w3_proficiency">
                                        <option value=""></option>
                                        <option value="Hand to Hand">Hand to Hand</option>
                                        <option value="Generic Melee">Generic Melee</option>
                                        <option value="Generic Ranged">Generic Ranged</option>

                                        <option disabled>Ancient Weapons</option>
                                        <option value="W.P. Archery">W.P. Archery</option>
                                        <option value="W.P. Axe">W.P. Axe</option>
                                        <option value="W.P. Blunt">W.P. Blunt</option>
                                        <option value="W.P. Chain">W.P. Chain</option>
                                        <option value="W.P. Forked">W.P. Forked</option>
                                        <option value="W.P. Grappling Hook">W.P. Grappling Hook</option>
                                        <option value="W.P. Knife">W.P. Knife</option>
                                        <option value="W.P. Paired Weapons">W.P. Paired Weapons</option>
                                        <option value="W.P. Pole Arm">W.P. Pole Arm</option>
                                        <option value="W.P. Quick Draw">W.P. Quick Draw</option>
                                        <option value="W.P. Rope">W.P. Rope</option>
                                        <option value="W.P. Shield">W.P. Shield</option>
                                        <option value="W.P. Spear">W.P. Spear</option>
                                        <option value="W.P. Staff">W.P. Staff</option>
                                        <option value="W.P. Sword">W.P. Sword</option>
                                        <option value="W.P. Targeting">W.P. Targeting</option>
                                        <option value="W.P. Whip">W.P. Whip</option>

                                        <option disabled>Modern Weapons</option>
                                        <option value="W.P. Handguns">W.P. Handguns</option>
                                        <option value="W.P. Rifles">W.P. Rifles</option>
                                        <option value="W.P. Shotgun">W.P. Shotgun</option>
                                        <option value="W.P. Submachine-Gun">W.P. Submachine-Gun</option>
                                        <option value="W.P. Heavy Military Weapons">W.P. Heavy Military Weapons</option>
                                        <option value="W.P. Military Flamethrowers">W.P. Military Flamethrowers</option>
                                        <option value="W.P. Harpoon & Spear Gun">W.P. Harpoon & Spear Gun</option>
                                        <option value="W.P. Energy Pistol">W.P. Energy Pistol</option>
                                        <option value="W.P. Energy Rifle">W.P. Energy Rifle</option>
                                        <option value="W.P. Heavy Mega-Damage Weapons">W.P. Heavy Mega-Damage Weapons</option>
                                    </select>
                                    <span class="locked" name="attr_rpa_w3_proficiency"></span>
                                    <div class="grid grid3">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w3_strike" />
                                        <span>+<span name="attr_rpa_w3_strike_total"></span></span>
                                        <button class="ancient wops" type="roll" name="roll_rpa_w3_strike_a_wops" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_strike_a_wops)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w3_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w3_name} strike}} {{bonus=@{rpa_w3_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w3_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="ancient wps" type="roll" name="roll_rpa_w3_strike_a_wps" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_strike_a_wps)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w3_damage_wps)}} {{name=@{character_name}}} {{rollname=@{rpa_w3_name} strike}} {{bonus=@{rpa_w3_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w3_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="modern" type="roll" name="roll_rpa_w3_strike_m" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_strike_m)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w3_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w3_name} strike}} {{bonus=@{rpa_w3_strike_total}}} {{roll=[[[[1d20]]+@{rpa_w3_strike_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w3_thrown" />
                                        <span>+<span name="attr_rpa_w3_thrown_total"></span></span>
                                        <button type="roll" name="roll_rpa_w3_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_thrown)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w3_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w3_name} thrown}} {{bonus=@{rpa_w3_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{rpa_w3_thrown_total}]]}} {{raw=$[[1]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w3_aim" />
                                        <span>+<span name="attr_rpa_w3_aim_total"></span></span>
                                        <button type="roll" name="roll_rpa_w3_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_aim)}} {{name=@{character_name}}} {{rollname=@{rpa_w3_name} aim}} {{bonus=@{rpa_w3_aim_total}}} {{roll=[[[[1d20]]+@{rpa_w3_aim_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w3_burst" />
                                        <span>+<span name="attr_rpa_w3_burst_total"></span></span>
                                        <button type="roll" name="roll_rpa_w3_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_burst)}} {{name=@{character_name}}} {{rollname=@{rpa_w3_name} burst}} {{bonus=@{rpa_w3_burst_total}}} {{roll=[[[[1d20]]+@{rpa_w3_burst_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w3_parry" />
                                        <span>+<span name="attr_rpa_w3_parry_total"></span></span>
                                        <button type="roll" name="roll_rpa_w3_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_parry)}} {{name=@{character_name}}} {{rollname=@{rpa_w3_name} parry}} {{bonus=@{rpa_w3_parry_total}}} {{roll=[[[[1d20]]+@{rpa_w3_parry_total}]]}} {{raw=$[[0]]}}" />
                                    </div>

                                    <label class="notes">Notes</label>
                                    <label class="damage">Damage</label>

                                    <textarea class="unlocked notes" wrap="soft" name="attr_rpa_w3_details" placeholder="Weapon Details" ></textarea>
                                    <span class="locked notes" name="attr_rpa_w3_details"></span>

                                    <div class="grid grid4 damage">
                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w3_damage" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w3_damage_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w3_damage_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w3_damage" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w3_damage"></span>
                                        <select class="unlocked" name="attr_rpa_w3_damage_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w3_damage_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w3_damage_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_damage_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w3_name} @{rpa_w3_damage_name}}} {{damagetype=@{rpa_w3_damage_type}}} {{damageroll=@{rpa_w3_damage}}} {{critdamage=[[[[@{rpa_w3_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w3_damage_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_damage_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w3_name} @{rpa_w3_damage_name}}} {{damagetype=@{rpa_w3_damage_type}}} {{damageroll=@{rpa_w3_damage}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w3_damage}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />

                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w3_damage2" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w3_damage2_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w3_damage2_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w3_damage2" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w3_damage2"></span>
                                        <select class="unlocked" name="attr_rpa_w3_damage2_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w3_damage2_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w3_damage2_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_damage2_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w3_name} @{rpa_w3_damage2_name}}} {{damagetype=@{rpa_w3_damage2_type}}} {{damageroll=@{rpa_w3_damage2}}} {{critdamage=[[[[@{rpa_w3_damage2}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w3_damage2_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_damage2_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w3_name} @{rpa_w3_damage2_name}}} {{damagetype=@{rpa_w3_damage2_type}}} {{damageroll=@{rpa_w3_damage2}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w3_damage2}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                    </div>

                                    <label>Range</label>
                                    <label class="ancient">PS Bonus</label>
                                    <label class="modern">Payload</label>
                                    <label class="modern">Rate</label>
                                    <label class="ancient">Disarm</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w3_range" />
                                    <span class="locked" name="attr_rpa_w3_range"></span>
                                    <label class="unlocked ancient switch">
                                        <input type="checkbox" value="1" name="attr_rpa_w3_ps_bonus" />
                                        <span class="slider"></span>
                                    </label>
                                    <span class="locked ancient" name="attr_rpa_w3_ps_bonus"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w3_payload" />
                                    <span class="locked modern" name="attr_rpa_w3_payload"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w3_rate" />
                                    <span class="locked modern" name="attr_rpa_w3_rate"></span>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w3_disarm" />
                                        <span>+<span name="attr_rpa_w3_disarm_total"></span></span>
                                        <button type="roll" name="roll_rpa_w3_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w3_disarm)}} {{name=@{character_name}}} {{rollname=@{rpa_w3_name} disarm}} {{bonus=@{rpa_w3_disarm_total}}} {{roll=[[[[1d20]]+@{rpa_w3_disarm_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                </div>
                            </div>

                            <div class="page">
                                <input class="weapon-template" type="hidden" value="ancient" name="attr_rpa_w4_template" />
                                <input type="hidden" value="0" name="attr_rpa_w4_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w4_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w4_thrown_total" />
                                <input type="hidden" value="0" name="attr_rpa_w4_aim_total" />
                                <input type="hidden" value="0" name="attr_rpa_w4_burst_total" />
                                <input type="hidden" value="0" name="attr_rpa_w4_parry_total" />
                                <input type="hidden" value="0" name="attr_rpa_w4_disarm_total" />
                                <input class="weapon-ps-bonus" type="hidden" value="0" name="attr_rpa_w4_ps_bonus" />

                                <div class="grid grid-weapon">
                                    <label>Name</label>
                                    <label>Proficiency</label>
                                    <label>Strike</label>
                                    <label class="ancient">Thrown</label>
                                    <label class="modern">Aim</label>
                                    <label class="modern">Burst</label>
                                    <label class="ancient">Parry</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w4_name" placeholder="Weapon Name" />
                                    <h5 class="locked"><span name="attr_rpa_w4_name"></span></h5>
                                    <select class="unlocked" name="attr_rpa_w4_proficiency">
                                        <option value=""></option>
                                        <option value="Hand to Hand">Hand to Hand</option>
                                        <option value="Generic Melee">Generic Melee</option>
                                        <option value="Generic Ranged">Generic Ranged</option>

                                        <option disabled>Ancient Weapons</option>
                                        <option value="W.P. Archery">W.P. Archery</option>
                                        <option value="W.P. Axe">W.P. Axe</option>
                                        <option value="W.P. Blunt">W.P. Blunt</option>
                                        <option value="W.P. Chain">W.P. Chain</option>
                                        <option value="W.P. Forked">W.P. Forked</option>
                                        <option value="W.P. Grappling Hook">W.P. Grappling Hook</option>
                                        <option value="W.P. Knife">W.P. Knife</option>
                                        <option value="W.P. Paired Weapons">W.P. Paired Weapons</option>
                                        <option value="W.P. Pole Arm">W.P. Pole Arm</option>
                                        <option value="W.P. Quick Draw">W.P. Quick Draw</option>
                                        <option value="W.P. Rope">W.P. Rope</option>
                                        <option value="W.P. Shield">W.P. Shield</option>
                                        <option value="W.P. Spear">W.P. Spear</option>
                                        <option value="W.P. Staff">W.P. Staff</option>
                                        <option value="W.P. Sword">W.P. Sword</option>
                                        <option value="W.P. Targeting">W.P. Targeting</option>
                                        <option value="W.P. Whip">W.P. Whip</option>

                                        <option disabled>Modern Weapons</option>
                                        <option value="W.P. Handguns">W.P. Handguns</option>
                                        <option value="W.P. Rifles">W.P. Rifles</option>
                                        <option value="W.P. Shotgun">W.P. Shotgun</option>
                                        <option value="W.P. Submachine-Gun">W.P. Submachine-Gun</option>
                                        <option value="W.P. Heavy Military Weapons">W.P. Heavy Military Weapons</option>
                                        <option value="W.P. Military Flamethrowers">W.P. Military Flamethrowers</option>
                                        <option value="W.P. Harpoon & Spear Gun">W.P. Harpoon & Spear Gun</option>
                                        <option value="W.P. Energy Pistol">W.P. Energy Pistol</option>
                                        <option value="W.P. Energy Rifle">W.P. Energy Rifle</option>
                                        <option value="W.P. Heavy Mega-Damage Weapons">W.P. Heavy Mega-Damage Weapons</option>
                                    </select>
                                    <span class="locked" name="attr_rpa_w4_proficiency"></span>
                                    <div class="grid grid3">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w4_strike" />
                                        <span>+<span name="attr_rpa_w4_strike_total"></span></span>
                                        <button class="ancient wops" type="roll" name="roll_rpa_w4_strike_a_wops" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_strike_a_wops)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w4_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w4_name} strike}} {{bonus=@{rpa_w4_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w4_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="ancient wps" type="roll" name="roll_rpa_w4_strike_a_wps" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_strike_a_wps)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w4_damage_wps)}} {{name=@{character_name}}} {{rollname=@{rpa_w4_name} strike}} {{bonus=@{rpa_w4_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w4_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="modern" type="roll" name="roll_rpa_w4_strike_m" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_strike_m)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w4_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w4_name} strike}} {{bonus=@{rpa_w4_strike_total}}} {{roll=[[[[1d20]]+@{rpa_w4_strike_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w4_thrown" />
                                        <span>+<span name="attr_rpa_w4_thrown_total"></span></span>
                                        <button type="roll" name="roll_rpa_w4_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_thrown)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w4_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w4_name} thrown}} {{bonus=@{rpa_w4_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{rpa_w4_thrown_total}]]}} {{raw=$[[1]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w4_aim" />
                                        <span>+<span name="attr_rpa_w4_aim_total"></span></span>
                                        <button type="roll" name="roll_rpa_w4_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_aim)}} {{name=@{character_name}}} {{rollname=@{rpa_w4_name} aim}} {{bonus=@{rpa_w4_aim_total}}} {{roll=[[[[1d20]]+@{rpa_w4_aim_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w4_burst" />
                                        <span>+<span name="attr_rpa_w4_burst_total"></span></span>
                                        <button type="roll" name="roll_rpa_w4_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_burst)}} {{name=@{character_name}}} {{rollname=@{rpa_w4_name} burst}} {{bonus=@{rpa_w4_burst_total}}} {{roll=[[[[1d20]]+@{rpa_w4_burst_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w4_parry" />
                                        <span>+<span name="attr_rpa_w4_parry_total"></span></span>
                                        <button type="roll" name="roll_rpa_w4_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_parry)}} {{name=@{character_name}}} {{rollname=@{rpa_w4_name} parry}} {{bonus=@{rpa_w4_parry_total}}} {{roll=[[[[1d20]]+@{rpa_w4_parry_total}]]}} {{raw=$[[0]]}}" />
                                    </div>

                                    <label class="notes">Notes</label>
                                    <label class="damage">Damage</label>

                                    <textarea class="unlocked notes" wrap="soft" name="attr_rpa_w4_details" placeholder="Weapon Details" ></textarea>
                                    <span class="locked notes" name="attr_rpa_w4_details"></span>

                                    <div class="grid grid4 damage">
                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w4_damage" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w4_damage_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w4_damage_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w4_damage" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w4_damage"></span>
                                        <select class="unlocked" name="attr_rpa_w4_damage_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w4_damage_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w4_damage_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_damage_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w4_name} @{rpa_w4_damage_name}}} {{damagetype=@{rpa_w4_damage_type}}} {{damageroll=@{rpa_w4_damage}}} {{critdamage=[[[[@{rpa_w4_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w4_damage_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_damage_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w4_name} @{rpa_w4_damage_name}}} {{damagetype=@{rpa_w4_damage_type}}} {{damageroll=@{rpa_w4_damage}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w4_damage}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />

                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w4_damage2" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w4_damage2_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w4_damage2_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w4_damage2" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w4_damage2"></span>
                                        <select class="unlocked" name="attr_rpa_w4_damage2_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w4_damage2_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w4_damage2_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_damage2_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w4_name} @{rpa_w4_damage2_name}}} {{damagetype=@{rpa_w4_damage2_type}}} {{damageroll=@{rpa_w4_damage2}}} {{critdamage=[[[[@{rpa_w4_damage2}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w4_damage2_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_damage2_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w4_name} @{rpa_w4_damage2_name}}} {{damagetype=@{rpa_w4_damage2_type}}} {{damageroll=@{rpa_w4_damage2}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w4_damage2}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                    </div>

                                    <label>Range</label>
                                    <label class="ancient">PS Bonus</label>
                                    <label class="modern">Payload</label>
                                    <label class="modern">Rate</label>
                                    <label class="ancient">Disarm</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w4_range" />
                                    <span class="locked" name="attr_rpa_w4_range"></span>
                                    <label class="unlocked ancient switch">
                                        <input type="checkbox" value="1" name="attr_rpa_w4_ps_bonus" />
                                        <span class="slider"></span>
                                    </label>
                                    <span class="locked ancient" name="attr_rpa_w4_ps_bonus"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w4_payload" />
                                    <span class="locked modern" name="attr_rpa_w4_payload"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w4_rate" />
                                    <span class="locked modern" name="attr_rpa_w4_rate"></span>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w4_disarm" />
                                        <span>+<span name="attr_rpa_w4_disarm_total"></span></span>
                                        <button type="roll" name="roll_rpa_w4_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w4_disarm)}} {{name=@{character_name}}} {{rollname=@{rpa_w4_name} disarm}} {{bonus=@{rpa_w4_disarm_total}}} {{roll=[[[[1d20]]+@{rpa_w4_disarm_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                </div>
                            </div>

                            <div class="page">
                                <input class="weapon-template" type="hidden" value="ancient" name="attr_rpa_w5_template" />
                                <input type="hidden" value="0" name="attr_rpa_w5_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w5_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w5_thrown_total" />
                                <input type="hidden" value="0" name="attr_rpa_w5_aim_total" />
                                <input type="hidden" value="0" name="attr_rpa_w5_burst_total" />
                                <input type="hidden" value="0" name="attr_rpa_w5_parry_total" />
                                <input type="hidden" value="0" name="attr_rpa_w5_disarm_total" />
                                <input class="weapon-ps-bonus" type="hidden" value="0" name="attr_rpa_w5_ps_bonus" />

                                <div class="grid grid-weapon">
                                    <label>Name</label>
                                    <label>Proficiency</label>
                                    <label>Strike</label>
                                    <label class="ancient">Thrown</label>
                                    <label class="modern">Aim</label>
                                    <label class="modern">Burst</label>
                                    <label class="ancient">Parry</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w5_name" placeholder="Weapon Name" />
                                    <h5 class="locked"><span name="attr_rpa_w5_name"></span></h5>
                                    <select class="unlocked" name="attr_rpa_w5_proficiency">
                                        <option value=""></option>
                                        <option value="Hand to Hand">Hand to Hand</option>
                                        <option value="Generic Melee">Generic Melee</option>
                                        <option value="Generic Ranged">Generic Ranged</option>

                                        <option disabled>Ancient Weapons</option>
                                        <option value="W.P. Archery">W.P. Archery</option>
                                        <option value="W.P. Axe">W.P. Axe</option>
                                        <option value="W.P. Blunt">W.P. Blunt</option>
                                        <option value="W.P. Chain">W.P. Chain</option>
                                        <option value="W.P. Forked">W.P. Forked</option>
                                        <option value="W.P. Grappling Hook">W.P. Grappling Hook</option>
                                        <option value="W.P. Knife">W.P. Knife</option>
                                        <option value="W.P. Paired Weapons">W.P. Paired Weapons</option>
                                        <option value="W.P. Pole Arm">W.P. Pole Arm</option>
                                        <option value="W.P. Quick Draw">W.P. Quick Draw</option>
                                        <option value="W.P. Rope">W.P. Rope</option>
                                        <option value="W.P. Shield">W.P. Shield</option>
                                        <option value="W.P. Spear">W.P. Spear</option>
                                        <option value="W.P. Staff">W.P. Staff</option>
                                        <option value="W.P. Sword">W.P. Sword</option>
                                        <option value="W.P. Targeting">W.P. Targeting</option>
                                        <option value="W.P. Whip">W.P. Whip</option>

                                        <option disabled>Modern Weapons</option>
                                        <option value="W.P. Handguns">W.P. Handguns</option>
                                        <option value="W.P. Rifles">W.P. Rifles</option>
                                        <option value="W.P. Shotgun">W.P. Shotgun</option>
                                        <option value="W.P. Submachine-Gun">W.P. Submachine-Gun</option>
                                        <option value="W.P. Heavy Military Weapons">W.P. Heavy Military Weapons</option>
                                        <option value="W.P. Military Flamethrowers">W.P. Military Flamethrowers</option>
                                        <option value="W.P. Harpoon & Spear Gun">W.P. Harpoon & Spear Gun</option>
                                        <option value="W.P. Energy Pistol">W.P. Energy Pistol</option>
                                        <option value="W.P. Energy Rifle">W.P. Energy Rifle</option>
                                        <option value="W.P. Heavy Mega-Damage Weapons">W.P. Heavy Mega-Damage Weapons</option>
                                    </select>
                                    <span class="locked" name="attr_rpa_w5_proficiency"></span>
                                    <div class="grid grid3">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w5_strike" />
                                        <span>+<span name="attr_rpa_w5_strike_total"></span></span>
                                        <button class="ancient wops" type="roll" name="roll_rpa_w5_strike_a_wops" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_strike_a_wops)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w5_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w5_name} strike}} {{bonus=@{rpa_w5_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w5_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="ancient wps" type="roll" name="roll_rpa_w5_strike_a_wps" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_strike_a_wps)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w5_damage_wps)}} {{name=@{character_name}}} {{rollname=@{rpa_w5_name} strike}} {{bonus=@{rpa_w5_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w5_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="modern" type="roll" name="roll_rpa_w5_strike_m" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_strike_m)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w5_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w5_name} strike}} {{bonus=@{rpa_w5_strike_total}}} {{roll=[[[[1d20]]+@{rpa_w5_strike_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w5_thrown" />
                                        <span>+<span name="attr_rpa_w5_thrown_total"></span></span>
                                        <button type="roll" name="roll_rpa_w5_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_thrown)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w5_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w5_name} thrown}} {{bonus=@{rpa_w5_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{rpa_w5_thrown_total}]]}} {{raw=$[[1]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w5_aim" />
                                        <span>+<span name="attr_rpa_w5_aim_total"></span></span>
                                        <button type="roll" name="roll_rpa_w5_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_aim)}} {{name=@{character_name}}} {{rollname=@{rpa_w5_name} aim}} {{bonus=@{rpa_w5_aim_total}}} {{roll=[[[[1d20]]+@{rpa_w5_aim_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w5_burst" />
                                        <span>+<span name="attr_rpa_w5_burst_total"></span></span>
                                        <button type="roll" name="roll_rpa_w5_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_burst)}} {{name=@{character_name}}} {{rollname=@{rpa_w5_name} burst}} {{bonus=@{rpa_w5_burst_total}}} {{roll=[[[[1d20]]+@{rpa_w5_burst_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w5_parry" />
                                        <span>+<span name="attr_rpa_w5_parry_total"></span></span>
                                        <button type="roll" name="roll_rpa_w5_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_parry)}} {{name=@{character_name}}} {{rollname=@{rpa_w5_name} parry}} {{bonus=@{rpa_w5_parry_total}}} {{roll=[[[[1d20]]+@{rpa_w5_parry_total}]]}} {{raw=$[[0]]}}" />
                                    </div>

                                    <label class="notes">Notes</label>
                                    <label class="damage">Damage</label>

                                    <textarea class="unlocked notes" wrap="soft" name="attr_rpa_w5_details" placeholder="Weapon Details" ></textarea>
                                    <span class="locked notes" name="attr_rpa_w5_details"></span>

                                    <div class="grid grid4 damage">
                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w5_damage" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w5_damage_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w5_damage_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w5_damage" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w5_damage"></span>
                                        <select class="unlocked" name="attr_rpa_w5_damage_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w5_damage_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w5_damage_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_damage_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w5_name} @{rpa_w5_damage_name}}} {{damagetype=@{rpa_w5_damage_type}}} {{damageroll=@{rpa_w5_damage}}} {{critdamage=[[[[@{rpa_w5_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w5_damage_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_damage_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w5_name} @{rpa_w5_damage_name}}} {{damagetype=@{rpa_w5_damage_type}}} {{damageroll=@{rpa_w5_damage}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w5_damage}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />

                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w5_damage2" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w5_damage2_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w5_damage2_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w5_damage2" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w5_damage2"></span>
                                        <select class="unlocked" name="attr_rpa_w5_damage2_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w5_damage2_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w5_damage2_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_damage2_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w5_name} @{rpa_w5_damage2_name}}} {{damagetype=@{rpa_w5_damage2_type}}} {{damageroll=@{rpa_w5_damage2}}} {{critdamage=[[[[@{rpa_w5_damage2}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w5_damage2_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_damage2_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w5_name} @{rpa_w5_damage2_name}}} {{damagetype=@{rpa_w5_damage2_type}}} {{damageroll=@{rpa_w5_damage2}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w5_damage2}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                    </div>

                                    <label>Range</label>
                                    <label class="ancient">PS Bonus</label>
                                    <label class="modern">Payload</label>
                                    <label class="modern">Rate</label>
                                    <label class="ancient">Disarm</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w5_range" />
                                    <span class="locked" name="attr_rpa_w5_range"></span>
                                    <label class="unlocked ancient switch">
                                        <input type="checkbox" value="1" name="attr_rpa_w5_ps_bonus" />
                                        <span class="slider"></span>
                                    </label>
                                    <span class="locked ancient" name="attr_rpa_w5_ps_bonus"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w5_payload" />
                                    <span class="locked modern" name="attr_rpa_w5_payload"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w5_rate" />
                                    <span class="locked modern" name="attr_rpa_w5_rate"></span>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w5_disarm" />
                                        <span>+<span name="attr_rpa_w5_disarm_total"></span></span>
                                        <button type="roll" name="roll_rpa_w5_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w5_disarm)}} {{name=@{character_name}}} {{rollname=@{rpa_w5_name} disarm}} {{bonus=@{rpa_w5_disarm_total}}} {{roll=[[[[1d20]]+@{rpa_w5_disarm_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                </div>
                            </div>

                            <div class="page">
                                <input class="weapon-template" type="hidden" value="ancient" name="attr_rpa_w6_template" />
                                <input type="hidden" value="0" name="attr_rpa_w6_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w6_strike_total" />
                                <input type="hidden" value="0" name="attr_rpa_w6_thrown_total" />
                                <input type="hidden" value="0" name="attr_rpa_w6_aim_total" />
                                <input type="hidden" value="0" name="attr_rpa_w6_burst_total" />
                                <input type="hidden" value="0" name="attr_rpa_w6_parry_total" />
                                <input type="hidden" value="0" name="attr_rpa_w6_disarm_total" />
                                <input class="weapon-ps-bonus" type="hidden" value="0" name="attr_rpa_w6_ps_bonus" />

                                <div class="grid grid-weapon">
                                    <label>Name</label>
                                    <label>Proficiency</label>
                                    <label>Strike</label>
                                    <label class="ancient">Thrown</label>
                                    <label class="modern">Aim</label>
                                    <label class="modern">Burst</label>
                                    <label class="ancient">Parry</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w6_name" placeholder="Weapon Name" />
                                    <h5 class="locked"><span name="attr_rpa_w6_name"></span></h5>
                                    <select class="unlocked" name="attr_rpa_w6_proficiency">
                                        <option value=""></option>
                                        <option value="Hand to Hand">Hand to Hand</option>
                                        <option value="Generic Melee">Generic Melee</option>
                                        <option value="Generic Ranged">Generic Ranged</option>

                                        <option disabled>Ancient Weapons</option>
                                        <option value="W.P. Archery">W.P. Archery</option>
                                        <option value="W.P. Axe">W.P. Axe</option>
                                        <option value="W.P. Blunt">W.P. Blunt</option>
                                        <option value="W.P. Chain">W.P. Chain</option>
                                        <option value="W.P. Forked">W.P. Forked</option>
                                        <option value="W.P. Grappling Hook">W.P. Grappling Hook</option>
                                        <option value="W.P. Knife">W.P. Knife</option>
                                        <option value="W.P. Paired Weapons">W.P. Paired Weapons</option>
                                        <option value="W.P. Pole Arm">W.P. Pole Arm</option>
                                        <option value="W.P. Quick Draw">W.P. Quick Draw</option>
                                        <option value="W.P. Rope">W.P. Rope</option>
                                        <option value="W.P. Shield">W.P. Shield</option>
                                        <option value="W.P. Spear">W.P. Spear</option>
                                        <option value="W.P. Staff">W.P. Staff</option>
                                        <option value="W.P. Sword">W.P. Sword</option>
                                        <option value="W.P. Targeting">W.P. Targeting</option>
                                        <option value="W.P. Whip">W.P. Whip</option>

                                        <option disabled>Modern Weapons</option>
                                        <option value="W.P. Handguns">W.P. Handguns</option>
                                        <option value="W.P. Rifles">W.P. Rifles</option>
                                        <option value="W.P. Shotgun">W.P. Shotgun</option>
                                        <option value="W.P. Submachine-Gun">W.P. Submachine-Gun</option>
                                        <option value="W.P. Heavy Military Weapons">W.P. Heavy Military Weapons</option>
                                        <option value="W.P. Military Flamethrowers">W.P. Military Flamethrowers</option>
                                        <option value="W.P. Harpoon & Spear Gun">W.P. Harpoon & Spear Gun</option>
                                        <option value="W.P. Energy Pistol">W.P. Energy Pistol</option>
                                        <option value="W.P. Energy Rifle">W.P. Energy Rifle</option>
                                        <option value="W.P. Heavy Mega-Damage Weapons">W.P. Heavy Mega-Damage Weapons</option>
                                    </select>
                                    <span class="locked" name="attr_rpa_w6_proficiency"></span>
                                    <div class="grid grid3">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w6_strike" />
                                        <span>+<span name="attr_rpa_w6_strike_total"></span></span>
                                        <button class="ancient wops" type="roll" name="roll_rpa_w6_strike_a_wops" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_strike_a_wops)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w6_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w6_name} strike}} {{bonus=@{rpa_w6_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w6_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="ancient wps" type="roll" name="roll_rpa_w6_strike_a_wps" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_strike_a_wps)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w6_damage_wps)}} {{name=@{character_name}}} {{rollname=@{rpa_w6_name} strike}} {{bonus=@{rpa_w6_strike_total}}} {{critical=[[@{hth_critical}]]}} {{roll=[[[[1d20]]+@{rpa_w6_strike_total}]]}} {{raw=$[[1]]}}" />
                                        <button class="modern" type="roll" name="roll_rpa_w6_strike_m" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_strike_m)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w6_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w6_name} strike}} {{bonus=@{rpa_w6_strike_total}}} {{roll=[[[[1d20]]+@{rpa_w6_strike_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w6_thrown" />
                                        <span>+<span name="attr_rpa_w6_thrown_total"></span></span>
                                        <button type="roll" name="roll_rpa_w6_thrown" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_thrown)}} {{dmgroll=[Damage](~repeating_rpa_rpa_w6_damage_wops)}} {{name=@{character_name}}} {{rollname=@{rpa_w6_name} thrown}} {{bonus=@{rpa_w6_thrown_total}}} {{critical=[[19]]}} {{roll=[[[[1d20]]+@{rpa_w6_thrown_total}]]}} {{raw=$[[1]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w6_aim" />
                                        <span>+<span name="attr_rpa_w6_aim_total"></span></span>
                                        <button type="roll" name="roll_rpa_w6_aim" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_aim)}} {{name=@{character_name}}} {{rollname=@{rpa_w6_name} aim}} {{bonus=@{rpa_w6_aim_total}}} {{roll=[[[[1d20]]+@{rpa_w6_aim_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 modern">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w6_burst" />
                                        <span>+<span name="attr_rpa_w6_burst_total"></span></span>
                                        <button type="roll" name="roll_rpa_w6_burst" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_burst)}} {{name=@{character_name}}} {{rollname=@{rpa_w6_name} burst}} {{bonus=@{rpa_w6_burst_total}}} {{roll=[[[[1d20]]+@{rpa_w6_burst_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w6_parry" />
                                        <span>+<span name="attr_rpa_w6_parry_total"></span></span>
                                        <button type="roll" name="roll_rpa_w6_parry" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_parry)}} {{name=@{character_name}}} {{rollname=@{rpa_w6_name} parry}} {{bonus=@{rpa_w6_parry_total}}} {{roll=[[[[1d20]]+@{rpa_w6_parry_total}]]}} {{raw=$[[0]]}}" />
                                    </div>

                                    <label class="notes">Notes</label>
                                    <label class="damage">Damage</label>

                                    <textarea class="unlocked notes" wrap="soft" name="attr_rpa_w6_details" placeholder="Weapon Details" ></textarea>
                                    <span class="locked notes" name="attr_rpa_w6_details"></span>

                                    <div class="grid grid4 damage">
                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w6_damage" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w6_damage_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w6_damage_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w6_damage" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w6_damage"></span>
                                        <select class="unlocked" name="attr_rpa_w6_damage_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w6_damage_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w6_damage_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_damage_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w6_name} @{rpa_w6_damage_name}}} {{damagetype=@{rpa_w6_damage_type}}} {{damageroll=@{rpa_w6_damage}}} {{critdamage=[[[[@{rpa_w6_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w6_damage_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_damage_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w6_name} @{rpa_w6_damage_name}}} {{damagetype=@{rpa_w6_damage_type}}} {{damageroll=@{rpa_w6_damage}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w6_damage}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />

                                        <input class="weapon-damage" type="hidden" name="attr_rpa_w6_damage2" value="" />
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w6_damage2_name" placeholder="Single Shot, Burst, etc." />
                                        <h5 class="locked"><span name="attr_rpa_w6_damage2_name"></span></h5>
                                        <input class="unlocked" type="text" value="" name="attr_rpa_w6_damage2" placeholder="xdy+z" />
                                        <span class="locked" name="attr_rpa_w6_damage2"></span>
                                        <select class="unlocked" name="attr_rpa_w6_damage2_type">
                                            <option value=""></option>
                                            <option value="S.D.C.">S.D.C.</option>
                                            <option value="M.D.">M.D.</option>
                                        </select>
                                        <span class="locked" name="attr_rpa_w6_damage2_type"></span>
                                        <button class="wops dmg" type="roll" name="roll_rpa_w6_damage2_wops" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_damage2_wops)}} {{name=@{character_name}}} {{damagename=@{rpa_w6_name} @{rpa_w6_damage2_name}}} {{damagetype=@{rpa_w6_damage2_type}}} {{damageroll=@{rpa_w6_damage2}}} {{critdamage=[[[[@{rpa_w6_damage2}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                        <button class="wps dmg" type="roll" name="roll_rpa_w6_damage2_wps" value="&{template:damage} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_damage2_wps)}} {{name=@{character_name}}} {{damagename=@{rpa_w6_name} @{rpa_w6_damage2_name}}} {{damagetype=@{rpa_w6_damage2_type}}} {{damageroll=@{rpa_w6_damage2}+@{ps_hth_damage}}} {{critdamage=[[[[@{rpa_w6_damage2}+@{ps_hth_damage}]]*[[2]]]]}} {{damage=$[[0]]}}" />
                                    </div>

                                    <label>Range</label>
                                    <label class="ancient">PS Bonus</label>
                                    <label class="modern">Payload</label>
                                    <label class="modern">Rate</label>
                                    <label class="ancient">Disarm</label>

                                    <input class="unlocked" type="text" value="" name="attr_rpa_w6_range" />
                                    <span class="locked" name="attr_rpa_w6_range"></span>
                                    <label class="unlocked ancient switch">
                                        <input type="checkbox" value="1" name="attr_rpa_w6_ps_bonus" />
                                        <span class="slider"></span>
                                    </label>
                                    <span class="locked ancient" name="attr_rpa_w6_ps_bonus"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w6_payload" />
                                    <span class="locked modern" name="attr_rpa_w6_payload"></span>
                                    <input class="unlocked modern" type="text" value="0" name="attr_rpa_w6_rate" />
                                    <span class="locked modern" name="attr_rpa_w6_rate"></span>
                                    <div class="grid grid3 ancient">
                                        <input class="unlocked" type="number" value="0" name="attr_rpa_w6_disarm" />
                                        <span>+<span name="attr_rpa_w6_disarm_total"></span></span>
                                        <button type="roll" name="roll_rpa_w6_disarm" value="&{template:d20} @{roll_template_token} {{reroll=[Reroll](~repeating_rpa_rpa_w6_disarm)}} {{name=@{character_name}}} {{rollname=@{rpa_w6_name} disarm}} {{bonus=@{rpa_w6_disarm_total}}} {{roll=[[[[1d20]]+@{rpa_w6_disarm_total}]]}} {{raw=$[[0]]}}" />
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="grid grid2 sticker">
                        <h4>Details</h4>
                        <textarea class="unlocked" wrap="soft" name="attr_rpa_details" placeholder="Robot Details" ></textarea>
                        <span class="locked" name="attr_rpa_details" ></span>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="grid gear">
            <h3>Gear</h3>

            <fieldset class="repeating_gear">
                <div class="grid">
                    <div class="grid grid3">
                        <label>Item</label>
                        <label>Reference</label>
                        <label>Location</label>

                        <input type="text" value="" name="attr_gear_name" placeholder="Gear Name" />
                        <input type="text" value="" name="attr_gear_reference" placeholder="Book and page number" />
                        <input type="text" value="" name="attr_gear_location" placeholder="Worn, pouch, bank, etc." />
                    </div>
                    <textarea wrap="soft" name="attr_gear_details" placeholder="Gear Details" ></textarea>
                </div>
            </fieldset>
        </div>

        <div class="grid consumables">
            <h3>Consumables</h3>

            <fieldset class="repeating_consumable">
                <div class="grid">
                    <div class="grid grid3">
                        <label>Consumable Item</label>
                        <label>Reference</label>
                        <label>Location</label>

                        <input type="text" value="" name="attr_consumable_name" placeholder="Consumable Name" />
                        <input type="text" value="" name="attr_consumable_reference" placeholder="Book and page number" />
                        <input type="text" value="" name="attr_consumable_location" placeholder="Worn, pouch, bank, etc." />
                    </div>
                    <textarea wrap="soft" name="attr_consumable_details" placeholder="Consumable Item Details" ></textarea>
                </div>
            </fieldset>
        </div>

        <div class="grid wealth">
            <h3>Wealth</h3>

            <fieldset class="repeating_wealth">
                <div class="grid">
                    <div class="grid grid3">
                        <label>Wealth Entry</label>
                        <label>Worth</label>
                        <label>Location</label>

                        <input type="text" value="" name="attr_wealth_name" placeholder="Salary, cash, valuable, etc" />
                        <input type="text" value="" name="attr_wealth_worthe" placeholder="Value" />
                        <input type="text" value="" name="attr_wealth_location" placeholder="Wallet, pouch, bank, etc." />
                    </div>
                    <textarea wrap="soft" name="attr_wealth_details" placeholder="Wealth item details, if any" ></textarea>
                </div>
            </fieldset>
        </div>
    </div>

    <div class="grid minions">
        <h2>Minions</h2>

        <div class="tabbed-panel">
            <div class="row-panel">
                <fieldset class="repeating_minion">
                    <table style="width:90%">
                        <tr>
                            <td><h5>Name</h5></td>
                            <td><h5>Type</h5></td>
                            <td><h5>Book & Page Reference</h5></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><div class="ability"><input class="input-center-aligned" type="text" value="" name="attr_minion_name" placeholder="Name of minion"/></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="text" value="" name="attr_minion_type" placeholder="Animal, robot, etc." /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="text" value="" name="attr_minion_reference" placeholder="Book & page number"/></div></td>
                            <td></td>
                        </tr>
                    </table>
                    <table style="width:90%">
                        <tr>
                            <td><select name="attr_minion_dc_select" value="0" style="width:80px">
                                    <option value="0"> </option>
                                    <option value="S.D.C.">S.D.C.</option>
                                    <option value="M.D.C.">M.D.C.</option>
                                </select></td>
                            <td><h5>H.P.</h5></td>
                            <td><h5>P.P.E.</h5></td>
                            <td><h5>APM</h5></td>
                        </tr>
                        <tr>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_dc" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_hp" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_ppe" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_apm" /></div></td>
                        </tr>
                        <tr>
                            <td><h5>Initiative</h5></td>
                            <td><h5>Damage</h5></td>
                            <td><h5>Strike</h5></td>
                            <td><h5>Parry</h5></td>
                            <td><h5>Dodge</h5></td>
                            <td><h5>Roll</h5></td>
                            <td><h5>Tear</h5></td>
                        </tr>
                        <tr>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_init"  /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_damage" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_strike" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_parry" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_dodge" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_roll" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_tear" /></div></td>
                        </tr>
                        <tr>
                            <td><h5>Restr. Punch</h5></td>
                            <td><h5>Punch</h5></td>
                            <td><h5>Power</h5></td>
                            <td><h5>Stomp</h5></td>
                            <td><h5>Kick</h5></td>
                            <td><h5>Leap Kick</h5></td>
                            <td><h5>Body Flip/Throw</h5></td>
                            <td><h5>Body Block/Tackle</h5></td>
                        </tr>
                        <tr>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_rpunch"  /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_punch" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_power" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_stomp" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_kick" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_leapkick" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_bodyflip" /></div></td>
                            <td><div class="ability"><input class="input-center-aligned" type="number" value="" name="attr_minion_bodyblock" /></div></td>
                        </tr>
                        <tr>
                            <td colspan="2"><h5><input class="input-center-aligned" type="text" value="" name="attr_minion_ability1" placeholder="Other Ability"  /></h5></td>
                            <td colspan="2"><h5><input class="input-center-aligned" type="text" value="" name="attr_minion_ability2" placeholder="Other Ability" /></h5></td>
                            <td colspan="2"><h5><input class="input-center-aligned" type="text" value="" name="attr_minion_ability3" placeholder="Other Ability" /></h5></td>
                            <td colspan="2"><h5><input class="input-center-aligned" type="text" value="" name="attr_minion_ability4" placeholder="Other Ability" /></h5></td>
                        </tr>
                        <tr>
                            <td><h5><input class="input-center-aligned" type="number" value="" name="attr_minion_ability1_rating"  /></h5></td>
                            <td></td>
                            <td><h5><input class="input-center-aligned" type="number" value="" name="attr_minion_ability2_rating"  /></h5></td>
                            <td></td>
                            <td><h5><input class="input-center-aligned" type="number" value="" name="attr_minion_ability3_rating"  /></h5></td>
                            <td></td>
                            <td><h5><input class="input-center-aligned" type="number" value="" name="attr_minion_ability4_rating"  /></h5></td>
                            <td></td>
                        </tr>
                    </table>
                </fieldset>
            </div>
        </div>
    </div>

    <footer>
        <p>Sheet created by John W. https://app.roll20.net/users/492849/john-w</p>
        <p>With updates by Phillip G. https://app.roll20.net/users/239016/phillip-g</p>
        <p>Copyright 2013 Palladium Books Inc. MegaverseÂ© is a registered trademark of Palladium.</p>
    </footer>
</div>

<script type="text/worker">
    const buttonlist = ["basic","equipment","magic","skills","combat","minions"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });
    const equipbuttonlist = ["weapons","armor","rpa","gear","consumables","wealth"];
    equipbuttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetEquipTab: button
            });
        });
    });
    const combatbuttonlist = ["hth","robot","wp","saves"];
    combatbuttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetCombatTab: button
            });
        });
    });
    const rcbuttonlist = ["robot_basic","robot_elite1"];
    rcbuttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetRobotCombatTab: button
            });
        });
    });
    const rpawlist = ["rpaw1","rpaw2","rpaw3","rpaw4","rpaw5","rpaw6"];
    rpawlist.forEach(button => {
        on(`clicked:repeating_rpa:${button}`, function(eventInfo) {
            let update = {};
            update[`repeating_rpa_rpa_weapon_tab`] = button;
            setAttrs(update);
        });
    });

    const sortlist = ["ability_name","ability_level"];
    sortlist.forEach(button => {
        let section = button.split("_")[0];
        //console.log(section);
        on(`clicked:${button}`, function() {
            let dict = [];
            getSectionIDs(`repeating_${section}`, function(idarray) {
                let fields = [];
                for(var i=0; i < idarray.length; i++) {
                    let id = idarray[i];
                    fields.push(`repeating_${section}_${id}_${button}`);
                }
                getAttrs(fields, function(values) {
                    for(var i=0; i < idarray.length; i++) {
                        let id = idarray[i];
                        dict.push({id: id, value: values[`repeating_${section}_${id}_${button}`]});
                    };
                    dict.sort((a,b) => a.value.localeCompare(b.value));
                    //console.log(dict);
                    let sorted = dict.map(a => a.id);
                    //console.log(sorted);
                    setSectionOrder(section, sorted, function() {
                        console.log("callback");
                    });
                });
            });
        });
    });

    const current_version = "0.1"
    on("sheet:opened", function(eventInfo) {
        getAttrs(["version"], function(values) {
            let version = values.version;
            if (version == current_version) {
                console.log(`Current sheet version: ${current_version}`);
                return;
            }
            console.log(`Updating sheet to version: ${current_version}`);

            // version 0.1 updates
            update_pe(eventInfo);
            const update_0_1_map = {
                "fields": {"ps_type": "ps_type", "charactertype_select": "dc_type", "psionic_strength": "psionic_strength",
                    "ps_hth_punch_type": "dc_type", "ps_hth_kick_type": "dc_type", "ps_hth_power_punch_type": "dc_type", "ps_hth_power_kick_type": "dc_type",
                    "ps_hth_leap_kick_type": "dc_type", "ps_hth_restrained_punch_type": "dc_type", "combatskill": "combatskill",},
                "repeating": {
                    "repeating_skills": {"skill_type": "skill_type",},
                    "repeating_ability": {"ability_damage_type": "dc_type", "ability_source": "ability_source",},
                    "repeating_weapon": {"weapon_damage_type": "dc_type", "weapon_proficiency": "wp",},
                    "repeating_armor": {"armortype_select": "dc_type",},
                    "repeating_maneuvers": {"maneuver_damage_type": "dc_type",},
                },
                "ps_type": {"normal": "Normal", "augmented": "Augmented", "robot": "Robot", "supernatural": "Supernatural",},
                "dc_type": {"sdc": "S.D.C.", "mdc": "M.D.C.", "md": "M.D."},
                "skill_type": {"occ": "OCC", "related": "OCC Related", "secondary": "Secondary", "rcc": "RCC",},
                "psionic_strength": {"none": "Not Psychic", "minor": "Minor Psychic", "major": "Major Psychic", "master": "Master Psychic",},
                "ability_source": {"ppe": "P.P.E.", "isp": "I.S.P.", "chi": "Chi", "bio-e": "BIO-E",},
                "combatskill": {"non_combatant": "Non-Combatant", "basic": "Basic", "expert": "Expert", "martial": "Martial Arts", "assassin": "Assassin", "commando": "Commando", "dragon": "Dragon",},
                "wp": {"archery": "W.P. Archery","axe": "W.P. Axe","blunt": "W.P. Blunt","chain": "W.P. Chain","forked": "W.P. Forked",
                    "grappling_hook": "W.P. Grappling Hook","knife": "W.P. Knife","paired_weapons": "W.P. Paired Weapons",
                    "pole_arm": "W.P. Pole Arm","quick_draw": "W.P. Quick Draw","rope": "W.P. Rope","shield": "W.P. Shield",
                    "spear": "W.P. Spear","staff": "W.P. Staff","sword": "W.P. Sword","targeting": "W.P. Targeting","whip": "W.P. Whip",
                    "handguns": "W.P. Handguns","rifles": "W.P. Rifles","shotgun": "W.P. Shotgun","submachine_gun": "W.P. Submachine-Gun",
                    "heavy_military_weapons": "W.P. Heavy Military Weapons","military_flamethrowers": "W.P. Military Flamethrowers",
                    "harpoon_&_spear_gun": "W.P. Harpoon & Spear Gun","energy_pistol": "W.P. Energy Pistol",
                    "energy_rifle": "W.P. Energy Rifle","heavy_mega_damage_weapons": "W.P. Heavy Mega-Damage Weapons",},
            };
            const fields_keys = Object.keys(update_0_1_map["fields"]);
            getAttrs(fields_keys, function(values2) {
                let update = {"version": current_version};
                for (const field in update_0_1_map["fields"]) { //charactertype_select
                    let key = values2[field].toLowerCase(); //sdc
                    let source = update_0_1_map["fields"][field]; //dc_type
                    if (key in update_0_1_map[source]) {
                        update[field] = update_0_1_map[source][key];
                    }
                }
                setAttrs(update);

                for (var repeater in update_0_1_map["repeating"]) {
                    let repeater_key = repeater;
                    getSectionIDs(`${repeater}`, function(idarray) {
                        let fields = [];
                        for (var i=0; i < idarray.length; i++) {
                            let id = idarray[i];
                            for (var field in update_0_1_map["repeating"][repeater_key]) {
                                fields.push(`${repeater_key}_${id}_${field}`);
                            }
                        }

                        getAttrs(fields, function(values3) {
                            let update2 = {};
                            for (var i=0; i < idarray.length; i++) {
                                let id = idarray[i];
                                for (var field in update_0_1_map["repeating"][repeater_key]) { //ability_damage_type
                                    let key = values3[`${repeater_key}_${id}_${field}`].toLowerCase(); //sdc
                                    let source = update_0_1_map["repeating"][repeater_key][field]; //dc_type
                                    if (key in update_0_1_map[source]) {
                                        update2[`${repeater_key}_${id}_${field}`] = update_0_1_map[source][key];
                                    }
                                }
                            };
                            setAttrs(update2);
                        });
                    });
                }
            });
        });
    });

    on("sheet:opened change:character_token", function(eventInfo) {
        getAttrs(["character_token"], function(values) {
            let character_token = values.character_token;

            if (character_token.length > 0) {
                let roll_template_token = "";
                if (character_token.substring(character_token.length - 4, character_token.length - 3) !== '.') {
                    character_token += ".png";
                    roll_template_token = `{{token=[x](${character_token})}}`;
                }
                setAttrs({
                    roll_template_token: roll_template_token
                });
            }
        });
    });

    const ancientlist = ["archery", "axe", "blunt", "chain", "forked", "grappling_hook", "knife", "paired_weapons", "pole_arm", "quick_draw", "rope", "shield", "spear", "staff", "sword", "targeting", "whip"];
    const modernlist = ["handguns", "rifles", "shotgun", "submachine_gun", "heavy_military_weapons", "military_flamethrowers", "harpoon_&_spear_gun", "energy_pistol", "energy_rifle", "heavy_mega_damage_weapons"];
    const wplookuplist = {
        "archery": "W.P. Archery",
        "axe": "W.P. Axe",
        "blunt": "W.P. Blunt",
        "chain": "W.P. Chain",
        "forked": "W.P. Forked",
        "grappling_hook": "W.P. Grappling Hook",
        "knife": "W.P. Knife",
        "paired_weapons": "W.P. Paired Weapons",
        "pole_arm": "W.P. Pole Arm",
        "quick_draw": "W.P. Quick Draw",
        "rope": "W.P. Rope",
        "shield": "W.P. Shield",
        "spear": "W.P. Spear",
        "staff": "W.P. Staff",
        "sword": "W.P. Sword",
        "targeting": "W.P. Targeting",
        "whip": "W.P. Whip",
        "handguns": "W.P. Handguns",
        "rifles": "W.P. Rifles",
        "shotgun": "W.P. Shotgun",
        "submachine_gun": "W.P. Submachine-Gun",
        "heavy_military_weapons": "W.P. Heavy Military Weapons",
        "military_flamethrowers": "W.P. Military Flamethrowers",
        "harpoon_&_spear_gun": "W.P. Harpoon & Spear Gun",
        "energy_pistol": "W.P. Energy Pistol",
        "energy_rifle": "W.P. Energy Rifle",
        "heavy_mega_damage_weapons": "W.P. Heavy Mega-Damage Weapons",
        "hth": "Hand to Hand",
        "melee": "Generic Melee",
        "ranged": "Generic Ranged",
    };
    let wplookuplistreverse = Object.entries(wplookuplist).map(([key, value]) => [value, key]);
    wplookuplistreverse = Object.fromEntries(wplookuplistreverse);
    ancientlist.forEach(wp => {
        const wpname = wplookuplist[wp];
        const wpancientlist = [`${wp}_strike`,`${wp}_thrown`,`${wp}_parry`,`${wp}_disarm`,`${wp}_entangle`,`${wp}_acquired`,"level","hth_strike_total","hth_parry_total","hth_disarm","hth_entangle"];
        wpancientlist.forEach(field => {
            on(`change:${field}`, function(eventInfo) {
                getAttrs([`${wp}_strike`,`${wp}_thrown`,`${wp}_parry`,`${wp}_disarm`,`${wp}_entangle`,`${wp}_acquired`,"level","hth_strike_total","hth_parry_total","hth_disarm","hth_entangle"], function(values) {
                    let update = {};
                    let strike = parseInt(values[`${wp}_strike`])||0;
                    let thrown = parseInt(values[`${wp}_thrown`])||0;
                    let parry = parseInt(values[`${wp}_parry`])||0;
                    let disarm = parseInt(values[`${wp}_disarm`])||0;
                    let entangle = parseInt(values[`${wp}_entangle`])||0;
                    let acquired = parseInt(values[`${wp}_acquired`])||0;
                    let level = parseInt(values.level)||0;
                    let hth_strike_total = parseInt(values.hth_strike_total)||0;
                    let hth_parry_total = parseInt(values.hth_parry_total)||0;
                    let hth_disarm = parseInt(values.hth_disarm)||0;
                    let hth_entangle = parseInt(values.hth_entangle)||0;
                    update[`${wp}_strike_total`] = strike + hth_strike_total;
                    update[`${wp}_thrown_total`] = thrown + hth_strike_total;
                    update[`${wp}_parry_total`] = parry + hth_parry_total;
                    update[`${wp}_disarm_total`] = disarm + hth_disarm;
                    update[`${wp}_entangle_total`] = entangle + hth_entangle;
                    update[`${wp}_level`] = acquired > 0 ? level - acquired + 1 : 0;
                    setAttrs(update);

                    getSectionIDs('repeating_weapon', function(idarray) {
                        for (var i=0; i < idarray.length; i++) {
                            let id = idarray[i];
                            getAttrs([`repeating_weapon_${id}_weapon_proficiency`,`repeating_weapon_${id}_weapon_strike`,`repeating_weapon_${id}_weapon_thrown`,`repeating_weapon_${id}_weapon_parry`,`repeating_weapon_${id}_weapon_disarm`,`repeating_weapon_${id}_weapon_entangle`], function(values2) {
                                let update2 = {};
                                let weapon_wp = values2[`repeating_weapon_${id}_weapon_proficiency`];
                                if (weapon_wp == wpname) {
                                    let weapon_strike = parseInt(values2[`repeating_weapon_${id}_weapon_strike`])||0;
                                    let weapon_thrown = parseInt(values2[`repeating_weapon_${id}_weapon_thrown`])||0;
                                    let weapon_parry = parseInt(values2[`repeating_weapon_${id}_weapon_parry`])||0;
                                    let weapon_disarm = parseInt(values2[`repeating_weapon_${id}_weapon_disarm`])||0;
                                    let weapon_entangle = parseInt(values2[`repeating_weapon_${id}_weapon_entangle`])||0;
                                    update2[`repeating_weapon_${id}_weapon_strike_total`] = weapon_strike + strike + hth_strike_total;
                                    update2[`repeating_weapon_${id}_weapon_thrown_total`] = weapon_thrown + thrown + hth_strike_total;
                                    update2[`repeating_weapon_${id}_weapon_parry_total`] = weapon_parry + parry + hth_parry_total;
                                    update2[`repeating_weapon_${id}_weapon_disarm_total`] = weapon_disarm + disarm + hth_disarm;
                                    update2[`repeating_weapon_${id}_weapon_entangle_total`] = weapon_entangle + entangle + hth_entangle;
                                    setAttrs(update2);
                                }
                            });
                        }
                    });
                });
            });
        });
    });
    modernlist.forEach(wp => {
        const wpname = wplookuplist[wp];
        const wpmodernlist = [`${wp}_strike`,`${wp}_aim`,`${wp}_burst`,`${wp}_acquired`,"level"];
        wpmodernlist.forEach(field => {
            on(`change:${field}`, function(eventInfo) {
                getAttrs([`${wp}_strike`,`${wp}_aim`,`${wp}_burst`,`${wp}_acquired`,"level",], function(values) {
                    let update = {};
                    let strike = parseInt(values[`${wp}_strike`])||0;
                    let aim = parseInt(values[`${wp}_aim`])||0;
                    let burst = parseInt(values[`${wp}_burst`])||0;
                    let acquired = parseInt(values[`${wp}_acquired`])||0;
                    let level = parseInt(values.level)||0;
                    update[`${wp}_level`] = acquired > 0 ? level - acquired + 1 : 0;
                    setAttrs(update);

                    getSectionIDs('repeating_weapon', function(idarray) {
                        for (var i=0; i < idarray.length; i++) {
                            let id = idarray[i];;
                            getAttrs([`repeating_weapon_${id}_weapon_proficiency`,`repeating_weapon_${id}_weapon_strike`,`repeating_weapon_${id}_weapon_aim`,`repeating_weapon_${id}_weapon_burst`], function(values2) {
                                let update2 = {};
                                let weapon_wp = values2[`repeating_weapon_${id}_weapon_proficiency`];
                                if (weapon_wp == wpname) {
                                    let weapon_strike = parseInt(values2[`repeating_weapon_${id}_weapon_strike`])||0;
                                    let weapon_aim = parseInt(values2[`repeating_weapon_${id}_weapon_aim`])||0;
                                    let weapon_burst = parseInt(values2[`repeating_weapon_${id}_weapon_burst`])||0;
                                    update2[`repeating_weapon_${id}_weapon_strike_total`] = weapon_strike + strike;
                                    update2[`repeating_weapon_${id}_weapon_aim_total`] = weapon_aim + aim;
                                    update2[`repeating_weapon_${id}_weapon_burst_total`] = weapon_burst + burst;
                                    setAttrs(update2);
                                }
                            });
                        }
                    });
                });
            });
        });
    });

    on("change:hth_strike_total change:hth_parry_total change:hth_disarm", function(eventInfo) {
        getSectionIDs('repeating_weaponancient', function(idarray) {
            for (var i=0; i < idarray.length; i++) {
                let id = idarray[i];;
                getAttrs([`repeating_weaponancient_${id}_weapon_strike_ancient`,`repeating_weaponancient_${id}_weapon_thrown_ancient`,`repeating_weaponancient_${id}_weapon_parry_ancient`,`repeating_weaponancient_${id}_weapon_disarm_ancient`,"hth_strike_total","hth_parry_total","hth_disarm"], function(values) {
                    let update = {};
                    let weapon_strike_ancient = parseInt(values[`repeating_weaponancient_${id}_weapon_strike_ancient`])||0;
                    let weapon_thrown_ancient = parseInt(values[`repeating_weaponancient_${id}_weapon_thrown_ancient`])||0;
                    let weapon_parry_ancient = parseInt(values[`repeating_weaponancient_${id}_weapon_parry_ancient`])||0;
                    let weapon_disarm_ancient = parseInt(values[`repeating_weaponancient_${id}_weapon_disarm_ancient`])||0;
                    let hth_strike_total = parseInt(values.hth_strike_total)||0;
                    let hth_parry_total = parseInt(values.hth_parry_total)||0;
                    let hth_disarm = parseInt(values.hth_disarm)||0;
                    update[`repeating_weaponancient_${id}_weapon_strike_ancient_total`] = weapon_strike_ancient + hth_strike_total;
                    update[`repeating_weaponancient_${id}_weapon_thrown_ancient_total`] = weapon_thrown_ancient + hth_strike_total;
                    update[`repeating_weaponancient_${id}_weapon_parry_ancient_total`] = weapon_parry_ancient + hth_parry_total;
                    update[`repeating_weaponancient_${id}_weapon_disarm_ancient_total`] = weapon_disarm_ancient + hth_disarm;
                    setAttrs(update);
                });
            }
        });
    });

    const weapongrouplist = {
        "repeating_weapon": ["weapon"],
        "repeating_rpa": ["rpa_w1","rpa_w2","rpa_w3","rpa_w4","rpa_w5","rpa_w6"],
    };
    const weaponlist = ["proficiency","strike","thrown","parry","aim","burst","disarm"];
    Object.keys(weapongrouplist).forEach(group => {
        weapongrouplist[group].forEach(key => {
            weaponlist.forEach(field => {
                on(`change:${group}:${key}_${field}`, function(eventInfo) {
                    getAttrs([`${group}_${key}_proficiency`,`${group}_${key}_strike`,`${group}_${key}_thrown`,`${group}_${key}_parry`,`${group}_${key}_aim`,`${group}_${key}_burst`,`${group}_${key}_disarm`,"hth_strike_total","hth_parry_total","hth_disarm_total"], function(values) {
                        let wp = values[`${group}_${key}_proficiency`];
                        let wpkey = wplookuplistreverse[wp];
                        let strike = parseInt(values[`${group}_${key}_strike`])||0;
                        let weapon_template = ancientlist.includes(wpkey) ? "ancient" : "modern";
                        weapon_template = wpkey == "hth" || wpkey == "melee" ? "ancient" : weapon_template;
                        weapon_template = wpkey == "ranged" || wpkey == "archery" ? "modern" : weapon_template;
                        if (wpkey && weapon_template == "ancient") {
                            let thrown = parseInt(values[`${group}_${key}_thrown`])||0;
                            let parry = parseInt(values[`${group}_${key}_parry`])||0;
                            let disarm = parseInt(values[`${group}_${key}_disarm`])||0;
                            getAttrs([`${wpkey}_strike_total`, `${wpkey}_thrown_total`, `${wpkey}_parry_total`, `${wpkey}_disarm_total`], function(values) {
                                let update = {};
                                let wp_strike = parseInt(values[`${wpkey}_strike_total`])||0;
                                let wp_thrown = wpkey == "hth" ? wp_strike : parseInt(values[`${wpkey}_thrown_total`])||0;
                                let wp_parry = parseInt(values[`${wpkey}_parry_total`])||0;
                                let wp_disarm = parseInt(values[`${wpkey}_disarm_total`])||0;
                                update[`${group}_${key}_template`] = weapon_template;
                                update[`${group}_${key}_strike_total`] = strike + wp_strike;
                                update[`${group}_${key}_thrown_total`] = thrown + wp_thrown;
                                update[`${group}_${key}_parry_total`] = parry + wp_parry;
                                update[`${group}_${key}_disarm_total`] = disarm + wp_disarm;
                                setAttrs(update);
                            });
                        } else if (wpkey && weapon_template == "modern") {
                            let aim = parseInt(values[`${group}_${key}_aim`])||0;
                            let burst = parseInt(values[`${group}_${key}_burst`])||0;
                            getAttrs([`${wpkey}_strike`, `${wpkey}_aim`, `${wpkey}_burst`], function(values) {
                                let update = {};
                                let wp_strike = parseInt(values[`${wpkey}_strike`])||0;
                                let wp_aim = parseInt(values[`${wpkey}_aim`])||0;
                                let wp_burst = parseInt(values[`${wpkey}_burst`])||0;
                                update[`${group}_${key}_template`] = weapon_template;
                                update[`${group}_${key}_strike_total`] = strike + wp_strike;
                                update[`${group}_${key}_aim_total`] = aim + wp_aim;
                                update[`${group}_${key}_burst_total`] = burst + wp_burst;
                                setAttrs(update);
                            });
                        }
                    });
                });
            });
        });
    });

    const skillbaselist = ["repeating_skills:skill_base","repeating_skills:skill_per","repeating_skills:skill_bonus","repeating_skills:skill_acquired"];
    skillbaselist.forEach(field => {
        on(`change:${field}`, function(eventInfo) {
            getAttrs(["repeating_skills_skill_base","repeating_skills_skill_per","repeating_skills_skill_bonus","repeating_skills_skill_acquired","level","iq_skill_bonus"], function(values) {
                let base = parseInt(values.repeating_skills_skill_base)||0;
                let per = parseInt(values.repeating_skills_skill_per)||0;
                let bonus = parseInt(values.repeating_skills_skill_bonus)||0;
                let acquired = parseInt(values.repeating_skills_skill_acquired)||0;
                let level = parseInt(values.level)||0;
                let iq_skill_bonus = parseInt(values.iq_skill_bonus)||0;
                let skill_level = level - acquired;
                let skill_total = base + per * skill_level + bonus + iq_skill_bonus;
                setAttrs({
                    repeating_skills_skill_level: skill_level,
                    repeating_skills_skill_total: skill_total
                });
            });
        });
    });

    const abilitylist = ["repeating_ability:ability_skill_base","repeating_ability:ability_skill_per"];
    abilitylist.forEach(field => {
        on(`change:${field}`, function(eventInfo) {
            getAttrs(["repeating_ability_ability_skill_base","repeating_ability_ability_skill_per","level","iq_skill_bonus"], function(values) {
                let base = parseInt(values.repeating_ability_ability_skill_base)||0;
                let per = parseInt(values.repeating_ability_ability_skill_per)||0;
                let level = parseInt(values.level)||0;
                let iq_skill_bonus = parseInt(values.iq_skill_bonus)||0;
                let skill_level = level - 1;
                let skill_total = base + per * skill_level + iq_skill_bonus;
                setAttrs({
                    repeating_ability_ability_skill_total: skill_total
                });
            });
        });
    });

    on("change:level change:iq_skill_bonus", function(eventInfo) {
        getSectionIDs('repeating_skills', function(idarray) {
            for (var i=0; i < idarray.length; i++) {
                let id = idarray[i];;
                getAttrs([`repeating_skills_${id}_skill_base`,`repeating_skills_${id}_skill_per`,`repeating_skills_${id}_skill_bonus`,`repeating_skills_${id}_skill_acquired`,"level","iq_skill_bonus"], function(values) {
                    let update = {};
                    let base = parseInt(values[`repeating_skills_${id}_skill_base`])||0;
                    let per = parseInt(values[`repeating_skills_${id}_skill_per`])||0;
                    let bonus = parseInt(values[`repeating_skills_${id}_skill_bonus`])||0;
                    let acquired = parseInt(values[`repeating_skills_${id}_skill_acquired`])||0;
                    let level = parseInt(values.level)||0;
                    let iq_skill_bonus = parseInt(values.iq_skill_bonus)||0;
                    let skill_level = level - acquired;
                    let skill_total = base + per * skill_level + bonus + iq_skill_bonus;
                    update[`repeating_skills_${id}_skill_level`] = skill_level;
                    update[`repeating_skills_${id}_skill_total`] = skill_total;
                    setAttrs(update);
                });
            }
        });
    });

    // IQ
    on("change:iq", function(eventInfo) {
        getAttrs(["iq"], function(values) {
            let iq = parseInt(values.iq)||0;
            let iq_skill_bonus = iq > 15 ?
                iq > 30 ? 16 + Math.floor((iq - 30) / 5) * 2 :
                    iq - 14:
                0;
            let iq_perception_bonus = iq > 30 ? Math.floor((iq - 30) / 10) : 0;
            let iq_illusion_bonus = iq > 30 ? Math.ceil((iq - 30) / 3) : 0;
            iq_illusion_bonus = iq_illusion_bonus > 7 ? 7 : iq_illusion_bonus;
            setAttrs({
                iq_skill_bonus: iq_skill_bonus,
                iq_illusion_bonus: iq_illusion_bonus,
                iq_perception_bonus: iq_perception_bonus
            });
        });
    });
    // ME
    on("change:me change:save_psi change:save_insane", function(eventInfo) {
        getAttrs(["me","save_psi","save_insane"], function(values) {
            let me = parseInt(values.me)||0;
            let save_psi = parseInt(values.save_psi)||0;
            let save_insane = parseInt(values.save_insane)||0;
            let me_psionic_bonus = me > 15 ? Math.ceil((me - 15)/2) : 0;
            me_psionic_bonus = Math.min(me_psionic_bonus, 8);
            let save_psi_total = save_psi + me_psionic_bonus;
            let me_insanity_bonus = me > 15 ?
                me > 19 ? me - 17 : Math.ceil((me - 15)/2) :
                0;
            me_insanity_bonus = Math.min(me_insanity_bonus, 13);
            let save_insane_total = save_insane + me_insanity_bonus;
            let me_possession_bonus = me > 30 ? Math.ceil((me - 30) / 10) : 0;
            me_possession_bonus = Math.min(me_possession_bonus, 4);
            setAttrs({
                me_psionic_bonus: me_psionic_bonus,
                me_insanity_bonus: me_insanity_bonus,
                save_insane_total: save_insane_total,
                save_psi_total: save_psi_total,
                me_possession_bonus: me_possession_bonus
            });
        });
    });
    // MA
    const trustlist = {16:40, 17:45, 18:50, 19:55, 20:60, 21:65, 22:70, 23:75, 24:80, 25:84, 26:88, 27:92, 28:94, 29:96, 30:97}
    on("change:ma", function(eventInfo) {
        getAttrs(["ma"], function(values) {
            let ma = parseInt(values.ma)||0;
            let ma_trust = ma > 15 ? trustlist[ma] : 0;
            ma_trust = ma > 30 ? 97 : ma_trust;
            let ma_skill_bonus = ma > 30 ? 1 : 0;
            setAttrs({
                ma_trust: ma_trust,
                ma_skill_bonus : ma_skill_bonus
            });
        });
    });
    // PS
    const ps_class_damage = {
        "normal": {
            "default": {
                "punch": "1d4",
                "punch_type": "S.D.C.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "2d4",
                "power_punch_type": "S.D.C.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "",
                "restrained_punch_type": "none",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
        },
        "augmented": {
            "51": {
                "punch": "1d8",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "4d4",
                "power_punch_type": "M.D.",
                "power_kick": "4d4",
                "power_kick_type": "M.D.",
                "restrained_punch": "4D6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "41": {
                "punch": "1d4",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "3d4",
                "power_punch_type": "M.D.",
                "power_kick": "3d4",
                "power_kick_type": "M.D.",
                "restrained_punch": "3D6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "31": {
                "punch": "1d4",
                "punch_type": "S.D.C.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "2d4",
                "power_punch_type": "M.D.",
                "power_kick": "2d4",
                "power_kick_type": "M.D.",
                "restrained_punch": "",
                "restrained_punch_type": "none",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "28": {
                "punch": "1d4",
                "punch_type": "S.D.C.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "1d6",
                "power_punch_type": "M.D.",
                "power_kick": "1d6",
                "power_kick_type": "M.D.",
                "restrained_punch": "",
                "restrained_punch_type": "none",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "25": {
                "punch": "1d4",
                "punch_type": "S.D.C.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "1d4",
                "power_punch_type": "M.D.",
                "power_kick": "1d4",
                "power_kick_type": "M.D.",
                "restrained_punch": "",
                "restrained_punch_type": "none",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "24": {
                "punch": "1d4",
                "punch_type": "S.D.C.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "1",
                "power_punch_type": "M.D.",
                "power_kick": "1",
                "power_kick_type": "M.D.",
                "restrained_punch": "",
                "restrained_punch_type": "none",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "default": {
                "punch": "1d4",
                "punch_type": "S.D.C.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "2d4",
                "power_punch_type": "S.D.C.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "",
                "restrained_punch_type": "none",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
        },
        "robot": {
            "51": {
                "punch": "6d6",
                "punch_type": "M.D.",
                "kick": "6d8",
                "kick_type": "M.D.",
                "power_punch": "2d6*10",
                "power_punch_type": "M.D.",
                "power_kick": "12d8",
                "power_kick_type": "M.D.",
                "restrained_punch": "2d6",
                "restrained_punch_type": "M.D.",
                "leap_kick": "2d6*10",
                "leap_kick_type": "M.D.",
            },
            "41": {
                "punch": "3d6",
                "punch_type": "M.D.",
                "kick": "5d8",
                "kick_type": "M.D.",
                "power_punch": "1d6*10",
                "power_punch_type": "M.D.",
                "power_kick": "10d8",
                "power_kick_type": "M.D.",
                "restrained_punch": "1d6",
                "restrained_punch_type": "M.D.",
                "leap_kick": "1d8*10",
                "leap_kick_type": "M.D.",
            },
            "36": {
                "punch": "2d6",
                "punch_type": "M.D.",
                "kick": "3d8",
                "kick_type": "M.D.",
                "power_punch": "4d6",
                "power_punch_type": "M.D.",
                "power_kick": "6d8",
                "power_kick_type": "M.D.",
                "restrained_punch": "1d4",
                "restrained_punch_type": "M.D.",
                "leap_kick": "5d8",
                "leap_kick_type": "M.D.",
            },
            "31": {
                "punch": "2d4",
                "punch_type": "M.D.",
                "kick": "2d8",
                "kick_type": "M.D.",
                "power_punch": "4d4",
                "power_punch_type": "M.D.",
                "power_kick": "4d8",
                "power_kick_type": "M.D.",
                "restrained_punch": "1d4",
                "restrained_punch_type": "M.D.",
                "leap_kick": "4d8",
                "leap_kick_type": "M.D.",
            },
            "26": {
                "punch": "1d6",
                "punch_type": "M.D.",
                "kick": "2d4",
                "kick_type": "M.D.",
                "power_punch": "2d6",
                "power_punch_type": "M.D.",
                "power_kick": "4d4",
                "power_kick_type": "M.D.",
                "restrained_punch": "1d4",
                "restrained_punch_type": "M.D.",
                "leap_kick": "2d8",
                "leap_kick_type": "M.D.",
            },
            "21": {
                "punch": "1d4",
                "punch_type": "M.D.",
                "kick": "1d6",
                "kick_type": "M.D.",
                "power_punch": "2d4",
                "power_punch_type": "M.D.",
                "power_kick": "2d6",
                "power_kick_type": "M.D.",
                "restrained_punch": "6d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "2d6",
                "leap_kick_type": "M.D.",
            },
            "16": {
                "punch": "1",
                "punch_type": "M.D.",
                "kick": "1d4",
                "kick_type": "M.D.",
                "power_punch": "1d6",
                "power_punch_type": "M.D.",
                "power_kick": "2d4",
                "power_kick_type": "M.D.",
                "restrained_punch": "2d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "2d4",
                "leap_kick_type": "M.D.",
            },
            "default": {
                "punch": "2d6",
                "punch_type": "S.D.C.",
                "kick": "2d6",
                "kick_type": "S.D.C.",
                "power_punch": "4d6",
                "power_punch_type": "S.D.C.",
                "power_kick": "4d6",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "1d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d6",
                "leap_kick_type": "S.D.C.",
            },
        },
        "supernatural": {
            "51": {
                "punch": "1d6*10",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "2d6*10",
                "power_punch_type": "M.D.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "1d6",
                "restrained_punch_type": "M.D.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "41": {
                "punch": "6d6",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "2d4*10",
                "power_punch_type": "M.D.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "1d6*10",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "36": {
                "punch": "5d6",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "1d6*10",
                "power_punch_type": "M.D.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "6d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "31": {
                "punch": "4d6",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "1d4*10",
                "power_punch_type": "M.D.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "5d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "26": {
                "punch": "3d6",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "6d6",
                "power_punch_type": "M.D.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "5d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "21": {
                "punch": "2d6",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "4d6",
                "power_punch_type": "M.D.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "4d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "16": {
                "punch": "1d6",
                "punch_type": "M.D.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "2d6",
                "power_punch_type": "M.D.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "3d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
            "default": {
                "punch": "4d6",
                "punch_type": "S.D.C.",
                "kick": "1d8",
                "kick_type": "S.D.C.",
                "power_punch": "1d4",
                "power_punch_type": "M.D.",
                "power_kick": "2d8",
                "power_kick_type": "S.D.C.",
                "restrained_punch": "1d6",
                "restrained_punch_type": "S.D.C.",
                "leap_kick": "3d8",
                "leap_kick_type": "S.D.C.",
            },
        },
    };
    on("change:ps change:ps_type change:pe change:hth_damage", function(eventInfo) {
        getAttrs(["ps","ps_type","pe","hth_damage"], function(values) {
            let ps = parseInt(values.ps)||0;
            let pe = parseInt(values.pe)||0;
            let hth_damage = parseInt(values.hth_damage)||0;
            let ps_type = values.ps_type.toLowerCase();
            let ps_hth_damage = ps > 15 ? ps - 15 : 0;
            let hth_damage_total = hth_damage + ps_hth_damage;
            let carry = ps > 16 ? ps*20 : ps*10;
            if (ps_type == "robot" && ps > 39) {
                carry = ps*100;
            } else if (ps_type == "robot" && ps > 16) {
                carry = ps*25;
            } else if (ps_type == "supernatural" && ps > 17) {
                carry = ps*50;
            } else if (ps_type == "supernatural") {
                carry = ps*20;
            }
            let lift = carry * 2;
            let hold_max = pe * 3;
            let throw_weight = carry / 2;
            let throw_distance = ps;
            if (ps_type == "augmented") {
                throw_distance = ps*2;
            } else if (ps_type == "supernatural" && ps > 16) {
                throw_distance = ps*5;
            } else if (ps_type == "robot" || ps_type == "supernatural") {
                throw_distance = ps*3;
            }
            // strength class
            let ps_class = "default";
            if (ps_type == "augmented") {
                ps_class =
                    ps >= 51 ? "51" :
                    ps >= 41 ? "41" :
                    ps >= 31 ? "31" :
                    ps >= 28 ? "28" :
                    ps >= 25 ? "25" :
                    ps == 24 ? "24" :
                    "default";
            } else if (ps_type == "robot" || ps_type == "supernatural") {
                ps_class =
                    ps >= 51 ? "51" :
                    ps >= 41 ? "41" :
                    ps >= 36 ? "36" :
                    ps >= 31 ? "31" :
                    ps >= 26 ? "26" :
                    ps >= 21 ? "21" :
                    ps >= 16 ? "16" :
                    "default";
            }
            setAttrs({
                ps_hth_damage: ps_hth_damage,
                hth_damage_total: hth_damage_total,
                lift: lift,
                carry: carry,
                throw_weight: throw_weight,
                throw_distance: throw_distance,
                hold_max: hold_max,
                ps_hth_punch: ps_class_damage[ps_type][ps_class]["punch"],
                ps_hth_punch_type: ps_class_damage[ps_type][ps_class]["punch_type"],
                ps_hth_kick: ps_class_damage[ps_type][ps_class]["kick"],
                ps_hth_kick_type: ps_class_damage[ps_type][ps_class]["kick_type"],
                ps_hth_power_punch: ps_class_damage[ps_type][ps_class]["power_punch"],
                ps_hth_power_punch_type: ps_class_damage[ps_type][ps_class]["power_punch_type"],
                ps_hth_power_kick: ps_class_damage[ps_type][ps_class]["power_kick"],
                ps_hth_power_kick_type: ps_class_damage[ps_type][ps_class]["power_kick_type"],
                ps_hth_restrained_punch: ps_class_damage[ps_type][ps_class]["restrained_punch"],
                ps_hth_restrained_punch_type: ps_class_damage[ps_type][ps_class]["restrained_punch_type"],
                ps_hth_leap_kick: ps_class_damage[ps_type][ps_class]["leap_kick"],
                ps_hth_leap_kick_type: ps_class_damage[ps_type][ps_class]["leap_kick_type"],
            });
        });
    });
    // PP
    const pplist = ["hth","robot_basic","robot_elite1"];
    const ppfieldslist = ["dodge","gunfire_dodge","autododge","parry","strike"];
    let ppfields = [];
    pplist.forEach(group => {
        ppfieldslist.forEach(field => {
            ppfields.push(`${group}_${field}`);
        });
    });
    const pptriggers = "change:pp change:" + ppfields.join(" change:");
    on(pptriggers, function(eventInfo) {
        getAttrs(ppfields.concat(["pp"]), function(values) {
            let update = {};
            let pp = parseInt(values.pp)||0;
            let pp_bonus = pp > 15 ? Math.ceil((pp - 15)/2) : 0;
            pp_bonus = Math.min(pp_bonus, 8);
            update['pp_dodge_bonus'] = pp_bonus;
            update['pp_strike_bonus'] = pp_bonus;

            pplist.forEach(group => {
                ppfieldslist.forEach(field => {
                    if (group == "hth") {
                        let base = parseInt(values[`${group}_${field}`])||0;
                        update[`${group}_${field}_total`] = base + pp_bonus;
                    } else {
                        let hthbase = parseInt(values[`hth_${field}`])||0;
                        let robotbase = parseInt(values[`${group}_${field}`])||0;
                        update[`${group}_${field}_total`] = hthbase + robotbase + pp_bonus;
                    }
                });
            });
            setAttrs(update);
        });
    });
    // PE
    const comalist = {16:4, 17:5, 18:6, 19:8, 20:10, 21:12, 22:14, 23:16, 24:18, 25:20, 26:22, 27:24, 28:26, 29:28, 30:30}
    function update_pe(eventInfo) {
        getAttrs(["pe","save_comadeath","save_magic","save_ritual","save_toxin_lethal","save_toxin_nonlethal","save_disease","save_electrocution","save_heat","save_cold","save_drugs","save_pain"], function(values) {
            let pe = parseInt(values.pe)||0;
            let save_comadeath = parseInt(values.save_comadeath)||0;
            let save_magic = parseInt(values.save_magic)||0;
            let save_ritual = parseInt(values.save_ritual)||0;
            let save_toxin_lethal = parseInt(values.save_toxin_lethal)||0;
            let save_toxin_nonlethal = parseInt(values.save_toxin_nonlethal)||0;
            let save_disease = parseInt(values.save_disease)||0;
            let save_electrocution = parseInt(values.save_electrocution)||0;
            let save_heat = parseInt(values.save_heat)||0;
            let save_cold = parseInt(values.save_cold)||0;
            let save_drugs = parseInt(values.save_drugs)||0;
            let save_pain = parseInt(values.save_pain)||0;
            let pe_recovery_bonus = pe > 15 ? comalist[pe] : 0;
            pe_recovery_bonus = pe > 30 ? pe : pe_recovery_bonus;
            let pe_magic_bonus = pe > 15 ? Math.ceil((pe - 15)/2) : 0;
            pe_magic_bonus = Math.min(pe_magic_bonus, 8);
            setAttrs({
                pe_recovery_bonus: pe_recovery_bonus,
                pe_magic_bonus: pe_magic_bonus,
                save_comadeath_total: pe_recovery_bonus + save_comadeath,
                save_magic_total: pe_magic_bonus + save_magic,
                save_ritual_total: pe_magic_bonus + save_ritual,
                save_toxin_lethal_total: pe_magic_bonus + save_toxin_lethal,
                save_toxin_nonlethal_total: pe_magic_bonus + save_toxin_nonlethal,
                save_disease_total: pe_magic_bonus + save_disease,
                save_electrocution_total: pe_magic_bonus + save_electrocution,
                save_heat_total: pe_magic_bonus + save_heat,
                save_cold_total: pe_magic_bonus + save_cold,
                save_drugs_total: pe_magic_bonus + save_drugs,
                save_pain_total: pe_magic_bonus + save_pain
            });
        });
    }
    on("change:pe change:save_comadeath change:save_magic change:save_ritual change:save_toxin_lethal change:save_toxin_nonlethal change:save_disease change:save_electrocution change:save_heat change:save_cold change:save_drugs change:save_pain", update_pe);
    // PB
    const charmlist = {16:30, 17:35, 18:40, 19:45, 20:50, 21:55, 22:60, 23:65, 24:70, 25:75, 26:80, 27:83, 28:86, 29:90, 30:92};
    on("change:pb", function(eventInfo) {
        getAttrs(["pb"], function(values) {
            let pb = parseInt(values.pb)||0;
            let pb_charm = pb > 15 ? charmlist[pb] : 0;
            pb_charm = pb > 30 ? 92 : pb_charm;
            let pb_skill_bonus = pb > 30 ? 1 : 0;
            setAttrs({
                pb_charm: pb_charm,
                pb_skill_bonus: pb_skill_bonus
            });
        });
    });
    // SPD
    function speedupdate(spd, hth_numberattacks, pe) {
        let values = {};
        values["run_spd"] = spd;
        values["run_yd_minute"] = spd * 20;
        values["run_yd_melee"] = spd * 5;
        values["run_ft_attack"] = Math.round((values["run_yd_melee"] * 3 / hth_numberattacks + Number.EPSILON) * 100) / 100;
        values["run_mph"] = Math.round((values["run_yd_minute"] * 60 / 1760 + Number.EPSILON) * 100) / 100;
        if (pe > 0) {
            values["run_cruising"] = pe * 0.5;
            values["run_at_max"] = Math.round((values["run_cruising"] / 3 + Number.EPSILON) * 100) / 100;
        }
        return values;
    }
    function mphupdate(mph, hth_numberattacks, pe) {
        let values = {};
        values["run_mph"] = mph;
        values["run_yd_minute"] = Math.round((mph * 1760 / 60 + Number.EPSILON) * 100) / 100;
        values["run_yd_melee"] = Math.round((mph * 1760 / 60 / 4 + Number.EPSILON) * 100) / 100;
        values["run_ft_attack"] = Math.round((values["run_yd_melee"] * 3 / hth_numberattacks + Number.EPSILON) * 100) / 100;
        values["run_spd"] = Math.round((values["run_yd_minute"] / 20 + Number.EPSILON) * 100) / 100;
        if (pe > 0) {
            values["run_cruising"] = pe * 0.5;
            values["run_at_max"] = Math.round((values["run_cruising"] / 3 + Number.EPSILON) * 100) / 100;
        }
        return values;
    }
    on("change:spd change:pe change:hth_numberattacks", function(eventInfo) {
        getAttrs(["spd", "pe", "hth_numberattacks"], function(values) {
            let spd = parseInt(values.spd)||0;
            let pe = parseInt(values.pe)||0;
            let hth_numberattacks = parseInt(values.hth_numberattacks)||1;
            let update = speedupdate(spd, hth_numberattacks, pe);
            setAttrs(update);
        });
    });

    // HTH ROBOT assorted
    const rclist = ["hth","robot_basic","robot_elite1"];
    const rcfieldslist = ["initiative","numberattacks","roll","pullpunch","disarm","entangle"];
    let robotfields = [];
    rclist.forEach(group => {
        rcfieldslist.forEach(field => {
            if (group == "hth" && field == "initiative") {
                robotfields.push("initiative");
            } else {
                robotfields.push(`${group}_${field}`);
            }
        });
    });
    const robottriggers = "change:" + robotfields.join(" change:");
    on(robottriggers, function(eventInfo) {
        getAttrs(robotfields, function(values) {
            let update = {};
            rclist.forEach(group => {
                if (group != "hth") {
                    rcfieldslist.forEach(field => {
                        let hthbase = parseInt(values[`hth_${field}`])||0;
                        let robotbase = parseInt(values[`${group}_${field}`])||0;
                        update[`${group}_${field}_total`] = hthbase + robotbase;
                    });
                }
            });
            setAttrs(update);
        });
    });

    on("change:repeating_movement:movement_speed change:repeating_movement:movement_mph", function(eventInfo) {
        if ("sourceType" in eventInfo && eventInfo["sourceType"] != "player") {
            return;
        }
        getAttrs(["repeating_movement_movement_speed","repeating_movement_movement_mph","hth_numberattacks"], function(values) {
            let mphevent = "sourceAttribute" in eventInfo && eventInfo["sourceAttribute"].includes("movement_mph");
            let spd = parseInt(values.repeating_movement_movement_speed)||0;
            let mph = parseInt(values.repeating_movement_movement_mph)||0;
            let hth_numberattacks = parseInt(values.hth_numberattacks)||1;
            let update = mphevent ? mphupdate(mph, hth_numberattacks, 0) : speedupdate(spd, hth_numberattacks, 0);
            console.log(update);
            setAttrs({
                repeating_movement_movement_speed: update["run_spd"],
                repeating_movement_movement_yd_minute: update["run_yd_minute"],
                repeating_movement_movement_yd_melee: update["run_yd_melee"],
                repeating_movement_movement_ft_attack: update["run_ft_attack"],
                repeating_movement_movement_mph: update["run_mph"]
            });
        });
    });

    on("change:hth_numberattacks", function(eventInfo) {
        getSectionIDs('repeating_movement', function(idarray) {
            for (var i=0; i < idarray.length; i++) {
                let id = idarray[i];;
                getAttrs([`repeating_movement_${id}_movement_speed`,"hth_numberattacks"], function(values) {
                    let update = {};
                    let spd = parseInt(values[`repeating_movement_${id}_movement_speed`])||0;
                    let hth_numberattacks = parseInt(values.hth_numberattacks)||1;
                    let preupdate = speedupdate(spd, hth_numberattacks, 0);
                    update[`repeating_movement_${id}_movement_yd_minute`] = preupdate["run_yd_minute"];
                    update[`repeating_movement_${id}_movement_yd_melee`] = preupdate["run_yd_melee"];
                    update[`repeating_movement_${id}_movement_ft_attack`] = preupdate["run_ft_attack"];
                    setAttrs(update);
                });
            }
        });
    });
</script>

<rolltemplate class="sheet-rolltemplate-d20">
    {{#perception}}
        {{#rollGreater() roll 3}}
            <span class="sheet-template-per4"></span>
        {{/rollGreater() roll 3}}
        {{#rollGreater() roll 7}}
            <span class="sheet-template-per8"></span>
        {{/rollGreater() roll 7}}
        {{#rollGreater() roll 13}}
            <span class="sheet-template-per14"></span>
        {{/rollGreater() roll 13}}
        {{#rollGreater() roll 14}}
            <span class="sheet-template-per15"></span>
        {{/rollGreater() roll 14}}
        {{#rollGreater() roll 16}}
            <span class="sheet-template-per17"></span>
        {{/rollGreater() roll 16}}
        {{#rollGreater() roll 18}}
            <span class="sheet-template-per19"></span>
        {{/rollGreater() roll 18}}
    {{/perception}}
    {{#critical}}
        {{#^rollLess() raw critical}}
            <span class="sheet-template-crit"></span>
        {{/^rollLess() raw critical}}
    {{/critical}}
    {{^critical}}
        {{#^rollLess() raw 20}}
            <span class="sheet-template-crit"></span>
        {{/^rollLess() raw 20}}
    {{/critical}}
    <div class="sheet-template-body">
        {{#token}}{{token}}{{/token}}
        {{^token}}<div />{{/token}}
        <div>
            <h4>{{rollname}}</h4>
            <p>1d20 + {{bonus}}</p>
            <p>{{name}}</p>
        </div>
        <div class="sheet-template-results">
            {{roll}}
            {{#critical}}
                {{#^rollLess() raw critical}}
                    <span class="sheet-template-d20">t</span>
                    {{#rollTotal() raw 20}}
                        <span class="sheet-template-feedback">Natural Twenty</span>
                    {{/rollTotal() raw 20}}
                    {{#^rollTotal() raw 20}}
                        <span class="sheet-template-feedback">Critical Strike</span>
                    {{/^rollTotal() raw 20}}
                {{/^rollLess() raw critical}}
                {{#rollLess() raw critical}}
                    <span class="sheet-template-d20">0</span>
                {{/rollLess() raw critical}}
            {{/critical}}
            {{^critical}}
                {{#^rollLess() raw 20}}
                    <span class="sheet-template-d20">t</span>
                    <span class="sheet-template-feedback">Natural Twenty</span>
                {{/^rollLess() raw 20}}
                {{#rollLess() raw 20}}
                    <span class="sheet-template-d20">0</span>
                {{/rollLess() raw 20}}
            {{/critical}}
            {{dmgroll}}
            {{reroll}}
        </div>
        {{#raw}}
            <dl>
                <dt>Dice roll</dt>
                <dd>{{raw}}</dd>
            </dl>
        {{/raw}}
        {{#critical}}
            <dl>
                <dt>Critical Strike</dt>
                <dd>{{critical}}</dd>
            </dl>
        {{/critical}}
        {{#perception}}
            <dl>
                <dt>Easy situation / circumstance</dt>
                <dd>4+</dd>
                <dt>Moderate / plentiful evidence</dt>
                <dd>8+</dd>
                <dt>Challenging / sparse evidence</dt>
                <dd>14+</dd>
                <dt>Supernatural predators / lesser demons</dt>
                <dd>15+</dd>
                <dt>Difficult / demonic servants / greater demons</dt>
                <dd>17+</dd>
                <dt>Ancient evil / dark god / alien intelligence</dt>
                <dd>19+</dd>
            </dl>
        {{/perception}}
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-d100">
    {{#savecoma}}
        {{#rollLess() roll 19}}
            <span class="sheet-template-coma18"></span>
        {{/rollLess() roll 19}}
        {{#rollLess() roll 33}}
            <span class="sheet-template-coma32"></span>
        {{/rollLess() roll 33}}
        {{#rollLess() roll 47}}
            <span class="sheet-template-coma46"></span>
        {{/rollLess() roll 47}}
        {{#rollLess() roll 57}}
            <span class="sheet-template-coma56"></span>
        {{/rollLess() roll 57}}
        {{#rollLess() roll 67}}
            <span class="sheet-template-coma66"></span>
        {{/rollLess() roll 67}}
        {{#rollLess() roll 71}}
            <span class="sheet-template-coma70"></span>
        {{/rollLess() roll 71}}
        <div class="sheet-template-body">
            {{#token}}{{token}}{{/token}}
            {{^token}}<div />{{/token}}
            <div>
                <h4>{{rollname}}</h4>
                <p>1d100 vs. -{{bonus}}% bonus</p>
                <p>{{name}}</p>
            </div>
            <div class="sheet-template-results">
                {{roll}}
                <span class="sheet-template-d100">00</span>
                {{reroll}}
            </div>
            <dl>
                <dt>Unprofessional</dt>
                <dd>18%</dd>
                <dt>Intern / nurse</dt>
                <dd>32%</dd>
                <dt>Doctor w/o facilities</dt>
                <dd>46%</dd>
                <dt>Doctor at clinic</dt>
                <dd>56%</dd>
                <dt>Doctor at hospital</dt>
                <dd>66%</dd>
                <dt>Doctor at major hospital</dt>
                <dd>70%</dd>
            </dl>
        </div>
    {{/savecoma}}
    {{#rollGreater() roll realtarget}}
        <div class="sheet-template-body sheet-template-fail">
            {{#token}}{{token}}{{/token}}
            {{^token}}<div />{{/token}}
            <div>
                <h4>{{rollname}}</h4>
                <p>1d100 vs. {{target}}%</p>
                <p>{{name}}</p>
            </div>
            <div class="sheet-template-results">
                {{roll}}
                <span class="sheet-template-d100">00</span>
                <span class="sheet-template-feedback">FAILURE</span>
                {{reroll}}
            </div>
        </div>
    {{/rollGreater() roll realtarget}}
    {{#^rollGreater() roll realtarget}}
        <div class="sheet-template-body sheet-template-success">
            {{#token}}{{token}}{{/token}}
            {{^token}}<div />{{/token}}
            <div>
                <h4>{{rollname}}</h4>
                <p>1d100 vs. {{target}}%</p>
                <p>{{name}}</p>
            </div>
            <div class="sheet-template-results">
                {{roll}}
                <span class="sheet-template-d100">00</span>
                <span class="sheet-template-feedback">SUCCESS</span>
                {{reroll}}
            </div>
        </div>
    {{/^rollGreater() roll realtarget}}
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-damage">
    <div class="sheet-template-body">
        {{#token}}{{token}}{{/token}}
        {{^token}}<div />{{/token}}
        <div>
            <h4>{{damagename}}</h4>
            <p>{{damageroll}}</p>
            <p>{{name}}</p>
        </div>
        <div class="sheet-template-results">
            {{damage}}
            <span class="sheet-template-type">{{damagetype}}</span>
            {{#rolltype}}
                <span class="sheet-template-feedback">{{rolltype}}</span>
            {{/rolltype}}
            {{^rolltype}}
                <span class="sheet-template-feedback">Damage</span>
            {{/rolltype}}
            {{reroll}}
        </div>
        {{#critdamage}}
        <dl>
            <dt>Critical Strike</dt>
            <dd>{{critdamage}}</dd>
        </dl>
        {{/critdamage}}
    </div>
</rolltemplate>
